<!DOCTYPE html>
<html class="no-js hasSidebar hasPageActions hasBreadcrumb conceptual" data-authenticated="false" data-render="docs" dir="ltr" lang="en-us">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta content="Get-Credential (Microsoft.PowerShell.Security)" property="og:title"/>
  <meta content="https://docs.microsoft.com/_themes/docs.theme/master/en-us/_themes/images/microsoft-header.png" property="og:image"/>
  <meta content="summary" name="twitter:card"/>
  <meta content="@docsmsft" name="twitter:site"/>
  <meta content="Get-Credential (Microsoft.PowerShell.Security)" name="twitter:title"/>
  <meta content="The Get-Credential cmdlet creates a credential object for a specified user name and password. You can use the credential object in security operations. Beginning in Windows PowerShell 3.0, you can usâ¦" name="twitter:description"/>
  <meta content="https://docs.microsoft.com/_themes/docs.theme/master/en-us/_themes/images/microsoft-header.png" name="twitter:image"/>
  <meta content="Microsoft Logo" name="twitter:image:alt"/>
  <meta content="The Get-Credential cmdlet creates a credential object for a specified user name and password. You can use the credential object in security operations. Beginning in Windows PowerShell 3.0, you can usâ¦" name="description"/>
  <meta content="Docs" name="search.ms_sitename"/>
  <meta content="PowerShell_PowerShell-docs_reference" name="search.ms_docsetname"/>
  <meta content="0" name="version"/>
  <meta content="en-us" name="locale"/>
  <meta content="Docs" name="site_name"/>
  <meta content="PowerShell" name="search.ms_product"/>
  <meta content="PowerShell.PowerShell_PowerShell-docs_reference" name="depot_name"/>
  <meta content="https://github.com/PowerShell/PowerShell-Docs/blob/617301cc0a194afdca440ba75f5cec2a540ce619/reference/6/Microsoft.PowerShell.Security/Get-Credential.md" name="ref_skeleton_gitcommit"/>
  <meta content="https://github.com/PowerShell/PowerShell-Docs/blob/live/reference/6/Microsoft.PowerShell.Security/Get-Credential.md" name="original_ref_skeleton_git_url"/>
  <meta content="2018-03-30 03:35 PM" name="updated_at"/>
  <meta content="4beb23ca-5a88-8cc3-4121-d062b49f74f3" name="document_id"/>
  <meta content="c98699f2-814c-63b8-edf5-3293ea1aa99f" name="document_version_independent_id"/>
  <meta content="powershell" name="page_type"/>
  <meta content="command" name="page_kind"/>
  <meta content="06/09/2017" name="ms.date"/>
  <meta content="2.0.0" name="schema"/>
  <meta content="powershell,cmdlet" name="keywords"/>
  <meta content="http://go.microsoft.com/fwlink/?LinkId=821713" name="online_version"/>
  <meta content="Microsoft.PowerShell.Security.dll-Help.xml" name="external_help_file"/>
  <meta content="powershell" name="ms.devlang"/>
  <meta content="INDEX, FOLLOW" name="ROBOTS"/>
  <meta content="sdwheeler" name="author"/>
  <meta content="sewhee" name="ms.author"/>
  <meta content="carmonm" name="manager"/>
  <meta content="/powershell/bread-pscore/toc.yml?view=powershell-6" name="breadcrumb_path"/>
  <meta content="powershell" name="apiPlatform"/>
  <meta content="reference" name="ms.topic"/>
  <meta content="windows, macos, linux" name="ms.tgt_pltfr"/>
  <meta content="powershell-scripting" name="ms.technology"/>
  <meta content="powershell" name="ms.prod"/>
  <meta content="MSDocsHeader-Powershell" name="uhfHeaderId"/>
  <meta content="../psdocs/toc.json?view=powershell-6" name="toc_rel"/>
  <link href="https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.security/get-credential" rel="canonical"/>
  <title>
   Get-Credential
  </title>
  <link href="../../../../_themes/docs.theme/master/en-us/_themes/css/60aac04b.site.css" rel="stylesheet"/>
  <link href="../../../../_themes/docs.theme/master/en-us/_themes/css/fdb8a38a.conceptual.css" rel="stylesheet"/>
 </head>
 <body dir="ltr" lang="en-us">
  <div class="header-holder">
   <div data-bi-name="header" id="headerAreaHolder">
    <div id="uhf-placeholder">
    </div>
   </div>
   <div class="disclaimer-holder" id="disclaimer-holder">
   </div>
  </div>
  <div class="container mainContainer" data-bi-name="body">
   <div class="content-header" data-bi-name="content-header">
    <div class="content-header-controls">
     <button class="contents-button button-border" data-bi-name="contents-expand" type="button">
      <span class="docon docon-menu">
      </span>
      Contents
     </button>
    </div>
    <div class="content-header-controls">
     <button class="ap-collapse-behavior ap-expanded button-border" data-bi-name="ap-collapse" type="button">
      <span class="docon docon-exit-mode">
      </span>
      Exit focus mode
     </button>
    </div>
   </div>
   <div class="primary-holder">
    <main class="content" data-bi-name="content" dir="ltr" id="main" lang="en-us" role="main">
     <!-- <content> -->
     <h1>
      Get-Credential
     </h1>
     <div class="metadata">
      <dl class="attributeList">
       <dt>
        Module:
       </dt>
       <dd>
        <a data-linktype="relative-path" href="./Microsoft.PowerShell.Security.html">
         Microsoft.PowerShell.Security
        </a>
       </dd>
      </dl>
     </div>
     <div class="summaryHolder">
      <div class="summary">
       Gets a credential object based on a user name and password.
      </div>
     </div>
     <h2 class="hiddenAnchor" id="syntax">
      Syntax
     </h2>
     <pre class="wrap"><code class="lang-powershell" dir="ltr">Get-Credential
   [-Credential] &lt;PSCredential&gt;
   [&lt;CommonParameters&gt;]</code></pre>
     <pre class="wrap"><code class="lang-powershell" dir="ltr">Get-Credential
   -Message &lt;String&gt;
   [[-UserName] &lt;String&gt;]
   [&lt;CommonParameters&gt;]</code></pre>
     <h2 id="description">
      Description
     </h2>
     <p>
      The
      <strong>
       Get-Credential
      </strong>
      cmdlet creates a credential object for a specified user name and password.
You can use the credential object in security operations.
     </p>
     <p>
      Beginning in Windows PowerShell 3.0, you can use the
      <em>
       Message
      </em>
      parameter to specify a customized message on the dialog box that prompts the user for their name and password.
     </p>
     <p>
      The
      <strong>
       Get-Credential
      </strong>
      cmdlet prompts the user for a password or a user name and password.
By default, an authentication dialog box appears to prompt the user.
However, in some host programs, such as the Windows PowerShell console, you can prompt the user at the command line by changing a registry entry.
For more information about this registry entry, see the notes and examples.
     </p>
     <h2 id="examples">
      Examples
     </h2>
     <p>
      <strong>
       Example 1: Get a credential and save it
      </strong>
     </p>
     <pre><code class="lang-powershell">PS C:\&gt; $C = Get-Credential</code></pre>
     <p>
      This command gets a credential object and saves it in the $C variable.
     </p>
     <p>
      When you enter the command, a dialog box appears requesting a user name and password.
When you enter the requested information, the cmdlet creates a
      <strong>
       PSCredential
      </strong>
      object representing the credentials of the user and saves it in the $C variable.
     </p>
     <p>
      You can use the object as input to cmdlets that request user authentication, such as those with a
      <em>
       Credential
      </em>
      parameter.
However, some providers that are installed with Windows PowerShell do not support the
      <em>
       Credential
      </em>
      parameter.
     </p>
     <p>
      <strong>
       Example 2: Store a credential in a variable to use with another command
      </strong>
     </p>
     <pre><code class="lang-powershell">PS C:\&gt; $C = Get-Credential

PS C:\&gt; Get-WmiObject Win32_DiskDrive -ComputerName "Server01" -Credential $C</code></pre>
     <p>
      These commands use a
      <strong>
       PSCredential
      </strong>
      object that the
      <strong>
       Get-Credential
      </strong>
      cmdlet returns to authenticate a user on a remote computer so they can use Windows Management Instrumentation (WMI) to manage the computer.
     </p>
     <p>
      The first command gets a
      <strong>
       PSCredential
      </strong>
      object and saves it in the $C variable.
The second command uses the credential object in a Get-WmiObject command.
This command gets information about the disk drives on the Server01 computer.
     </p>
     <p>
      <strong>
       Example 3: Get a credential to use for Windows Management Instrumentation
      </strong>
     </p>
     <pre><code class="lang-powershell">PS C:\&gt; Get-WmiObject Win32_BIOS -ComputerName "Server01" -Credential (Get-Credential -Credential Domain01\User01)</code></pre>
     <p>
      This command shows how to include a
      <strong>
       Get-Credential
      </strong>
      command in a
      <strong>
       Get-WmiObject
      </strong>
      command.
     </p>
     <p>
      This command uses the Get-WmiObject cmdlet to get information about the BIOS on the Server01 computer.
It uses the
      <em>
       Credential
      </em>
      parameter to authenticate the user, Domain01\User01, and a
      <strong>
       Get-Credential
      </strong>
      command as the value of the
      <em>
       Credential
      </em>
      parameter.
     </p>
     <p>
      <strong>
       Example 4: Get a credential by name
      </strong>
     </p>
     <pre><code class="lang-powershell">PS C:\&gt; $C = Get-Credential -Credential User01

PS C:\&gt; $C.Username

\User01</code></pre>
     <p>
      This example creates a credential that includes a user name without a domain name.
It demonstrates that
      <strong>
       Get-Credential
      </strong>
      inserts a backslash before the user name.
     </p>
     <p>
      The first command gets a credential with the user name User01 and stores it in the $C variable.
     </p>
     <p>
      The second command displays the value of the Username property of the resulting
      <strong>
       PSCredential
      </strong>
      object.
     </p>
     <p>
      <strong>
       Example 5: Use the PromptForCredential method to get a credential
      </strong>
     </p>
     <pre><code class="lang-powershell">PS C:\&gt; $Credential = $Host.ui.PromptForCredential("Need credentials", "Please enter your user name and password.", "", "NetBiosUserName")</code></pre>
     <p>
      This command uses the PromptForCredential method to prompt the user for their user name and password.
The command saves the resulting credentials in the $Credential variable.
     </p>
     <p>
      The PromptForCredential method is an alternative to using the
      <strong>
       Get-Credential
      </strong>
      cmdlet.
When you use PromptForCredential, you can specify the caption, messages, and user name that appear in the message box.
     </p>
     <p>
      <strong>
       Example 6: Set the ConsolePrompting registry entry to prompt for credentials
      </strong>
     </p>
     <pre><code class="lang-powershell">PS C:\&gt; Set-ItemProperty "HKLM:\SOFTWARE\Microsoft\PowerShell\1\ShellIds" -Name "ConsolePrompting" -Value $True</code></pre>
     <p>
      This example shows how to modify the registry so that the user is prompted at the command line instead of using a dialog box.
     </p>
     <p>
      The command creates the
      <strong>
       ConsolePrompting
      </strong>
      registry entry and sets its value to $True.
To run this command, start Windows PowerShell with the "Run as administrator" option.
     </p>
     <p>
      To use a dialog box for prompting, set the value of the ConsolePrompting registry entry to $False, or use the Remove-ItemProperty cmdlet to delete it.
     </p>
     <p>
      The
      <strong>
       ConsolePrompting
      </strong>
      registry entry works in some host programs, such as the Windows PowerShell console.
It might not work in all host programs.
     </p>
     <p>
      <strong>
       Example 7: Create a credential without prompting the user
      </strong>
     </p>
     <pre><code class="lang-powershell">PS C:\&gt; $User = "Domain01\User01"



The second command uses the ConvertTo-SecureString cmdlet to create a secure string from a plain text password. The command uses the *AsPlainText* parameter to indicate that the string is plain text and the *Force* parameter to confirm that you understand the risks of using plain text.

PS C:\&gt; $PWord = ConvertTo-SecureString -String "P@sSwOrd" -AsPlainText -Force



The third command uses the New-Object cmdlet to create a **PSCredential** object from the values in the $User and $PWord variables.

PS C:\&gt; $Credential = New-Object -TypeName "System.Management.Automation.PSCredential" -ArgumentList $User, $PWord</code></pre>
     <p>
      This example shows how to create a
      <strong>
       PSCredential
      </strong>
      object that is identical to the object that
      <strong>
       Get-Credential
      </strong>
      returns without prompting the user.
This method requires a plain text password, which might violate the security standards in some enterprises.
     </p>
     <p>
      The first command saves the user account name in the $User variable.
The value must have the Domain\User or ComputerName\User format.
     </p>
     <p>
      <strong>
       Example 8: Get a credential from a shared script or function
      </strong>
     </p>
     <pre><code class="lang-powershell">PS C:\&gt; Get-Credential -Message "Credentials are required for access to the \\Server1\Scripts file share." -UserName "Server01\PowerUsers"

Windows PowerShell



Credentials are required for access to the \\Server1\Scripts file share.



Password for user ntdev\pattif:</code></pre>
     <p>
      This command uses the
      <em>
       Message
      </em>
      and
      <em>
       UserName
      </em>
      parameters of the
      <strong>
       Get-Credential
      </strong>
      cmdlet.
This command format is designed for shared scripts and functions.
In this case, the message tells the user why credentials are needed and gives them confidence that the request is legitimate.
     </p>
     <p>
      <strong>
       Example 9: Get a credential for a user on a remote computer
      </strong>
     </p>
     <pre><code class="lang-powershell">PS C:\&gt; Invoke-Command -ComputerName "Server01" {Get-Credential Domain01\User02}

Windows PowerShell Credential Request : Windows PowerShell Credential Request

Warning: This credential is being requested by a script or application on the SERVER01 remote computer. Enter your credentials only if you

trust the remote computer and the application or script requesting it.





Enter your credentials.



Password for user Domain01\User02: ***************





PSComputerName     : Server01

RunspaceId         : 422bdf52-9886-4ada-ab2f-130497c6777f

PSShowComputerName : True

UserName           : Domain01\User01

Password           : System.Security.SecureString</code></pre>
     <p>
      This command gets a credential from the Server01 remote computer.
The command uses the Invoke-Command cmdlet to run a
      <strong>
       Get-Credential
      </strong>
      command on the remote computer.
The output shows the remote security message that
      <strong>
       Get-Credential
      </strong>
      includes in the authentication prompt.
     </p>
     <h2 id="required-parameters">
      Required Parameters
     </h2>
     <div class="parameterName stack">
      -Credential
     </div>
     <div class="parameterInfo">
      <p>
       Specifies a user name for the credential, such as User01 or Domain01\User01.
If you specify a value for this parameter, it is not necessary to type
       <code>
        -Credential
       </code>
       at the command line.
      </p>
      <p>
       When you submit the command, you are prompted for a password.
      </p>
      <p>
       Starting in Windows PowerShell 3.0, if you enter a user name without a domain,
       <strong>
        Get-Credential
       </strong>
       no longer inserts a backslash before the name.
      </p>
      <p>
       If you omit this parameter, you are prompted for a user name and a password.
      </p>
      <table class="nameValue stack">
       <tr>
        <td>
         Type:
        </td>
        <td>
         <span class="xref">
          PSCredential
         </span>
        </td>
       </tr>
       <tr>
        <td>
         Position:
        </td>
        <td>
         0
        </td>
       </tr>
       <tr>
        <td>
         Default value:
        </td>
        <td>
         None
        </td>
       </tr>
       <tr>
        <td>
         Accept pipeline input:
        </td>
        <td>
         False
        </td>
       </tr>
       <tr>
        <td>
         Accept wildcard characters:
        </td>
        <td>
         False
        </td>
       </tr>
      </table>
     </div>
     <div class="parameterName stack">
      -Message
     </div>
     <div class="parameterInfo">
      <p>
       Specifies a message that appears in the authentication prompt.
      </p>
      <p>
       This parameter is designed for use in a function or script.
You can use the message to explain to the user why you are requesting credentials and how they will be used.
      </p>
      <p>
       This parameter was introduced in Windows PowerShell 3.0.
      </p>
      <table class="nameValue stack">
       <tr>
        <td>
         Type:
        </td>
        <td>
         <span class="xref">
          String
         </span>
        </td>
       </tr>
       <tr>
        <td>
         Position:
        </td>
        <td>
         Named
        </td>
       </tr>
       <tr>
        <td>
         Default value:
        </td>
        <td>
         None
        </td>
       </tr>
       <tr>
        <td>
         Accept pipeline input:
        </td>
        <td>
         False
        </td>
       </tr>
       <tr>
        <td>
         Accept wildcard characters:
        </td>
        <td>
         False
        </td>
       </tr>
      </table>
     </div>
     <h2 id="optional-parameters">
      Optional Parameters
     </h2>
     <div class="parameterName stack">
      -UserName
     </div>
     <div class="parameterInfo">
      <p>
       Specifies a user name.
The authentication prompt requests a password for the user name.
By default, the user name is blank and the authentication prompt requests both a user name and password.
      </p>
      <p>
       When the authentication prompt appears in a dialog box, the user can edit the specified user name.
However, the user cannot change the user name when the prompt appears at the command line.
When using this parameter in a shared function or script, consider all possible presentations.
      </p>
      <p>
       This parameter was introduced in Windows PowerShell 3.0.
      </p>
      <table class="nameValue stack">
       <tr>
        <td>
         Type:
        </td>
        <td>
         <span class="xref">
          String
         </span>
        </td>
       </tr>
       <tr>
        <td>
         Position:
        </td>
        <td>
         0
        </td>
       </tr>
       <tr>
        <td>
         Default value:
        </td>
        <td>
         None
        </td>
       </tr>
       <tr>
        <td>
         Accept pipeline input:
        </td>
        <td>
         False
        </td>
       </tr>
       <tr>
        <td>
         Accept wildcard characters:
        </td>
        <td>
         False
        </td>
       </tr>
      </table>
     </div>
     <h2 id="inputs">
      Inputs
     </h2>
     <p>
      <strong>
       None
      </strong>
     </p>
     <p>
      You cannot pipe input to this cmdlet.
     </p>
     <h2 id="outputs">
      Outputs
     </h2>
     <p>
      <strong>
       System.Management.Automation.PSCredential
      </strong>
     </p>
     <p>
      <strong>
       Get-Credential
      </strong>
      returns a credential object.
     </p>
     <h2 id="notes">
      Notes
     </h2>
     <ul>
      <li>
       You can use the
       <strong>
        PSCredential
       </strong>
       object that
       <strong>
        Get-Credential
       </strong>
       creates in cmdlets that request user authentication, such as those with a
       <em>
        Credential
       </em>
       parameter.
      </li>
      <li>
       <p>
        By default, the authentication prompt appears in a dialog box. To display the authentication prompt at the command line, add the
        <strong>
         ConsolePrompting
        </strong>
        registry entry (HKLM:\SOFTWARE\Microsoft\PowerShell\1\ShellIds\ConsolePrompting) and set its value to $True. If the
        <strong>
         ConsolePrompting
        </strong>
        registry entry does not exist or if its value is $False, the authentication prompt appears in a dialog box. For instructions, see the examples.
       </p>
       <p>
        The
        <strong>
         ConsolePrompting
        </strong>
        registry entry works in the Windows PowerShell console, but it does not work in all host programs.
For example, it has no effect in the Windows PowerShell Integrated Scripting Environment (ISE).
For information about the effect of the
        <strong>
         ConsolePrompting
        </strong>
        registry entry, see the help topics for the host program.
       </p>
      </li>
      <li>
       <p>
        The
        <em>
         Credential
        </em>
        parameter is not supported by all providers that are installed with Windows PowerShell. Beginning in Windows PowerShell 3.0, it is supported on selected cmdlets, such as Get-WmiObject and New-PSDrive.
       </p>
      </li>
     </ul>
     <h2 id="related-links">
      RELATED LINKS
     </h2>
     <!-- </content> -->
    </main>
    <div class="note alert feedback-system-change-alert">
     <p>
      Note
     </p>
     <p>
      The feedback system for this content will be changing soon. Old comments will not be carried over. If content within a comment thread is important to you, please save a copy. For more information on the upcoming change,
      <a href="https://docs.microsoft.com/teamblog/a-new-feedback-system-is-coming-to-docs">
       we invite you to read our blog post
      </a>
      .
     </p>
    </div>
    <div data-bi-name="comments" id="comments-container" role="form">
    </div>
   </div>
  </div>
  <div class="openfeedback-container" id="openFeedbackContainer">
  </div>
  <div class="action-panel">
  </div>
 </body>
</html>