<!DOCTYPE html>
<html class="no-js hasSidebar hasPageActions hasBreadcrumb conceptual" data-authenticated="false" data-render="docs" dir="ltr" lang="en-us">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta content="Import-DfsrClone (dfsr)" property="og:title"/>
  <meta content="https://docs.microsoft.com/_themes/docs.theme/master/en-us/_themes/images/microsoft-header.png" property="og:image"/>
  <meta content="summary" name="twitter:card"/>
  <meta content="@docsmsft" name="twitter:site"/>
  <meta content="Import-DfsrClone (dfsr)" name="twitter:title"/>
  <meta content="Use this topic to help manage Windows and Windows Server technologies with Windows PowerShell." name="twitter:description"/>
  <meta content="https://docs.microsoft.com/_themes/docs.theme/master/en-us/_themes/images/microsoft-header.png" name="twitter:image"/>
  <meta content="Microsoft Logo" name="twitter:image:alt"/>
  <meta content="Use this topic to help manage Windows and Windows Server technologies with Windows PowerShell." name="description"/>
  <meta content="Docs" name="search.ms_sitename"/>
  <meta content="powershell-windows" name="search.ms_docsetname"/>
  <meta content="0" name="version"/>
  <meta content="en-us" name="locale"/>
  <meta content="Docs" name="site_name"/>
  <meta content="MSDN" name="search.ms_product"/>
  <meta content="MSDN.powershell-windows" name="depot_name"/>
  <meta content="https://cpubwin.visualstudio.com/DefaultCollection/powershell/_git/powershell/commit/ced7757924addcaea0b7a244ae4d240e4d28d93a?path=%2fdocset%2fwindows%2fdfsr%2fimport-dfsrclone.md&amp;_a=contents" name="ref_skeleton_gitcommit"/>
  <meta content="https://cpubwin.visualstudio.com/DefaultCollection/powershell/_git/powershell?path=%2fdocset%2fwindows%2fdfsr%2fimport-dfsrclone.md&amp;version=GBlive&amp;_a=contents" name="original_ref_skeleton_git_url"/>
  <meta content="2017-09-15 03:44 AM" name="updated_at"/>
  <meta content="b887d07b-1685-2f88-301e-958ade180427" name="document_id"/>
  <meta content="53233ad1-5fbb-1fa3-b6fd-0be775706c09" name="document_version_independent_id"/>
  <meta content="powershell" name="page_type"/>
  <meta content="command" name="page_kind"/>
  <meta content="manage" name="ms.mktglfcycl"/>
  <meta content="library" name="ms.sitesec"/>
  <meta content="brianlic" name="ms.author"/>
  <meta content="brianlic-msft" name="author"/>
  <meta content="DfsrPowerShell.dll-Help.xml" name="external_help_file"/>
  <meta content="powershell, cmdlet" name="keywords"/>
  <meta content="alanth" name="manager"/>
  <meta content="12/20/2016" name="ms.date"/>
  <meta content="w10" name="ms.prod"/>
  <meta content="powershell-windows" name="ms.technology"/>
  <meta content="reference" name="ms.topic"/>
  <meta content="" name="online_version"/>
  <meta content="2.0.0" name="schema"/>
  <meta content="7543CFD5-B780-4090-AC1C-33FF4AA95E5B" name="ms.assetid"/>
  <meta content="powershell" name="ms.devlang"/>
  <meta content="INDEX, FOLLOW" name="ROBOTS"/>
  <meta content="/powershell/windows/bread/toc.json?view=win10-ps" name="breadcrumb_path"/>
  <meta content="powershell" name="apiPlatform"/>
  <meta content="MSDocsHeader-WindowsIT" name="uhfHeaderId"/>
  <meta content="../win10-ps/toc.json?view=win10-ps" name="toc_rel"/>
  <link href="https://docs.microsoft.com/en-us/powershell/module/dfsr/import-dfsrclone" rel="canonical"/>
  <title>
   Import-DfsrClone
  </title>
  <link href="../../../../_themes/docs.theme/master/en-us/_themes/css/e4a1f3a3.site.css" rel="stylesheet"/>
  <link href="../../../../_themes/docs.theme/master/en-us/_themes/css/31353636.conceptual.css" rel="stylesheet"/>
 </head>
 <body dir="ltr" lang="en-us">
  <div class="header-holder">
   <div data-bi-name="header" id="headerAreaHolder">
    <div id="uhf-placeholder">
    </div>
   </div>
   <div class="disclaimer-holder" id="disclaimer-holder">
   </div>
  </div>
  <div class="container mainContainer" data-bi-name="body">
   <div class="content-header" data-bi-name="content-header">
    <div class="content-header-controls">
     <button class="contents-button button-border" data-bi-name="contents-expand" type="button">
      <span class="docon docon-menu">
      </span>
      Contents
     </button>
    </div>
    <div class="content-header-controls">
     <button class="ap-collapse-behavior ap-expanded button-border" data-bi-name="ap-collapse" type="button">
      <span class="docon docon-exit-mode">
      </span>
      Exit focus mode
     </button>
    </div>
   </div>
   <div class="primary-holder">
    <main class="content" data-bi-name="content" dir="ltr" id="main" lang="en-us" role="main">
     <!-- <content> -->
     <h1>
      Import-Dfsr
      <wbr/>
      Clone
     </h1>
     <div class="metadata">
      <dl class="attributeList">
       <dt>
        Module:
       </dt>
       <dd>
        <a data-linktype="relative-path" href="./.html">
         dfsr
        </a>
       </dd>
      </dl>
     </div>
     <div class="summaryHolder">
      <div class="summary">
       Imports a cloned DFS Replication database and volume configuration settings.
      </div>
     </div>
     <h2 class="hiddenAnchor" id="syntax">
      Syntax
     </h2>
     <pre class="wrap"><code class="lang-powershell" dir="ltr">Import-DfsrClone
      [-Volume] &lt;String&gt;
      [-Path] &lt;String&gt;
      [-Force]
      [-WhatIf]
      [-Confirm]
      [&lt;CommonParameters&gt;]</code></pre>
     <h2 id="description">
      Description
     </h2>
     <p>
      The
      <strong>
       Import-DfsrClone
      </strong>
      cmdlet imports a Distributed File System (DFS) Replication database and volume configuration XML file settings for a given volume from another computer, in order to clone that database on the local computer.
DFS Replication databases exist on every volume that contains replicated folder content and a single database contains references for all replicated folders.
When you run this cmdlet, it triggers the import in the DFS Replication service and waits for the service to complete the operation.
Use Get-DfsrCloneState to monitor the import process.
     </p>
     <p>
      Important: DFS Replication does not support cloning SYSVOL or read-only replicas in Windows Server 2012 R2.
The export process skips replicated folders automatically.
You can only export or import one database at a time for a computer.
     </p>
     <p>
      Use the recommended and supported steps to perform DFS Replication database cloning.
For more information, see the following Microsoft web site:
      <a data-linktype="external" href="http://go.microsoft.com/fwlink/?LinkId=302005">
       http://go.microsoft.com/fwlink/?LinkId=302005
      </a>
      .
The term upstream refers to the server that is the authoritative source of both replicated file data and the DFS Replication database.
The term downstream refers to the non-authoritative server that is a clone of the authoritative server.
     </p>
     <h2 id="examples">
      Examples
     </h2>
     <p>
      <strong>
       Example 1: Clone and import a DFS Replication database
      </strong>
     </p>
     <pre><code class="lang-powershell">PS C:\&gt; Import-DfsrClone -Volume "C:" -Path "C:\DfsRClone"
This operation will import the database and clone DFSR. It can take a long time to complete. Use Get-DfsrCloneState or
DFSR event 2404 to determine when the import has succeeded. Volume: 
c:\ Path: C:\Dfsrclone
Are you sure you want to continue to import the database clone? [Y] Yes  [N] No  [S] Suspend  [?] Help (default is "Y"):Y</code></pre>
     <p>
      This command clones and imports the DFS Replication database and volume configuration XML to the C: volume from the C:\ DfsRClone folder.
     </p>
     <p>
      <strong>
       Example 2: Import a DFS Replication database and periodically check status
      </strong>
     </p>
     <pre><code class="lang-powershell">PS C:\&gt; Import-DfsrClone -Volume "C:" -Path "C:\DfsRClone"
PS C:\&gt; Get-DfsrCloneState
PS C:\&gt; Get-DfsrCloneState
PS C:\&gt; Get-DfsrCloneState</code></pre>
     <p>
      This example imports a DFS Replication database clone and then uses the
      <strong>
       Get-DfsrCloneState
      </strong>
      cmdlet to periodically check the state until the replication operation completes.
     </p>
     <p>
      The first command uses the
      <strong>
       Import-DfsrClone
      </strong>
      cmdlet to start the import process.
You must open another Windows PowerShell console or hit CTRL+C to exit the
      <strong>
       Import-DfsrClone
      </strong>
      cmdlet.
Even if the cmdlet stops running, the cloning continues on the server.
     </p>
     <p>
      The second command uses the
      <strong>
       Get-DfsrCloneState
      </strong>
      cmdlet to check the state of the import process.
The output appears after the command.
     </p>
     <p>
      The third command uses the
      <strong>
       Get-DfsrCloneState
      </strong>
      cmdlet to check the state of the import process.
The output indicates that the import succeeded.
     </p>
     <p>
      <strong>
       Example 3: Export and import a database
      </strong>
     </p>
     <pre><code class="lang-powershell">PS C:\&gt; New-DfsReplicationGroup "RG05" | New-DfsReplicatedFolder -FolderName "RF05" | Add-DfsrMember -ComputerName "SRV01"
PS C:\&gt; Set-DfsrMembership -ComputerName "SRV01" -ContentPath "C:\Rf05" -PrimaryMember $True -FolderName "RF05"
PS C:\&gt; Update-DfsrConfigurationFromAD
PS C:\&gt; New-Item -Path "C:\DfsRClone" -Type Directory
PS C:\&gt; Export-DfsrClone -Volume "C:" -Path "C:\DfsRClone"
PS C:\&gt; Robocopy.exe C:\Rf05 \\srv02\c$\Rf5 /E /B /COPYALL /R:6 /W:5 /MT:64 /XD DfsrPrivate /TEE /LOG+:preseed.log
PS C:\&gt; Robocopy.exe C:\DfsRClone \\srv02\c$\DfsRClone /B
PS C:\&gt; RD "C:\system volume information\dfsr" -Force -Recurse
PS C:\&gt; Import-DfsrClone -Volume "C:" -Path "C:\DfsRClone"
PS C:\&gt; Get-DfsrCloneState
PS C:\&gt; Add-DfsrMember -GroupName "RG05" -ComputerName "SRV02" | Set-DfsrMembership -FolderName "RF05" -ContentPath "C:\Rf05"
PS C:\&gt; Add-DfsrConnection -GroupName "RG05" -SourceComputerName "SRV01" -DestinationComputerName "SRV02"
PS C:\&gt; Update-DfsrConfigurationFromAD</code></pre>
     <p>
      This example demonstrates the end-to-end process of cloning SRV01 and its RF05 replicated folder on C:\ to server SRV02.
The first seven commands run on the upstream server, and the remaining commands run on the downstream server.
     </p>
     <p>
      The first command, on the upstream server, uses the
      <strong>
       New-DfsReplicationGroup
      </strong>
      cmdlet to create a replication group named RG05.
The output of that command is piped to the
      <strong>
       New-DfsReplicatedFolder
      </strong>
      cmdlet to create a folder named RF05, and the output of that command is piped to the
      <strong>
       Add-DfsrMember
      </strong>
      cmdlet to add the computer named SRV01 as a member.
     </p>
     <p>
      The second command, on the upstream server, uses the
      <strong>
       Set-DfsrMembership
      </strong>
      cmdlet to modify the membership for the computer named SRV01.
     </p>
     <p>
      The third command, on the upstream server, uses the
      <strong>
       Update-DfsrConfigurationFromAD
      </strong>
      cmdlet to update the DFS Replication configuration on the source server.
     </p>
     <p>
      The fourth command, on the upstream server, uses the
      <strong>
       New-Item
      </strong>
      cmdlet to create a new directory in the path C:\DfsRClone.
     </p>
     <p>
      The fifth command, on the upstream server, uses the
      <strong>
       Export-DfsrClone
      </strong>
      cmdlet to export a volume.
     </p>
     <p>
      The sixth command, on the upstream server, uses Robocopy to copy the replicated folder directory structure to the destination server.
     </p>
     <p>
      The seventh command, on the upstream server, uses Robocopy to copy the C:\DfsRClone directory to the destination server.
     </p>
     <p>
      The eighth command, on the downstream server, uses RD to remove the replication directory, if it exists.
     </p>
     <p>
      The ninth command, on the downstream server, uses the
      <strong>
       Import-DfsrClone
      </strong>
      cmdlet to import the database and volume configuration on the destination server.
     </p>
     <p>
      The tenth command, on the downstream server, uses the
      <strong>
       Get-DfsrCloneState
      </strong>
      cmdlet to verify the completion of the import process.
     </p>
     <p>
      The eleventh command, on the downstream server, uses the
      <strong>
       Add-DfsrMember
      </strong>
      cmdlet to add a new group on the destination server.
The command pipes the output of this cmdlet to the
      <strong>
       Set-DfsrMembership
      </strong>
      cmdlet to add membership for the replicated folder group.
     </p>
     <p>
      The twelfth command, on the downstream server, uses the
      <strong>
       Add-DfsrConnection
      </strong>
      cmdlet to add a connection for the destination server.
     </p>
     <p>
      The final command, on the downstream server, uses the
      <strong>
       Update-DfsrConfigurationFromAD
      </strong>
      cmdlet to update the DFS Replication configuration on the destination server.
     </p>
     <h2 id="required-parameters">
      Required Parameters
     </h2>
     <div class="parameterName stack">
      -Path
     </div>
     <div class="parameterInfo">
      <p>
       Specifies a location from which to read the exported DFS Replication database and volume configuration XML file.
After you export the DFS Replication database, but before you perform the import clone operation, you must populate the downstream server with the contents of the replicated folder.
      </p>
      <table class="nameValue stack">
       <tr>
        <td>
         Type:
        </td>
        <td>
         <span class="xref">
          String
         </span>
        </td>
       </tr>
       <tr>
        <td>
         Aliases:
        </td>
        <td>
         SourceFolderPath
        </td>
       </tr>
       <tr>
        <td>
         Position:
        </td>
        <td>
         1
        </td>
       </tr>
       <tr>
        <td>
         Default value:
        </td>
        <td>
         None
        </td>
       </tr>
       <tr>
        <td>
         Accept pipeline input:
        </td>
        <td>
         False
        </td>
       </tr>
       <tr>
        <td>
         Accept wildcard characters:
        </td>
        <td>
         False
        </td>
       </tr>
      </table>
     </div>
     <div class="parameterName stack">
      -Volume
     </div>
     <div class="parameterInfo">
      <p>
       Specifies a drive letter or mount point that contains the populated DFS Replication file contents.
This volume contains the previously exported database once the import is complete.
After you export the DFS Replication database, but before you perform the import clone operation, you must populate the downstream server with the contents of the replicated folder.
      </p>
      <table class="nameValue stack">
       <tr>
        <td>
         Type:
        </td>
        <td>
         <span class="xref">
          String
         </span>
        </td>
       </tr>
       <tr>
        <td>
         Position:
        </td>
        <td>
         0
        </td>
       </tr>
       <tr>
        <td>
         Default value:
        </td>
        <td>
         None
        </td>
       </tr>
       <tr>
        <td>
         Accept pipeline input:
        </td>
        <td>
         True (ByPropertyName, ByValue)
        </td>
       </tr>
       <tr>
        <td>
         Accept wildcard characters:
        </td>
        <td>
         False
        </td>
       </tr>
      </table>
     </div>
     <h2 id="optional-parameters">
      Optional Parameters
     </h2>
     <div class="parameterName stack">
      -Confirm
     </div>
     <div class="parameterInfo">
      <p>
       Prompts you for confirmation before running the cmdlet.
      </p>
      <table class="nameValue stack">
       <tr>
        <td>
         Type:
        </td>
        <td>
         <span class="xref">
          SwitchParameter
         </span>
        </td>
       </tr>
       <tr>
        <td>
         Aliases:
        </td>
        <td>
         cf
        </td>
       </tr>
       <tr>
        <td>
         Position:
        </td>
        <td>
         Named
        </td>
       </tr>
       <tr>
        <td>
         Default value:
        </td>
        <td>
         False
        </td>
       </tr>
       <tr>
        <td>
         Accept pipeline input:
        </td>
        <td>
         False
        </td>
       </tr>
       <tr>
        <td>
         Accept wildcard characters:
        </td>
        <td>
         False
        </td>
       </tr>
      </table>
     </div>
     <div class="parameterName stack">
      -Force
     </div>
     <div class="parameterInfo">
      <p>
       Forces the command to run without asking for user confirmation.
Use this parameter for scripted cloning.
      </p>
      <table class="nameValue stack">
       <tr>
        <td>
         Type:
        </td>
        <td>
         <span class="xref">
          SwitchParameter
         </span>
        </td>
       </tr>
       <tr>
        <td>
         Position:
        </td>
        <td>
         Named
        </td>
       </tr>
       <tr>
        <td>
         Default value:
        </td>
        <td>
         None
        </td>
       </tr>
       <tr>
        <td>
         Accept pipeline input:
        </td>
        <td>
         False
        </td>
       </tr>
       <tr>
        <td>
         Accept wildcard characters:
        </td>
        <td>
         False
        </td>
       </tr>
      </table>
     </div>
     <div class="parameterName stack">
      -WhatIf
     </div>
     <div class="parameterInfo">
      <p>
       Shows what would happen if the cmdlet runs.
The cmdlet is not run.
      </p>
      <table class="nameValue stack">
       <tr>
        <td>
         Type:
        </td>
        <td>
         <span class="xref">
          SwitchParameter
         </span>
        </td>
       </tr>
       <tr>
        <td>
         Aliases:
        </td>
        <td>
         wi
        </td>
       </tr>
       <tr>
        <td>
         Position:
        </td>
        <td>
         Named
        </td>
       </tr>
       <tr>
        <td>
         Default value:
        </td>
        <td>
         False
        </td>
       </tr>
       <tr>
        <td>
         Accept pipeline input:
        </td>
        <td>
         False
        </td>
       </tr>
       <tr>
        <td>
         Accept wildcard characters:
        </td>
        <td>
         False
        </td>
       </tr>
      </table>
     </div>
     <h2 id="inputs">
      Inputs
     </h2>
     <p>
      <strong>
       string
      </strong>
     </p>
     <h2 id="outputs">
      Outputs
     </h2>
     <p>
      <strong>
       [none]
      </strong>
     </p>
     <h2 id="related-links">
      Related Links
     </h2>
     <ul>
      <li>
       <a data-linktype="relative-path" href="./export-dfsrclone.html">
        Export-DfsrClone
       </a>
      </li>
     </ul>
     <!-- </content> -->
    </main>
    <section class="feedback-section" data-bi-name="feedback-section">
     <h2 id="feedback">
      Feedback
     </h2>
     <div class="alert choose-feedback-type">
      <p>
       We'd love to hear your thoughts. Choose the type you'd like to provide:
      </p>
      <div class="choose-feedback-buttons">
       <a class="button-border feedback-type-product" data-bi-name="product-feedback" href="https://windowsserver.uservoice.com/forums/301869-powershell">
        Product feedback
        <span aria-hidden="true" class="docon docon-navigate-external">
        </span>
       </a>
       <div class="button-group">
        <button class="button-border feedback-sign-in-button" data-bi-name="feedback-sign-in">
         <span aria-hidden="true" class="docon docon-brand-github">
         </span>
         Sign in to give documentation feedback
        </button>
        <button aria-controls="feedback-form" aria-expanded="false" class="button-border feedback-form-toggle" data-bi-name="documentation-feedback" hidden="">
         Content feedback
        </button>
        <div auto-align="" class="dropdown has-caret">
         <button aria-controls="fbm0" aria-expanded="false" aria-haspopup="true" aria-label="Expand documentation feedback menu" class="button-border dropdown-trigger" data-bi-name="documentation-feedback-menu">
          <span aria-hidden="true" class="docon docon-chevron-down-light">
          </span>
         </button>
         <div class="dropdown-menu documentation-feedback-menu" id="fbm0" role="menu">
          You may also leave feedback
          <a data-bi-name="create-issue-on-github" href="{0}">
           directly on GitHub
           <span aria-hidden="true" class="docon docon-navigate-external">
           </span>
          </a>
          .
         </div>
        </div>
       </div>
      </div>
      <p>
       <small>
        Our new feedback system is built on GitHub Issues. Read about this change in
        <a href="https://docs.microsoft.com/teamblog/a-new-feedback-system-is-coming-to-docs">
         our blog post
        </a>
        .
       </small>
      </p>
     </div>
     <form accept-charset="UTF-8" action="javascript:" autocomplete="off" class="feedback-form" hidden="" id="feedback-form">
      <h3 class="feedback-form-heading current-user">
       <img alt="Avatar" aria-hidden="true" class="avatar" height="36" width="36"/>
       <span aria-hidden="true" class="username">
       </span>
       <span class="visually-hidden">
        Liquid error: Can't find the localized string giveDocumentationFeedback for template Conceptual.
       </span>
      </h3>
      <label>
       <span class="visually-hidden">
        Title
       </span>
       <input name="title" pattern=".*\w.*" placeholder="Title" required="" type="text"/>
      </label>
      <label>
       <span class="visually-hidden">
        Leave a comment
       </span>
       <textarea name="body" placeholder="Leave a comment" required=""></textarea>
      </label>
      <div class="action-container">
       <button class="primary-action" name="submit" type="submit">
        Submit feedback
       </button>
      </div>
     </form>
     <div class="feedback-status alert busy" role="alert">
      <p>
       Loading feedback...
      </p>
     </div>
     <div class="feedback-tab-group tabGroup" data-tab-group-independent="" hidden="">
      <ul role="tablist">
       <li role="presentation">
        <a aria-controls="tabpanel-issues-open" aria-label="Open Issues" data-tab="issues-open" href="#tabpanel-issues-open" role="tab">
        </a>
       </li>
       <li role="presentation">
        <a aria-controls="tabpanel-issues-closed" aria-label="Closed Issues" data-tab="issues-closed" href="#tabpanel-issues-closed" role="tab">
        </a>
       </li>
      </ul>
      <section data-tab="issues-open" id="tabpanel-issues-open" role="tabpanel">
       <div class="no-issues-placeholder">
        There are no open issues
       </div>
       <ul aria-label="Open Issues" class="github-issues-list">
       </ul>
      </section>
      <section data-tab="issues-closed" id="tabpanel-issues-closed" role="tabpanel">
       <div class="no-issues-placeholder">
        There are no closed issues
       </div>
       <ul aria-label="Closed Issues" class="github-issues-list">
       </ul>
      </section>
     </div>
     <div class="action-container">
      <a class="view-on-github" data-bi-name="view-on-github" hidden="" href="https://github.com/MicrosoftDocs/windows-powershell-docs/issues">
       <span aria-hidden="true" class="docon docon-brand-github">
       </span>
       <span>
        View on GitHub
       </span>
       <span aria-hidden="true" class="docon docon-navigate-external">
       </span>
      </a>
     </div>
    </section>
   </div>
  </div>
  <div class="openfeedback-container" id="openFeedbackContainer">
  </div>
  <div class="action-panel">
  </div>
 </body>
</html>