<!DOCTYPE html>
<html class="no-js hasSidebar hasPageActions hasBreadcrumb conceptual" data-authenticated="false" data-render="docs" dir="ltr" lang="en-us">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta content="Disable-PSSessionConfiguration (Microsoft.PowerShell.Core)" property="og:title"/>
  <meta content="https://docs.microsoft.com/_themes/docs.theme/master/en-us/_themes/images/microsoft-header.png" property="og:image"/>
  <meta content="summary" name="twitter:card"/>
  <meta content="@docsmsft" name="twitter:site"/>
  <meta content="Disable-PSSessionConfiguration (Microsoft.PowerShell.Core)" name="twitter:title"/>
  <meta content="The Disable-PSSessionConfiguration cmdlet disables session configurations on the local computer, which prevents all users from using the session configurations to create a user-managed sessions (PSSeâ¦" name="twitter:description"/>
  <meta content="https://docs.microsoft.com/_themes/docs.theme/master/en-us/_themes/images/microsoft-header.png" name="twitter:image"/>
  <meta content="Microsoft Logo" name="twitter:image:alt"/>
  <meta content="The Disable-PSSessionConfiguration cmdlet disables session configurations on the local computer, which prevents all users from using the session configurations to create a user-managed sessions (PSSeâ¦" name="description"/>
  <meta content="Docs" name="search.ms_sitename"/>
  <meta content="PowerShell_PowerShell-docs_reference" name="search.ms_docsetname"/>
  <meta content="0" name="version"/>
  <meta content="en-us" name="locale"/>
  <meta content="Docs" name="site_name"/>
  <meta content="PowerShell" name="search.ms_product"/>
  <meta content="PowerShell.PowerShell_PowerShell-docs_reference" name="depot_name"/>
  <meta content="https://github.com/PowerShell/PowerShell-Docs/blob/6a6d85dfc6556f4605f45163661aeed4e68cf400/reference/6/Microsoft.PowerShell.Core/Disable-PSSessionConfiguration.md" name="ref_skeleton_gitcommit"/>
  <meta content="https://github.com/PowerShell/PowerShell-Docs/blob/live/reference/6/Microsoft.PowerShell.Core/Disable-PSSessionConfiguration.md" name="original_ref_skeleton_git_url"/>
  <meta content="2018-03-30 03:35 PM" name="updated_at"/>
  <meta content="d019f69e-5930-ac4d-6e5b-32e8a5555eb2" name="document_id"/>
  <meta content="51544f53-1603-1a70-213f-0d99252b3f7b" name="document_version_independent_id"/>
  <meta content="powershell" name="page_type"/>
  <meta content="command" name="page_kind"/>
  <meta content="06/09/2017" name="ms.date"/>
  <meta content="2.0.0" name="schema"/>
  <meta content="powershell,cmdlet" name="keywords"/>
  <meta content="http://go.microsoft.com/fwlink/?LinkId=821473" name="online_version"/>
  <meta content="System.Management.Automation.dll-Help.xml" name="external_help_file"/>
  <meta content="powershell" name="ms.devlang"/>
  <meta content="INDEX, FOLLOW" name="ROBOTS"/>
  <meta content="sdwheeler" name="author"/>
  <meta content="sewhee" name="ms.author"/>
  <meta content="carmonm" name="manager"/>
  <meta content="/powershell/bread-pscore/toc.yml?view=powershell-6" name="breadcrumb_path"/>
  <meta content="powershell" name="apiPlatform"/>
  <meta content="reference" name="ms.topic"/>
  <meta content="windows, macos, linux" name="ms.tgt_pltfr"/>
  <meta content="powershell-scripting" name="ms.technology"/>
  <meta content="powershell" name="ms.prod"/>
  <meta content="MSDocsHeader-Powershell" name="uhfHeaderId"/>
  <meta content="../psdocs/toc.json?view=powershell-6" name="toc_rel"/>
  <link href="https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/disable-pssessionconfiguration" rel="canonical"/>
  <title>
   Disable-PSSessionConfiguration
  </title>
  <link href="../../../../_themes/docs.theme/master/en-us/_themes/css/60aac04b.site.css" rel="stylesheet"/>
  <link href="../../../../_themes/docs.theme/master/en-us/_themes/css/fdb8a38a.conceptual.css" rel="stylesheet"/>
 </head>
 <body dir="ltr" lang="en-us">
  <div class="header-holder">
   <div data-bi-name="header" id="headerAreaHolder">
    <div id="uhf-placeholder">
    </div>
   </div>
   <div class="disclaimer-holder" id="disclaimer-holder">
   </div>
  </div>
  <div class="container mainContainer" data-bi-name="body">
   <div class="content-header" data-bi-name="content-header">
    <div class="content-header-controls">
     <button class="contents-button button-border" data-bi-name="contents-expand" type="button">
      <span class="docon docon-menu">
      </span>
      Contents
     </button>
    </div>
    <div class="content-header-controls">
     <button class="ap-collapse-behavior ap-expanded button-border" data-bi-name="ap-collapse" type="button">
      <span class="docon docon-exit-mode">
      </span>
      Exit focus mode
     </button>
    </div>
   </div>
   <div class="primary-holder">
    <main class="content" data-bi-name="content" dir="ltr" id="main" lang="en-us" role="main">
     <!-- <content> -->
     <h1>
      Disable-PSSession
      <wbr/>
      Configuration
     </h1>
     <div class="metadata">
      <dl class="attributeList">
       <dt>
        Module:
       </dt>
       <dd>
        <a data-linktype="relative-path" href="./Microsoft.PowerShell.Core.html">
         Microsoft.PowerShell.Core
        </a>
       </dd>
      </dl>
     </div>
     <div class="summaryHolder">
      <div class="summary">
       Disables session configurations on the local computer.
      </div>
     </div>
     <h2 class="hiddenAnchor" id="syntax">
      Syntax
     </h2>
     <pre class="wrap"><code class="lang-powershell" dir="ltr">Disable-PSSessionConfiguration
       [[-Name] &lt;String[]&gt;]
       [-Force]
       [-NoServiceRestart]
       [-WhatIf]
       [-Confirm]
       [&lt;CommonParameters&gt;]</code></pre>
     <h2 id="description">
      Description
     </h2>
     <p>
      The
      <strong>
       Disable-PSSessionConfiguration
      </strong>
      cmdlet disables session configurations on the local computer, which prevents all users from using the session configurations to create a user-managed sessions (
      <strong>
       PSSessions
      </strong>
      ) on the local computer.
This is an advanced cmdlet that is designed to be used by system administrators to manage customized session configurations for their users.
     </p>
     <p>
      Starting in Windows PowerShell 3.0, the
      <strong>
       Disable-PSSessionConfiguration
      </strong>
      cmdlet sets the
      <strong>
       Enabled
      </strong>
      setting of the session configuration (WSMan:\localhost\Plugins\&lt;SessionConfiguration&gt;\Enabled) to False.
     </p>
     <p>
      In Windows PowerShell 2.0, the
      <strong>
       Disable-PSSessionConfiguration
      </strong>
      cmdlet adds a Deny_All entry to the security descriptor of one or more registered session configurations.
     </p>
     <p>
      Without parameters,
      <strong>
       Disable-PSSessionConfiguration
      </strong>
      disables the Microsoft.PowerShell configuration, which is the default configuration that is used for sessions.
Unless the user specifies a different configuration, both local and remote users are effectively prevented from creating any sessions that connect to the computer.
     </p>
     <p>
      To disable all session configurations on the computer, use Disable-PSRemoting.
     </p>
     <h2 id="examples">
      Examples
     </h2>
     <p>
      <strong>
       Example 1: Disable the default configuration
      </strong>
     </p>
     <pre><code class="lang-powershell">PS C:\&gt; Disable-PSSessionConfiguration</code></pre>
     <p>
      This command disables the Microsoft.PowerShell session configuration.
     </p>
     <p>
      <strong>
       Example 2: Disable all registered session configurations
      </strong>
     </p>
     <pre><code class="lang-powershell">PS C:\&gt; Disable-PSSessionConfiguration -Name *</code></pre>
     <p>
      This command disables all registered session configurations on the computer.
     </p>
     <p>
      <strong>
       Example 3: Disable session configurations by name
      </strong>
     </p>
     <pre><code class="lang-powershell">PS C:\&gt; Disable-PSSessionConfiguration -Name Microsoft* -Force</code></pre>
     <p>
      This command disables all session configurations that have names that begin with Microsoft.
The command uses the
      <em>
       Force
      </em>
      parameter to suppress all user prompts from the command.
     </p>
     <p>
      <strong>
       Example 4: Disable session configurations by using the pipeline
      </strong>
     </p>
     <pre><code class="lang-powershell">PS C:\&gt; Get-PSSessionConfiguration -Name MaintenanceShell, AdminShell | Disable-PSSessionConfiguration</code></pre>
     <p>
      This command disables the MaintenanceShell and AdminShell session configurations.
     </p>
     <p>
      The command uses a pipeline operator (|) to send the results of a Get-PSSessionConfiguration command to
      <strong>
       Disable-PSSessionConfiguration
      </strong>
      .
     </p>
     <p>
      <strong>
       Example 5: Effects of disabling a session configuration
      </strong>
     </p>
     <pre><code class="lang-powershell">The first command uses the **Get-PSSessionConfiguration** and Format-Table cmdlets to display only the **Name** and **Permission** properties of the session configuration objects. This table format makes it easier to see the values of the objects. The results show that members of the Administrators group are permitted to use the session configurations.

PS C:\&gt; Get-PSSessionConfiguration | Format-Table -Property Name, Permission -Auto



Name                   Permission

----                   ----------

MaintenanceShell       BUILTIN\Administrators AccessAllowed

microsoft.powershell   BUILTIN\Administrators AccessAllowed

microsoft.powershell32 BUILTIN\Administrators AccessAllowed





The second command uses the **Disable-PSSessionConfiguration** cmdlet to disable the MaintenanceShell session configuration. The command uses the **Force** parameter to suppress all user prompts.

PS C:\&gt; Disable-PSSessionConfiguration -Name MaintenanceShell -Force



The third command repeats the first command. The results show that you can still get the object that represents the MaintenanceShell session configuration even though everyone is denied access to it. The "AccessDenied" entry takes precedence over all other entries in the security descriptor.

PS C:\&gt; Get-PSSessionConfiguration | Format-Table -Property Name, Permission -Auto



Name                   Permission

----                   ----------

MaintenanceShell       Everyone AccessDenied, BUILTIN\Administrators AccessAllowed

microsoft.powershell   BUILTIN\Administrators AccessAllowed

microsoft.powershell32 BUILTIN\Administrators AccessAllowed





The fourth command uses the Set-PSSessionConfiguration cmdlet to increase the MaximumDataSizePerCommandMB setting on the MaintenanceShell session configuration to 60. The results show that the command was successful even though everyone is denied access to the configuration.

PS C:\&gt; Set-PSSessionConfiguration -Name MaintenanceShell -MaximumReceivedDataSizePerCommandMB 60



ParamName            ParamValue

---------            ----------

psmaximumreceived... 60

"Restart WinRM service"

WinRM service need to be restarted to make the changes effective. Do you want to run the command "restart-service winrm"?

[Y] Yes  [N] No  [S] Suspend  [?] Help (default is "Y"): y





The fifth command attempts to use the MaintenanceShell session configuration in a session. It uses the New-PSSession cmdlet to create a new session and the *ConfigurationName* parameter to specify the MaintenanceShell configuration.The results show that the **New-PSSession** command fails because the user is denied access to the configuration.

PS C:\&gt; New-PSSession -ComputerName localhost -ConfigurationName MaintenanceShell

[localhost] Connecting to remote server failed with the following error message : Access is denied. For more information, see the about_Remote_Troubl

eshooting Help topic.

+ CategoryInfo          : OpenError: (System.Manageme....RemoteRunspace:RemoteRunspace) [], PSRemotingTransportException

+ FullyQualifiedErrorId : PSSessionOpenFailed</code></pre>
     <p>
      This example shows the effect of disabling a session configuration.
     </p>
     <h2 id="optional-parameters">
      Optional Parameters
     </h2>
     <div class="parameterName stack">
      -Confirm
     </div>
     <div class="parameterInfo">
      <p>
       Prompts you for confirmation before running the cmdlet.
      </p>
      <table class="nameValue stack">
       <tr>
        <td>
         Type:
        </td>
        <td>
         <span class="xref">
          SwitchParameter
         </span>
        </td>
       </tr>
       <tr>
        <td>
         Aliases:
        </td>
        <td>
         cf
        </td>
       </tr>
       <tr>
        <td>
         Position:
        </td>
        <td>
         Named
        </td>
       </tr>
       <tr>
        <td>
         Default value:
        </td>
        <td>
         False
        </td>
       </tr>
       <tr>
        <td>
         Accept pipeline input:
        </td>
        <td>
         False
        </td>
       </tr>
       <tr>
        <td>
         Accept wildcard characters:
        </td>
        <td>
         False
        </td>
       </tr>
      </table>
     </div>
     <div class="parameterName stack">
      -Force
     </div>
     <div class="parameterInfo">
      <p>
       Forces the command to run without asking for user confirmation.
      </p>
      <table class="nameValue stack">
       <tr>
        <td>
         Type:
        </td>
        <td>
         <span class="xref">
          SwitchParameter
         </span>
        </td>
       </tr>
       <tr>
        <td>
         Position:
        </td>
        <td>
         Named
        </td>
       </tr>
       <tr>
        <td>
         Default value:
        </td>
        <td>
         None
        </td>
       </tr>
       <tr>
        <td>
         Accept pipeline input:
        </td>
        <td>
         False
        </td>
       </tr>
       <tr>
        <td>
         Accept wildcard characters:
        </td>
        <td>
         False
        </td>
       </tr>
      </table>
     </div>
     <div class="parameterName stack">
      -Name
     </div>
     <div class="parameterInfo">
      <p>
       Specifies an array of names of session configurations to disable.
Enter one or more configuration names.
Wildcard characters are permitted.
You can also pipe a string that contains a configuration name or a session configuration object to
       <strong>
        Disable-PSSessionConfiguration
       </strong>
       .
      </p>
      <p>
       If you omit this parameter,
       <strong>
        Disable-PSSessionConfiguration
       </strong>
       disables the Microsoft.PowerShell session configuration.
      </p>
      <table class="nameValue stack">
       <tr>
        <td>
         Type:
        </td>
        <td>
         <span class="xref">
          String[]
         </span>
        </td>
       </tr>
       <tr>
        <td>
         Position:
        </td>
        <td>
         0
        </td>
       </tr>
       <tr>
        <td>
         Default value:
        </td>
        <td>
         None
        </td>
       </tr>
       <tr>
        <td>
         Accept pipeline input:
        </td>
        <td>
         True (ByPropertyName, ByValue)
        </td>
       </tr>
       <tr>
        <td>
         Accept wildcard characters:
        </td>
        <td>
         False
        </td>
       </tr>
      </table>
     </div>
     <div class="parameterName stack">
      -NoServiceRestart
     </div>
     <div class="parameterInfo">
      <table class="nameValue stack">
       <tr>
        <td>
         Type:
        </td>
        <td>
         <span class="xref">
          SwitchParameter
         </span>
        </td>
       </tr>
       <tr>
        <td>
         Position:
        </td>
        <td>
         Named
        </td>
       </tr>
       <tr>
        <td>
         Default value:
        </td>
        <td>
         None
        </td>
       </tr>
       <tr>
        <td>
         Accept pipeline input:
        </td>
        <td>
         False
        </td>
       </tr>
       <tr>
        <td>
         Accept wildcard characters:
        </td>
        <td>
         False
        </td>
       </tr>
      </table>
     </div>
     <div class="parameterName stack">
      -WhatIf
     </div>
     <div class="parameterInfo">
      <p>
       Shows what would happen if the cmdlet runs.
The cmdlet is not run.
      </p>
      <table class="nameValue stack">
       <tr>
        <td>
         Type:
        </td>
        <td>
         <span class="xref">
          SwitchParameter
         </span>
        </td>
       </tr>
       <tr>
        <td>
         Aliases:
        </td>
        <td>
         wi
        </td>
       </tr>
       <tr>
        <td>
         Position:
        </td>
        <td>
         Named
        </td>
       </tr>
       <tr>
        <td>
         Default value:
        </td>
        <td>
         False
        </td>
       </tr>
       <tr>
        <td>
         Accept pipeline input:
        </td>
        <td>
         False
        </td>
       </tr>
       <tr>
        <td>
         Accept wildcard characters:
        </td>
        <td>
         False
        </td>
       </tr>
      </table>
     </div>
     <h2 id="inputs">
      Inputs
     </h2>
     <p>
      <strong>
       Microsoft.PowerShell.Commands.PSSessionConfigurationCommands#PSSessionConfiguration, System.String
      </strong>
     </p>
     <p>
      You can pipe a session configuration object or a string that contains the name of a session configuration to this cmdlet.
     </p>
     <h2 id="outputs">
      Outputs
     </h2>
     <p>
      <strong>
       None
      </strong>
     </p>
     <p>
      This cmdlet does not return any objects.
     </p>
     <h2 id="notes">
      Notes
     </h2>
     <ul>
      <li>
       To run this cmdlet on Windows Vista, Windows Server 2008, and later versions of the Windows operating system, you must start Windows PowerShell by using the Run as administrator option.
      </li>
     </ul>
     <p>
      *
     </p>
     <h2 id="related-links">
      Related Links
     </h2>
     <ul>
      <li>
       <a data-linktype="relative-path" href="enable-pssessionconfiguration.html">
        Enable-PSSessionConfiguration
       </a>
      </li>
      <li>
       <a data-linktype="relative-path" href="get-pssessionconfiguration.html">
        Get-PSSessionConfiguration
       </a>
      </li>
      <li>
       <a data-linktype="relative-path" href="new-pssessionconfigurationfile.html">
        New-PSSessionConfigurationFile
       </a>
      </li>
      <li>
       <a data-linktype="relative-path" href="register-pssessionconfiguration.html">
        Register-PSSessionConfiguration
       </a>
      </li>
      <li>
       <a data-linktype="relative-path" href="set-pssessionconfiguration.html">
        Set-PSSessionConfiguration
       </a>
      </li>
      <li>
       <a data-linktype="relative-path" href="test-pssessionconfigurationfile.html">
        Test-PSSessionConfigurationFile
       </a>
      </li>
      <li>
       <a data-linktype="relative-path" href="unregister-pssessionconfiguration.html">
        Unregister-PSSessionConfiguration
       </a>
      </li>
     </ul>
     <!-- </content> -->
    </main>
    <div class="note alert feedback-system-change-alert">
     <p>
      Note
     </p>
     <p>
      The feedback system for this content will be changing soon. Old comments will not be carried over. If content within a comment thread is important to you, please save a copy. For more information on the upcoming change,
      <a href="https://docs.microsoft.com/teamblog/a-new-feedback-system-is-coming-to-docs">
       we invite you to read our blog post
      </a>
      .
     </p>
    </div>
    <div data-bi-name="comments" id="comments-container" role="form">
    </div>
   </div>
  </div>
  <div class="openfeedback-container" id="openFeedbackContainer">
  </div>
  <div class="action-panel">
  </div>
 </body>
</html>