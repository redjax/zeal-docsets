<html><!-- Mirrored from developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/OSFile.jsm/OS.File_for_the_main_thread by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 02 May 2019 03:24:01 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->

  <meta charset="utf-8">

  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  <script async="" src="../../../../../../www.google-analytics.com/analytics.js"></script><script>(function(d) { d.className = d.className.replace(/\bno-js/, ''); })(document.documentElement);</script>
  <title>OS.File for the main thread</title>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="index, follow">

  
<link rel="preload" href="../../../../../static/fonts/locales/ZillaSlab-Regular.subset.bbc33fb47cf6.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="home" href="https://developer.mozilla.org/en-US/">
    <link rel="license" href="#license">
  

  
    
    

    <link href="../../../../../static/build/styles/mdn.8634e046f072.css" rel="stylesheet" type="text/css">

    
  
    <link href="../../../../../static/build/styles/wiki.d451415ae2dd.css" rel="stylesheet" type="text/css">


    

  <link href="../../../../../static/build/styles/locale-en-US.520ecdcaef8c.css" rel="stylesheet" type="text/css">

  
    
  

  
    <script>
    // util for setting performance marks and mesaures
    var mdn=window.mdn||{};mdn.perf={getDuration:function(e){"use strict";if(void 0!==performance.getEntriesByName)return performance.getEntriesByName(e)[0].duration;console.error("performance.getEntriesByName is not supported by your user-agent")},setMark:function(e){"use strict";if(void 0!==performance.mark)try{performance.mark(e)}catch(e){console.error("Error while setting performance mark: ",e)}else console.error("performance.mark is not supported by your user-agent")},setMeasure:function(e){"use strict";void 0!==performance.measure?performance.measure(e.measureName,e.startMark,e.endMark):console.error("performance.measure is not supported by your user-agent")}};
    /* util specifically for postMessages sent from the
       `head` of the interactive examples iframe */
    function handlePerfMarks(e){e.measureName?(window.mdn.perf.setMark(e.markName),window.mdn.perf.setMeasure({measureName:e.measureName,startMark:e.startMark,endMark:e.endMark}),ga&&ga.create&&ga("send",{hitType:"timing",timingCategory:"RUM - Interactive Examples",timingVar:e.measureName,timingValue:window.mdn.perf.getDuration(e.measureName)||0})):window.mdn.perf.setMark(e.markName)}function perfMsgHandler(e){"use strict";var a=window.mdn.interactiveEditor.editorUrl||"https://interactive-examples.mdn.mozilla.net",r=e.data;if(e.origin!==a)return!1;r.markName&&-1<r.markName.indexOf("interactive-editor-")&&handlePerfMarks(r)}window.addEventListener("message",perfMsgHandler,!1);
</script>

    <!-- common social tags -->
    
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://developer.mozilla.org/static/img/opengraph-logo.72382e605ce3.png">
    <meta property="og:site_name" content="MDN Web Docs">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:image" content="https://developer.mozilla.org/static/img/opengraph-logo.72382e605ce3.png">
    <meta name="twitter:site" content="@MozDevNet">
    <meta name="twitter:creator" content="@MozDevNet">
    <link rel="search" type="application/opensearchdescription+xml" href="https://developer.mozilla.org/en-US/search/xml" title="MDN Web Docs">
    
  
  <!-- third-generation iPad with high-resolution Retina display: -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../../../../static/img/favicon144.e7e21ca263ca.png">
  <!-- iPhone with high-resolution Retina display: -->
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../../../../static/img/favicon114.d526f38b09c5.png">
  <!-- first- and second-generation iPad: -->
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../../../../static/img/favicon72.cc65d1d762a0.png">
  <!-- non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
  <link rel="apple-touch-icon-precomposed" href="../../../../../static/img/favicon57.de33179910ae.png">
  <!-- basic favicon -->
  <link rel="shortcut icon" href="../../../../../static/img/favicon32.7f3da72dcea1.png">
  <!--[if IE]>
  <meta http-equiv="imagetoolbar" content="no">
  <script async="" type="text/javascript" src=".html5shiv.ae1ac46eaf58.js" charset="utf-8"></script>
  <![endif]-->

  
  <link rel="dns-prefetch" href="../../../../../../interactive-examples.mdn.mozilla.net/index.html" pr="0.75">
  <link rel="preconnect" href="../../../../../../interactive-examples.mdn.mozilla.net/index.html" pr="0.75">

  <link rel="alternate" type="application/json" href="https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/OSFile.jsm/OS.File_for_the_main_thread$json">
  <link rel="canonical" href="OS.html">

  
  <link rel="alternate" hreflang="en" href="OS.html" title="OS.File for the main thread">
  
    
      <link rel="alternate" hreflang="fr" href="https://developer.mozilla.org/fr/docs/Mozilla/JavaScript_code_modules/OSFile.jsm/OS.File_for_the_main_thread" title="OS.File pour le thread principal">
    
      <link rel="alternate" hreflang="sv" href="https://developer.mozilla.org/sv-SE/docs/Mozilla/JavaScript_code_modules/OSFile.jsm/OS.Fil_för_main_thread" title="OS.File for the main thread">
    
  

  <!-- document-specific social tags -->
  <meta property="og:title" content="OS.File for the main thread">
  <meta property="og:url" content="https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/OSFile.jsm/OS.File_for_the_main_thread">
  <meta name="twitter:url" content="https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/OSFile.jsm/OS.File_for_the_main_thread">
  <meta name="twitter:title" content="OS.File for the main thread">
  
  <meta property="og:description" content="This page details how to use File I/O from the main thread. For other uses of OS.File, please see the corresponding page.">
  <meta name="description" content="This page details how to use File I/O from the main thread. For other uses of OS.File, please see the corresponding page.">
  <meta name="twitter:description" content="This page details how to use File I/O from the main thread. For other uses of OS.File, please see the corresponding page.">
  

</head>
<body data-slug="Mozilla/JavaScript_code_modules/OSFile.jsm/OS.File_for_the_main_thread" contextmenu="edit-history-menu" data-search-url="" class="document">

  <script>
    // make sure global mdn object exists
    var mdn = window.mdn || {};

    (function(win) {
        'use strict';

        (function(){
  var FLAGS = {
    'kumaediting': false,'page_move': false,'section_edit': false,'spam_checks_enabled': true,'spam_submissions_enabled': false,'spam_admin_override': false,'spam_spammer_override': false,'spam_testing_mode': false,'sg_task_completion': false,'contrib_beta': false,'recurring_payment_beta': false
    },
    SWITCHES = {
    'welcome_email': true,'application_ACAO': true,'store_revision_ips': true,'foundation_callout': false,'helpful-survey-2': true,'wiki_spam_training': true,'registration_disabled': false
    },
    SAMPLES = {
    
    };
  window.waffle = {
    "flag_is_active": function waffle_flag(flag_name) {
      
      return !!FLAGS[flag_name];
    },
    "switch_is_active": function waffle_switch(switch_name) {
      
      return !!SWITCHES[switch_name];
    },
    "sample_is_active": function waffle_sample(sample_name) {
      
      return !!SAMPLES[sample_name];
    },
    "FLAGS": FLAGS,
    "SWITCHES": SWITCHES,
    "SAMPLES": SAMPLES
  };
})();

        // This needs to be set before ckeditor.js loads
        window.CKEDITOR_BASEPATH = 'https://developer.mozilla.org/static/js/libs/ckeditor4/build/ckeditor/';

        // Site configuration
        win.mdn.ckeditor = {};
        win.mdn.features = {};
        win.mdn.siteUrl = 'https://developer.mozilla.org/';
        win.mdn.wikiSiteUrl = 'https://wiki.developer.mozilla.org/';
        win.mdn.staticPath = 'https://developer.mozilla.org/static/';
        win.mdn.wiki = {
            autosuggestTitleUrl: '/en-US/docs/get-documents'
        };
        win.mdn.assets_disabled = {
            css: {
                'editor-content': ['https://developer.mozilla.org/static/build/styles/editor-content.c9f73a799d9a.css','../../../../../static/build/styles/editor-locale-en-US.520ecdcaef8c.css',
                ],

                'wiki-compat-tables': ['https://developer.mozilla.org/static/build/styles/wiki-compat-tables.eef64bf9b6fe.css',]
            },
            js: {
                'syntax-prism': ['https://developer.mozilla.org/static/build/js/syntax-prism.f016806edde4.js',],
                'wiki-compat-tables': ['https://developer.mozilla.org/static/build/js/syntax-prism.js" charset="utf-8"></script><script type="text/javascript" src=".html5shiv.ae1ac46eaf58.js" charset="utf-8"></script>
  <!--[endif]---->

  
  <link rel="dns-prefetch" href="../../../../../../interactive-examples.mdn.mozilla.net/index.html" pr="0.75">
  <link rel="preconnect" href="../../../../../../interactive-examples.mdn.mozilla.net/index.html" pr="0.75">

  <link rel="alternate" type="application/json" href="https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/OSFile.jsm/OS.File_for_the_main_thread$json">
  <link rel="canonical" href="OS.html">

  
  <link rel="alternate" hreflang="en" href="OS.html" title="OS.File for the main thread">
  
    
      <link rel="alternate" hreflang="fr" href="https://developer.mozilla.org/fr/docs/Mozilla/JavaScript_code_modules/OSFile.jsm/OS.File_for_the_main_thread" title="OS.File pour le thread principal">
    
      <link rel="alternate" hreflang="sv" href="https://developer.mozilla.org/sv-SE/docs/Mozilla/JavaScript_code_modules/OSFile.jsm/OS.Fil_för_main_thread" title="OS.File for the main thread">
    
  

  <!-- document-specific social tags -->
  <meta property="og:title" content="OS.File for the main thread">
  <meta property="og:url" content="https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/OSFile.jsm/OS.File_for_the_main_thread">
  <meta name="twitter:url" content="https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/OSFile.jsm/OS.File_for_the_main_thread">
  <meta name="twitter:title" content="OS.File for the main thread">
  
  <meta property="og:description" content="This page details how to use File I/O from the main thread. For other uses of OS.File, please see the corresponding page.">
  <meta name="description" content="This page details how to use File I/O from the main thread. For other uses of OS.File, please see the corresponding page.">
  <meta name="twitter:description" content="This page details how to use File I/O from the main thread. For other uses of OS.File, please see the corresponding page.">
  




  <script>
    // make sure global mdn object exists
    var mdn = window.mdn || {};

    (function(win) {
        'use strict';

        (function(){
  var FLAGS = {
    'kumaediting': false,'page_move': false,'section_edit': false,'spam_checks_enabled': true,'spam_submissions_enabled': false,'spam_admin_override': false,'spam_spammer_override': false,'spam_testing_mode': false,'sg_task_completion': false,'contrib_beta': false,'recurring_payment_beta': false
    },
    SWITCHES = {
    'welcome_email': true,'application_ACAO': true,'store_revision_ips': true,'foundation_callout': false,'helpful-survey-2': true,'wiki_spam_training': true,'registration_disabled': false
    },
    SAMPLES = {
    
    };
  window.waffle = {
    "flag_is_active": function waffle_flag(flag_name) {
      
      return !!FLAGS[flag_name];
    },
    "switch_is_active": function waffle_switch(switch_name) {
      
      return !!SWITCHES[switch_name];
    },
    "sample_is_active": function waffle_sample(sample_name) {
      
      return !!SAMPLES[sample_name];
    },
    "FLAGS": FLAGS,
    "SWITCHES": SWITCHES,
    "SAMPLES": SAMPLES
  };
})();

        // This needs to be set before ckeditor.js loads
        window.CKEDITOR_BASEPATH = 'https://developer.mozilla.org/static/js/libs/ckeditor4/build/ckeditor/';

        // Site configuration
        win.mdn.ckeditor = {};
        win.mdn.features = {};
        win.mdn.siteUrl = 'https://developer.mozilla.org/';
        win.mdn.wikiSiteUrl = 'https://wiki.developer.mozilla.org/';
        win.mdn.staticPath = 'https://developer.mozilla.org/static/';
        win.mdn.wiki = {
            autosuggestTitleUrl: '/en-US/docs/get-documents'
        };
        win.mdn.assets_disabled = {
            css: {
                'editor-content': ['https://developer.mozilla.org/static/build/styles/editor-content.c9f73a799d9a.css','../../../../../static/build/styles/editor-locale-en-US.520ecdcaef8c.css',
                ],

                'wiki-compat-tables': ['https://developer.mozilla.org/static/build/styles/wiki-compat-tables.eef64bf9b6fe.css',]
            },
            js: {
                'syntax-prism': ['https://developer.mozilla.org/static/build/js/syntax-prism.f016806edde4.js',],
                'wiki-compat-tables': ['https://developer.mozilla.org/static/build/js/wiki-compat-tables.3a4ab2cc8ca1.js',]
            }
        };

        win.mdn.notifications = [];
        win.mdn.contributions = {
            enabled: true,
            popup: false
        };

        

        // interactive editor config
        win.mdn.interactiveEditor = {
            siteUrl: "https://developer.mozilla.org",
            editorUrl: "https://interactive-examples.mdn.mozilla.net"
        };
        win.mdn.langCookieName = "django_language";

    })(this);
</script>
    
    <ul id="nav-access">
  <li><a href="#content" id="skip-main">Skip to main content</a></li>
  <li><a id="skip-language" href="#language">Select language</a></li>
  <li><a href="#q" id="skip-search">Skip to search</a></li>
</ul>

    <!-- Header -->
    <header id="main-header" class="header-main">
      <a href="https://developer.mozilla.org/en-US/" class="logo">MDN Web Docs</a>
      <div class="nav-toolbox-wrapper">
        <nav id="main-nav" class="nav-main" role="navigation">
    <ul>
        <li class="nav-main-item">
            <a href="https://developer.mozilla.org/en-US/docs/Web">Technologies
                <svg class="icon icon-caret-down" xmlns="http://www.w3.org/2000/svg" width="16" height="28" viewBox="0 0 16 28"><path d="M16 11a.99.99 0 0 1-.297.703l-7 7C8.516 18.89 8.265 19 8 19s-.516-.109-.703-.297l-7-7A.996.996 0 0 1 0 11c0-.547.453-1 1-1h14c.547 0 1 .453 1 1z"></path></svg>
            </a>
            <div class="submenu js-submenu" id="nav-tech-submenu">
                <div class="submenu-column">
                  <ul>
                    <li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML">HTML</a></li>
                    <li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS">CSS</a></li>
                    <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript">JavaScript</a></li>
                    <li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide/Graphics">Graphics</a></li>
                    <li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP">HTTP</a></li>
                    <li><a href="../../../Web/API.html">APIs / DOM</a></li>
                    <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions">Browser Extensions</a></li>
                    <li><a href="https://developer.mozilla.org/en-US/docs/Web/MathML">MathML</a></li>
                  </ul>
                </div>
            </div>
        </li>
        <li class="nav-main-item">
            <a href="https://developer.mozilla.org/en-US/docs/Learn">References &amp; Guides
                <svg class="icon icon-caret-down" xmlns="http://www.w3.org/2000/svg" width="16" height="28" viewBox="0 0 16 28"><path d="M16 11a.99.99 0 0 1-.297.703l-7 7C8.516 18.89 8.265 19 8 19s-.516-.109-.703-.297l-7-7A.996.996 0 0 1 0 11c0-.547.453-1 1-1h14c.547 0 1 .453 1 1z"></path></svg>
            </a>
            <div class="submenu js-submenu" id="nav-learn-submenu">
                <div class="submenu-column">
                  <ul>
                    <li><a href="https://developer.mozilla.org/en-US/docs/Learn">Learn web development</a></li>
                    <li><a href="https://developer.mozilla.org/en-US/docs/Web/Tutorials">Tutorials</a></li>
                    <li><a href="https://developer.mozilla.org/en-US/docs/Web/Reference">References</a></li>
                    <li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide">Developer Guides</a></li>
                    <li><a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility">Accessibility</a></li>
                    <li><a href="https://developer.mozilla.org/en-US/docs/Games">Game development</a></li>
                    <li><a href="https://developer.mozilla.org/en-US/docs/Web">...more docs</a></li>
                  </ul>
                </div>
            </div>
        </li>
        <li class="nav-main-item">
            <a href="https://developer.mozilla.org/en-US/docs/MDN/Feedback">Feedback
                <svg class="icon icon-caret-down" xmlns="http://www.w3.org/2000/svg" width="16" height="28" viewBox="0 0 16 28"><path d="M16 11a.99.99 0 0 1-.297.703l-7 7C8.516 18.89 8.265 19 8 19s-.516-.109-.703-.297l-7-7A.996.996 0 0 1 0 11c0-.547.453-1 1-1h14c.547 0 1 .453 1 1z"></path></svg>
            </a>
            <div class="submenu js-submenu" id="nav-contact-submenu">
              <div class="submenu-column">
                <ul>
                  <li>
                      <a href="https://support.mozilla.org/">Get Firefox help
                          <svg class="icon icon-external-link" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28" aria-hidden="true"><path d="M22 14.5v5c0 2.484-2.016 4.5-4.5 4.5h-13A4.502 4.502 0 0 1 0 19.5v-13C0 4.016 2.016 2 4.5 2h11c.281 0 .5.219.5.5v1c0 .281-.219.5-.5.5h-11A2.507 2.507 0 0 0 2 6.5v13C2 20.875 3.125 22 4.5 22h13c1.375 0 2.5-1.125 2.5-2.5v-5c0-.281.219-.5.5-.5h1c.281 0 .5.219.5.5zM28 1v8c0 .547-.453 1-1 1a.99.99 0 0 1-.703-.297l-2.75-2.75L13.36 17.14c-.094.094-.234.156-.359.156s-.266-.063-.359-.156l-1.781-1.781c-.094-.094-.156-.234-.156-.359s.063-.266.156-.359L21.048 4.454l-2.75-2.75a.996.996 0 0 1-.297-.703c0-.547.453-1 1-1h8c.547 0 1 .453 1 1z"></path></svg>
                      </a>
                  </li>
                  <li>
                      <a href="https://stackoverflow.com/">Get web development help
                          <svg class="icon icon-external-link" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28" aria-hidden="true"><path d="M22 14.5v5c0 2.484-2.016 4.5-4.5 4.5h-13A4.502 4.502 0 0 1 0 19.5v-13C0 4.016 2.016 2 4.5 2h11c.281 0 .5.219.5.5v1c0 .281-.219.5-.5.5h-11A2.507 2.507 0 0 0 2 6.5v13C2 20.875 3.125 22 4.5 22h13c1.375 0 2.5-1.125 2.5-2.5v-5c0-.281.219-.5.5-.5h1c.281 0 .5.219.5.5zM28 1v8c0 .547-.453 1-1 1a.99.99 0 0 1-.703-.297l-2.75-2.75L13.36 17.14c-.094.094-.234.156-.359.156s-.266-.063-.359-.156l-1.781-1.781c-.094-.094-.156-.234-.156-.359s.063-.266.156-.359L21.048 4.454l-2.75-2.75a.996.996 0 0 1-.297-.703c0-.547.453-1 1-1h8c.547 0 1 .453 1 1z"></path></svg>
                      </a>
                  </li>
                </ul>
                <ul>
                  <li>
                      <a href="https://developer.mozilla.org/en-US/docs/MDN/Community">Join the MDN community</a>
                  </li>
                  <li>
                      <a target="_blank" rel="noopener" href="https://github.com/mdn/sprints/issues/new?template=issue-template.md&amp;projects=mdn/sprints/2&amp;labels=user-report&amp;title=https%3A//developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/OSFile.jsm/OS.File_for_the_main_thread">Report a content problem
                          <svg class="icon icon-external-link" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28" aria-hidden="true"><path d="M22 14.5v5c0 2.484-2.016 4.5-4.5 4.5h-13A4.502 4.502 0 0 1 0 19.5v-13C0 4.016 2.016 2 4.5 2h11c.281 0 .5.219.5.5v1c0 .281-.219.5-.5.5h-11A2.507 2.507 0 0 0 2 6.5v13C2 20.875 3.125 22 4.5 22h13c1.375 0 2.5-1.125 2.5-2.5v-5c0-.281.219-.5.5-.5h1c.281 0 .5.219.5.5zM28 1v8c0 .547-.453 1-1 1a.99.99 0 0 1-.703-.297l-2.75-2.75L13.36 17.14c-.094.094-.234.156-.359.156s-.266-.063-.359-.156l-1.781-1.781c-.094-.094-.156-.234-.156-.359s.063-.266.156-.359L21.048 4.454l-2.75-2.75a.996.996 0 0 1-.297-.703c0-.547.453-1 1-1h8c.547 0 1 .453 1 1z"></path></svg>
                      </a>
                  </li>
                  <li>
                      <a target="_blank" rel="noopener" href="https://bugzilla.mozilla.org/form.mdn">Report a bug
                          <svg class="icon icon-external-link" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28" aria-hidden="true"><path d="M22 14.5v5c0 2.484-2.016 4.5-4.5 4.5h-13A4.502 4.502 0 0 1 0 19.5v-13C0 4.016 2.016 2 4.5 2h11c.281 0 .5.219.5.5v1c0 .281-.219.5-.5.5h-11A2.507 2.507 0 0 0 2 6.5v13C2 20.875 3.125 22 4.5 22h13c1.375 0 2.5-1.125 2.5-2.5v-5c0-.281.219-.5.5-.5h1c.281 0 .5.219.5.5zM28 1v8c0 .547-.453 1-1 1a.99.99 0 0 1-.703-.297l-2.75-2.75L13.36 17.14c-.094.094-.234.156-.359.156s-.266-.063-.359-.156l-1.781-1.781c-.094-.094-.156-.234-.156-.359s.063-.266.156-.359L21.048 4.454l-2.75-2.75a.996.996 0 0 1-.297-.703c0-.547.453-1 1-1h8c.547 0 1 .453 1 1z"></path></svg>
                      </a>
                  </li>
                </ul>
              </div>
          </div>
      </li>
  </ul>
</nav>
        <div id="toolbox" class="toolbox">
  <ul>
    
    <li class="nav-login"><div class="login">
    
        
        <a href="https://developer.mozilla.org/users/github/login/?next=%2Fen-US%2Fdocs%2FMozilla%2FJavaScript_code_modules%2FOSFile.jsm%2FOS.File_for_the_main_thread" class="login-link js-login-link" data-service="GitHub" rel="nofollow">
            Sign in<svg class="icon icon-github" xmlns="http://www.w3.org/2000/svg" width="24" height="28" viewBox="0 0 24 28" aria-label="GitHub" role="img" focusable="false">
    <title>Github</title>
    <path d="M12 2c6.625 0 12 5.375 12 12 0 5.297-3.437 9.797-8.203 11.391-.609.109-.828-.266-.828-.578 0-.391.016-1.687.016-3.297 0-1.125-.375-1.844-.812-2.219 2.672-.297 5.484-1.313 5.484-5.922 0-1.313-.469-2.375-1.234-3.219.125-.313.531-1.531-.125-3.187-1-.313-3.297 1.234-3.297 1.234a11.28 11.28 0 0 0-6 0S6.704 6.656 5.704 6.969c-.656 1.656-.25 2.875-.125 3.187-.766.844-1.234 1.906-1.234 3.219 0 4.594 2.797 5.625 5.469 5.922-.344.313-.656.844-.766 1.609-.688.313-2.438.844-3.484-1-.656-1.141-1.844-1.234-1.844-1.234-1.172-.016-.078.734-.078.734.781.359 1.328 1.75 1.328 1.75.703 2.141 4.047 1.422 4.047 1.422 0 1 .016 1.937.016 2.234 0 .313-.219.688-.828.578C3.439 23.796.002 19.296.002 13.999c0-6.625 5.375-12 12-12zM4.547 19.234c.031-.063-.016-.141-.109-.187-.094-.031-.172-.016-.203.031-.031.063.016.141.109.187.078.047.172.031.203-.031zm.484.532c.063-.047.047-.156-.031-.25-.078-.078-.187-.109-.25-.047-.063.047-.047.156.031.25.078.078.187.109.25.047zm.469.703c.078-.063.078-.187 0-.297-.063-.109-.187-.156-.266-.094-.078.047-.078.172 0 .281s.203.156.266.109zm.656.656c.063-.063.031-.203-.063-.297-.109-.109-.25-.125-.313-.047-.078.063-.047.203.063.297.109.109.25.125.313.047zm.891.391c.031-.094-.063-.203-.203-.25-.125-.031-.266.016-.297.109s.063.203.203.234c.125.047.266 0 .297-.094zm.984.078c0-.109-.125-.187-.266-.172-.141 0-.25.078-.25.172 0 .109.109.187.266.172.141 0 .25-.078.25-.172zm.906-.156c-.016-.094-.141-.156-.281-.141-.141.031-.234.125-.219.234.016.094.141.156.281.125s.234-.125.219-.219z"></path>
</svg>
        </a>
    
</div></li>
  </ul>
</div>
      </div>
      <form id="nav-main-search" action="https://developer.mozilla.org/en-US/search" method="get" role="search" class="nav-main-search">
  <div class="search-wrap">
    <label for="main-q" class="offscreen">Search</label>
    <input type="search" id="main-q" name="q" placeholder="Search" data-value="" value="" aria-hidden="true">
    <span class="search-trigger">
        <svg class="icon icon-search" xmlns="http://www.w3.org/2000/svg" width="26" height="28" viewBox="0 0 26 28" aria-hidden="true">
    <path d="M18 13c0-3.859-3.141-7-7-7s-7 3.141-7 7 3.141 7 7 7 7-3.141 7-7zm8 13c0 1.094-.906 2-2 2a1.96 1.96 0 0 1-1.406-.594l-5.359-5.344a10.971 10.971 0 0 1-6.234 1.937c-6.078 0-11-4.922-11-11s4.922-11 11-11 11 4.922 11 11c0 2.219-.672 4.406-1.937 6.234l5.359 5.359c.359.359.578.875.578 1.406z"></path>
</svg>
    </span>
    <button type="submit" class="offscreen">Search</button>
    <button type="button" id="close-header-search" class="close-header-search transparent">
        <span class="offscreen">Close search</span>
        <svg class="icon icon-close" xmlns="http://www.w3.org/2000/svg" width="22" height="28" viewBox="0 0 22 28" aria-hidden="true" role="img"><title></title><path d="M20.281 20.656c0 .391-.156.781-.438 1.062l-2.125 2.125c-.281.281-.672.438-1.062.438s-.781-.156-1.062-.438L11 19.249l-4.594 4.594c-.281.281-.672.438-1.062.438s-.781-.156-1.062-.438l-2.125-2.125c-.281-.281-.438-.672-.438-1.062s.156-.781.438-1.062L6.751 15l-4.594-4.594c-.281-.281-.438-.672-.438-1.062s.156-.781.438-1.062l2.125-2.125c.281-.281.672-.438 1.062-.438s.781.156 1.062.438L11 10.751l4.594-4.594c.281-.281.672-.438 1.062-.438s.781.156 1.062.438l2.125 2.125c.281.281.438.672.438 1.062s-.156.781-.438 1.062L15.249 15l4.594 4.594c.281.281.438.672.438 1.062z"></path></svg>
    </button>
  </div>
</form>
    </header>  

  <!-- Content will go here -->
  <main id="content">
      
  <!-- heading -->
  <div id="wiki-document-head" class="document-head">
    <div class="center">
      <div class="document-title">
        <h1>OS.File for the main thread</h1>
      </div>

      <!-- action buttons -->
      <div class="document-actions">
        

  
    
  

  
    
    
        
    
  

  

  <ul class="page-buttons">
      <li>
          <button id="languages-menu" class="transparent" aria-haspopup="true" aria-owns="languages-menu-submenu" aria-expanded="false">
              <svg class="icon icon-language" xmlns="http://www.w3.org/2000/svg" width="24" height="28" viewBox="0 0 24 28" aria-hidden="true">
    <path d="M10.219 16.844c-.031.109-.797-.25-1-.328-.203-.094-1.125-.609-1.359-.766s-1.125-.891-1.234-.938a28.275 28.275 0 0 1-2.094 2.828c-.281.328-1.125 1.391-1.641 1.719-.078.047-.531.094-.594.063.25-.187.969-1.078 1.281-1.437.391-.453 2.25-3.047 2.562-3.641.328-.594 1.312-2.562 1.359-2.75-.156-.016-1.391.406-1.719.516-.313.094-1.172.297-1.234.344-.063.063-.016.25-.047.313s-.313.203-.484.234a1.647 1.647 0 0 1-.734 0c-.203-.047-.391-.25-.438-.328 0 0-.063-.094-.078-.359.187-.063.5-.078.844-.172s1.188-.344 1.641-.5 1.328-.484 1.594-.547c.281-.047.984-.516 1.359-.641s.641-.281.656-.203 0 .422-.016.516c-.016.078-.766 1.547-.875 1.781-.063.125-.5.953-1.203 2.047.25.109.781.328 1 .438.266.125 2.125.906 2.219.938s.266.75.234.875zM7.016 9.25c.047.266-.031.375-.063.438-.156.297-.547.5-.781.594s-.625.187-.938.187c-.141-.016-.422-.063-.766-.406-.187-.203-.328-.75-.266-.688s.516.125.719.078.688-.187.906-.25c.234-.078.703-.203.859-.219.156 0 .281.063.328.266zm10.906 2.016l.984 3.547-2.172-.656zM.609 23.766l10.844-3.625V4.016L.609 7.657v16.109zM20 18.813l1.594.484-2.828-10.266-1.563-.484-3.375 8.375 1.594.484.703-1.719 3.297 1.016zM12.141 3.781l8.953 2.875V.718zM17 24.453l2.469.203-.844 2.5L18 26.125c-1.266.812-2.828 1.437-4.312 1.687-.453.094-.969.187-1.422.187h-1.313c-1.656 0-4.672-.984-5.984-1.937-.094-.078-.125-.141-.125-.25 0-.172.125-.297.281-.297.141 0 .875.453 1.078.547 1.406.703 3.375 1.344 4.953 1.344 1.953 0 3.281-.25 5.063-1.016.516-.234.969-.531 1.453-.797zm7-16.859v16.859c-12.078-3.844-12.094-3.844-12.094-3.844C11.656 20.718.453 24.5.297 24.5a.3.3 0 0 1-.281-.203c0-.016-.016-.031-.016-.047V7.406c.016-.047.031-.125.063-.156.094-.109.219-.141.313-.172.047-.016 1-.328 2.328-.781v-6l8.719 3.094C11.532 3.36 21.251 0 21.392 0c.172 0 .313.125.313.328v6.531z"></path>
</svg>
              <span>Languages</span>
          </button>

        <div class="submenu js-submenu" id="languages-menu-submenu">
          <div class="submenu-column">
            <ul id="translations">
              
                
                
                
                  <li lang="fr"><bdi><a rel="internal" href="https://developer.mozilla.org/fr/docs/Mozilla/JavaScript_code_modules/OSFile.jsm/OS.File_for_the_main_thread" data-locale="fr" title="French">Français (fr)</a></bdi></li>
                
                  <li lang="sv-SE"><bdi><a rel="internal" href="https://developer.mozilla.org/sv-SE/docs/Mozilla/JavaScript_code_modules/OSFile.jsm/OS.Fil_för_main_thread" data-locale="sv-SE" title="Swedish">Svenska (sv-SE)</a></bdi></li>
                
              

              
                <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/OSFile.jsm/OS.File_for_the_main_thread$locales" rel="nofollow" id="translations-add">Add a translation</a></li>
              
            </ul>
          </div>
        </div>
      </li>
      
      <li class="page-buttons-edit">
          <a href="https://developer.mozilla.org/en-US/users/signin?next=/en-US/docs/Mozilla/JavaScript_code_modules/OSFile.jsm/OS.File_for_the_main_thread%24edit" class="button neutral" id="edit-button" rel="nofollow">
              <svg class="icon icon-pencil" xmlns="http://www.w3.org/2000/svg" width="24" height="28" viewBox="0 0 24 28" aria-hidden="true">
    <path d="M5.672 24l1.422-1.422-3.672-3.672L2 20.328V22h2v2h1.672zm8.172-14.5a.329.329 0 0 0-.344-.344.368.368 0 0 0-.266.109l-8.469 8.469a.366.366 0 0 0-.109.266c0 .203.141.344.344.344a.368.368 0 0 0 .266-.109l8.469-8.469a.366.366 0 0 0 .109-.266zM13 6.5l6.5 6.5-13 13H0v-6.5zM23.672 8c0 .531-.219 1.047-.578 1.406L20.5 12 14 5.5l2.594-2.578c.359-.375.875-.594 1.406-.594s1.047.219 1.422.594l3.672 3.656c.359.375.578.891.578 1.422z"></path>
</svg>
              Edit
          </a>
      </li>
      

        

        <li class="page-buttons-advanced">
            <button id="advanced-menu" class="only-icon" aria-haspopup="true" aria-owns="advanced-menu-submenu" aria-expanded="false">
                <svg class="icon icon-gear" xmlns="http://www.w3.org/2000/svg" width="24" height="28" viewBox="0 0 24 28" aria-hidden="true">
    <path d="M16 14c0-2.203-1.797-4-4-4s-4 1.797-4 4 1.797 4 4 4 4-1.797 4-4zm8-1.703v3.469c0 .234-.187.516-.438.562l-2.891.438a8.86 8.86 0 0 1-.609 1.422c.531.766 1.094 1.453 1.672 2.156.094.109.156.25.156.391s-.047.25-.141.359c-.375.5-2.484 2.797-3.016 2.797a.795.795 0 0 1-.406-.141l-2.156-1.687a9.449 9.449 0 0 1-1.422.594c-.109.953-.203 1.969-.453 2.906a.573.573 0 0 1-.562.438h-3.469c-.281 0-.531-.203-.562-.469l-.438-2.875a9.194 9.194 0 0 1-1.406-.578l-2.203 1.672c-.109.094-.25.141-.391.141s-.281-.063-.391-.172c-.828-.75-1.922-1.719-2.578-2.625a.607.607 0 0 1 .016-.718c.531-.719 1.109-1.406 1.641-2.141a8.324 8.324 0 0 1-.641-1.547l-2.859-.422A.57.57 0 0 1 0 15.705v-3.469c0-.234.187-.516.422-.562l2.906-.438c.156-.5.359-.969.609-1.437a37.64 37.64 0 0 0-1.672-2.156c-.094-.109-.156-.234-.156-.375s.063-.25.141-.359c.375-.516 2.484-2.797 3.016-2.797.141 0 .281.063.406.156L7.828 5.94a9.449 9.449 0 0 1 1.422-.594c.109-.953.203-1.969.453-2.906a.573.573 0 0 1 .562-.438h3.469c.281 0 .531.203.562.469l.438 2.875c.484.156.953.344 1.406.578l2.219-1.672c.094-.094.234-.141.375-.141s.281.063.391.156c.828.766 1.922 1.734 2.578 2.656a.534.534 0 0 1 .109.344c0 .141-.047.25-.125.359-.531.719-1.109 1.406-1.641 2.141.266.5.484 1.016.641 1.531l2.859.438a.57.57 0 0 1 .453.562z"></path>
</svg>
                <span>Advanced</span>
            </button>
            <div class="submenu js-submenu" id="advanced-menu-submenu">
                <!-- this page -->
                <div class="submenu-column">
                    <div class="title">Advanced</div>
                    <ul>
                        <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/OSFile.jsm/OS.File_for_the_main_thread$history" rel="nofollow">History</a></li>
                        
                        
                        


                

                <li class="page-print"><a href="#" onclick="return window.print();">Print this article</a></li>
            </ul>
          </div>
        </div>
  </li></ul>
      </div>
    <nav class="crumbs" role="navigation">
      <ol typeof="BreadcrumbList" vocab="https://schema.org/" aria-label="breadcrumbs">
        
          <li property="itemListElement" typeof="ListItem" class="crumb">
            <a href="https://developer.mozilla.org/en-US/docs/Mozilla" property="item" typeof="WebPage">
              <span property="name">Mozilla</span>
            </a>
            <meta property="position" content="1">
          </li>
        
          <li property="itemListElement" typeof="ListItem" class="crumb">
            <a href="https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules" property="item" typeof="WebPage">
              <span property="name">JavaScript code modules</span>
            </a>
            <meta property="position" content="2">
          </li>
        
          <li property="itemListElement" typeof="ListItem" class="crumb">
            <a href="../OSFile.html" property="item" typeof="WebPage">
              <span property="name">OSFile.jsm</span>
            </a>
            <meta property="position" content="3">
          </li>
        
        <li property="itemListElement" typeof="ListItem" class="crumb">
          <span property="name" aria-current="page">OS.File for the main thread</span>
        </li>
      </ol>
    </nav></div>
  </div>
  
  <div id="toc" class="toc">
    <div class="center">
      <div class="toc-head">Jump to:</div>
        <ol class="toc-links">
          <li><a rel="internal" href="#Global_object_OS.File">Global object OS.File</a></li><li><a rel="internal" href="#Instances_of_OS.File">Instances of OS.File</a></li><li><a rel="internal" href="#Subnav">Subnav</a>
        </li></ol>
    </div>
  </div>
  

      <div class="center clear">
      

    <div class="wiki-main-content" id="document-main"><div class="center">
      <!-- start the main content container -->
        <div id="wiki-column-container" class="wiki-left-present">

          <!-- content row with three strips -->
          <div class="column-container column-container-reverse">

            <!-- center: main article content -->
            <div id="wiki-content" class="column-main wiki-column text-content">

              

              
              

              

              
              

              <!-- just the article content -->
              <article id="wikiArticle">
                
                  
                    <p>This page details how to use File I/O from the main thread. For other uses of OS.File, please see <a href="https://developer.mozilla.org/en-US/docs/JavaScript_OS.File" title="/en-US/docs/JavaScript_OS.File">the corresponding page</a>.</p>

<h3 id="Using_OS.File_from_a_JSM">Using OS.File from a JSM</h3>

<p>To import OS.File into your chrome code, add the following line at the start of your script:</p>

<pre class="brush: js;">Components.utils.import("resource://gre/modules/osfile.jsm")</pre>

<h3 id="Promises">Promises</h3>

<p>Before using OS.File from the main thread, you need some understanding of the <a href="../../../Archive/Add-ons/Add-on_SDK/Low-Level_APIs/core_promise.html" title="https://addons.mozilla.org/en-US/developers/docs/sdk/1.9/packages/api-utils/promise.html">Promise library</a>.</p>

<p>See the <a href="../Promise.jsm/Promise.html" title="/en-US/docs/Mozilla/JavaScript_code_modules/Promise.jsm/Promise"><code>Promise</code> object documentation</a> for details.</p>

<p>Also, OS.File plays very nicely with <a href="../Task.html">Task.jsm</a>.</p>

<h3 id="Example_Read_the_contents_of_a_file_as_text">Example: Read the contents of a file as text</h3>

<p>The following snippet opens a file "file.txt" and read its contents as a string, using the default encoding (utf-8).</p>

<p>The content is read asynchronously. The result is a <a href="../Promise.jsm/Promise.html">Promise</a>.</p>

<pre class="brush: js;">let decoder = new TextDecoder();        // This decoder can be reused for several reads
let promise = OS.File.read("file.txt"); // Read the complete file as an array
promise = promise.then(
  function onSuccess(array) {
    return decoder.decode(array);        // Convert this array to a text
  }
);
</pre>

<div class="blockIndicator note">
<p>This example requires Firefox 18 or a more recent version.</p>
</div>

<h3 id="Example_Write_a_string_to_a_file">Example: Write a string to a file</h3>

<p>The following snippet writes the text "This is some text" to a string "file.txt", using the default encoding (utf-8). It uses an atomic write to ensure that the file is not modified if, for some reason, the write cannot complete (typically because the computer is turned off, the battery runs out, or the application is stopped.)</p>

<pre class="brush: js;">let encoder = new TextEncoder();                                   // This encoder can be reused for several writes
let array = encoder.encode("This is some text");                   // Convert the text to an array
let promise = OS.File.writeAtomic("file.txt", array,               // Write the array atomically to "file.txt", using as temporary
    {tmpPath: "file.txt.tmp"});                                    // buffer "file.txt.tmp".

</pre>

<p>The following variant does the same thing but will fail if "file.txt" already exists:</p>

<pre class="brush: js;">let encoder = new TextEncoder();                                   // This encoder can be reused for several writes
let array = encoder.encode("This is some text");                   // Convert the text to an array
let promise = OS.File.writeAtomic("file.txt", array,               // Write the array atomically to "file.txt", using as temporary
    {tmpPath: "file.txt.tmp", noOverwrite: true});                 // buffer "file.txt.tmp".

</pre>

<div class="blockIndicator note">
<p>These examples require Firefox 19 or a more recent version.</p>
</div>

<h3 id="Example_Rename_a_file">Example: Rename a file</h3>

<p>You have to use <code>OS.File.move</code> to rename a file:</p>

<pre class="brush: js;">let promise = OS.File.move("oldname.txt", "newname.txt", {noOverwrite:true});</pre>

<p>Here's a working example which renames <code>test.txt</code> to <code>testRenamed.txt</code> if the file is located in directory <code>C:\Jean\</code></p>

<pre class="brush: js;">var promise = OS.File.move(OS.Path.join('C:', 'Jean', 'test.txt'), OS.Path.join('C:', 'Jean', 'testRenamed.txt'));
promise.then(
    function() {
       console.log('rename successful')
    },
    function(aRejectReason) {
       console.log('rename failed, aRejectReason = ', aRejectReason)
    }
)</pre>

<p>The noOverwrite true is important, as default is false which means if a file in the directory exists already with the same name it will no longer be there after this "rename" operation, which is a "move".</p>

<h3 id="Example_Copy_a_file">Example: Copy a file</h3>

<p>The following snippet copies file "oldname.txt" to "newname.txt". On most operating systems, this operation is handled directly by the operating system itself, which makes it as fast as possible.</p>

<pre class="brush: js;">let promise = OS.File.copy("oldname.txt", "newname.txt");</pre>

<div class="blockIndicator note">
<p>This example requires Firefox 16 or a more recent version.</p>
</div>

<h3 id="Example_Path_manipulation">Example: Path manipulation</h3>

<p>The following snippet obtains the path to file "sessionstore.js", contained in the user's profile directory.</p>

<pre class="brush: js;">let sessionstore = OS.Path.join(OS.Constants.Path.profileDir, "sessionstore.js");
   // Under Linux, this is generally "$HOME/.firefox/Profiles/$PROFILENAME/sessionstore.js"
   // Under MacOS, this is generally "$HOME/Library/Application Support/Firefox/$PROFILENAME/sessionstore.js"
   // Under Windows, this is generally "%APPDATA%\Local\temp\%PROFILENAME%"\sessionstore.js
   // etc.

</pre>

<h3 id="Example_Determine_if_a_file_is_a_directory">Example: Determine if a file is a directory</h3>

<p>The following snippet determines if some path represents a file or a directory:</p>

<pre class="brush: js;">let promise = OS.File.stat(somePath);
promise = promise.then(
  function onSuccess(stat) {
    if (stat.isDir) {
      // The path represents a directory
    } else {
      // The path represents a file, not a directory
    }
  },
  function onFailure(reason) {
    if (reason instanceof OS.File.Error &amp;&amp; reason.becauseNoSuchFile) {
      // The file does not exist
    } else {
      // Some other error
      throw reason;
    }
  }
);
</pre>

<h3 id="Example_copy_a_file_by_chunks">Example: copy a file by chunks</h3>

<p>The following snippet writes a (presumably large) buffer by chunks. Note that this snippet is useful as a demonstration of complex asynchronous programming with OS.File – in most cases, function <code>OS.File.writeAtomic</code> is a better choice.</p>

<pre class="brush: js;">let writeStream = function writeStream(data, outFile, chunkSize) {
  let view = new Uint8Array(data);

  let loop = function loop(pos) {                                         // Define a recursive asynchronous loop.
    if (pos &lt;= view.byteLength) {  // Note: Should this be pos &gt;= view.byteLength ?
      return Promise.resolve(true);                                       // Loop end.
    }
    let promise = file.write(view.subarray(pos, chunkSize));              // Write a subset of |data|
    return promise.then(function onSuccess(bytes) {
      return loop(pos + bytes);                                           // ... and loop.
    });
  };

  let promise = loop(0);                                                  // Enter the loop.

  promise = promise.then(function onSuccess() {                           // Once loop is complete, finalize.
    file.close();
  }, function onError(reason) {
    file.close();
    throw reason;
  });
  return promise;
}
</pre>

<p>Or a variant using <a rel="noopener" href="http://taskjs.org/" class="external" title="http://taskjs.org/">Task.js</a> (or at least <a rel="noopener" href="http://dxr.mozilla.org/mozilla-central/source/toolkit/modules/Task.jsm" class="external" title="http://dxr.mozilla.org/mozilla-central/toolkit/content/Task.jsm.html">the subset already present on mozilla-central</a>):</p>

<pre class="brush: js;">let writeStream = function writeStream(data, outFile, chunkSize) {
  return Task.spawn(function() {
    let view = new Uint8Array(data);
    let pos = 0;
    while (pos &lt; view.byteLength) {
      pos += yield outFile.write(view.subarray(pos, chunkSize));
    }
    outFile.close();
  }).then(
    null,
    function onFailure(reason) {
      outFile.close();
      throw reason;
    }
  );
}
</pre>

<h3 id="Example_Save_Canvas_to_Disk">Example: Save Canvas to Disk</h3>

<p>This exmaple uses <code>Image </code>to load an image from a path (note: if your path is a file on disk you must use local file; this is accomplished with <code>OS.Path.toFileURI</code>, which accepts a string). After image loads it then draws it to <code>canvas</code>, makes it a <code>blob</code>, and uses <code>FileReader</code> to turn it into <code>ArrayBuffer(View)</code>, then uses OS.File.writeAtomic to save to disk.</p>

<pre class="brush: js;">var img = new Image();
img.onload = function() {
&nbsp;&nbsp; &nbsp;var canvas = document.createElementNS('http://www.w3.org/1999/xhtml', 'canvas');
&nbsp;&nbsp; &nbsp;canvas.width = img.naturalWidth;
&nbsp;&nbsp; &nbsp;canvas.height = img.naturalHeight;
&nbsp;&nbsp; &nbsp;var ctx = canvas.getContext('2d');
&nbsp;&nbsp; &nbsp;ctx.drawImage(img, 0, 0);
&nbsp;&nbsp; &nbsp;(canvas.toBlobHD || canvas.toBlob).call(canvas, function(b) {
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;var r = <code class="language-html">Cc['@mozilla.org/files/filereader;1'].createInstance(Ci.nsIDOMFileReader); </code>//new FileReader();
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;r.onloadend = function() {
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;// r.result contains the ArrayBuffer.
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;var writePath = OS.Path.join(OS.Constants.Path.desktopDir, 'savedImage.png');
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;var promise = OS.File.writeAtomic(writePath, new Uint8Array(r.result), { tmpPath: writePath + '.tmp' });
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;promise.then(
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;function(aVal) {
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;console.log('successfully saved image to disk');
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;},
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;function(aReason) {
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;console.log('writeAtomic failed for reason:', aReason);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;};
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;r.readAsArrayBuffer(b);
&nbsp;&nbsp; &nbsp;}, 'image/png');
};
//var path = OS.Path.toFileURI(OS.Path.join(OS.Contants.Path.desktopDir, 'my.png')); //do it like this for images on disk
var path = 'https://mozorg.cdn.mozilla.net/media/img/firefox/channel/toggler-beta.png?2013-06'; //do like this for images online
img.src = path;
</pre>

<h3 id="Example_Append_to_File">Example: Append to File<a id="Example: Append to File" name="Example: Append to File"></a></h3>

<p>This example shows how to use <code>open</code>, <code>write</code>, and <code>close</code> to append to a file. If the file does not exist, it is created. At the time of this writing, <code>write</code> does not support <code>encoding</code> option so the text to be written has to be encoded with <code>TextEncoder</code>. This example also shows the resolve value of open (an instance of OS.File, this is a file, so you can do any of the methods on it found <a href="#OS.File.prototype.close">here</a>), <code>write</code> (a number indicating bytes written), and <code>close</code> (<code>undefined</code>, meaning there is no resolve value).</p>

<pre class="brush: js;"><code>var pth = OS.Path.join(OS.Constants.Path.desktopDir, 'app.txt');
OS.File.open(pth, {write: true, append: true}).then(valOpen =&gt; {
&nbsp;&nbsp; &nbsp;console.log('valOpen:', valOpen);
&nbsp;&nbsp; &nbsp;var txtToAppend = '</code>append some text <code>\n';
&nbsp;&nbsp; &nbsp;var txtEncoded = new TextEncoder().encode(txtToAppend);
&nbsp;&nbsp; &nbsp;valOpen.write(txtEncoded).then(valWrite =&gt; {
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;console.log('valWrite:', valWrite);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;valOpen.close().then(valClose =&gt; {
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;console.log('valClose:', valClose);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;console.log('successfully appended');
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;});
&nbsp;&nbsp; &nbsp;});
});</code></pre>

<a class="dashAnchor" name="//apple_ref/Section/Global%20object%20OS%2EFile"></a><h2 id="Global_object_OS.File">Global object OS.File</h2>

<h3 id="Method_overview">Method overview</h3>

<table class="standard-table">
 <tbody>
  <tr>
   <td><code><a href="../Promise.jsm/Promise.html" title="/en-US/docs/Mozilla/JavaScript_code_modules/Promise.jsm/Promise">Promise</a>&lt;File&gt; <a href="#OS.File.open" title="#OS.File.open">open</a>(in string path, [optional] in object mode, [optional] in object options);</code></td>
  </tr>
  <tr>
   <td><code><a href="../Promise.jsm/Promise.html" title="/en-US/docs/Mozilla/JavaScript_code_modules/Promise.jsm/Promise">Promise</a>&lt;object&gt; <a href="#OS.File.openUnique" title="#OS.File.openUnique">openUnique</a>(in string path, [optional] in object options);</code></td>
  </tr>
  <tr>
   <td><code><a href="../Promise.jsm/Promise.html" title="/en-US/docs/Mozilla/JavaScript_code_modules/Promise.jsm/Promise">Promise</a>&lt;void&gt; <a href="#OS.File.copy" title="#OS.File.copy">copy</a>(in string sourcePath, in string destPath, [optional] in object options);</code></td>
  </tr>
  <tr>
   <td><code><a href="../Promise.jsm/Promise.html" title="/en-US/docs/Mozilla/JavaScript_code_modules/Promise.jsm/Promise">Promise</a>&lt;bool&gt; <a href="#OS.File.exists" title="#OS.File.exists">exists</a>(in string path);</code></td>
  </tr>
  <tr>
   <td><code><a href="../Promise.jsm/Promise.html" title="/en-US/docs/Mozilla/JavaScript_code_modules/Promise.jsm/Promise">Promise</a>&lt;string&gt; <a href="#OS.File.getCurrentDirectory" title="#OS.File.getCurrentDirectory">getCurrentDirectory</a>();</code></td>
  </tr>
  <tr>
   <td><code><a href="../Promise.jsm/Promise.html" title="/en-US/docs/Mozilla/JavaScript_code_modules/Promise.jsm/Promise">Promise</a>&lt;void&gt; <a href="#OS.File.makeDir" title="#OS.File.makeDir">makeDir</a>(in string path, [optional] in object options);</code></td>
  </tr>
  <tr>
   <td><code><a href="../Promise.jsm/Promise.html" title="/en-US/docs/Mozilla/JavaScript_code_modules/Promise.jsm/Promise">Promise</a>&lt;void&gt; <a href="#OS.File.move" title="#OS.File.move">move</a>(in string sourcePath, in string destPath);</code></td>
  </tr>
  <tr>
   <td><code><a href="../Promise.jsm/Promise.html" title="/en-US/docs/Mozilla/JavaScript_code_modules/Promise.jsm/Promise">Promise</a>&lt;<a href="../../../Web/JavaScript/Reference/Global_Objects/Uint8Array.html">Uint8Array</a>&gt; <a href="#OS.File.read" title="#OS.File.read">read</a>(in string path, [optional] in object options);</code></td>
  </tr>
  <tr>
   <td><code><a href="../Promise.jsm/Promise.html" title="/en-US/docs/Mozilla/JavaScript_code_modules/Promise.jsm/Promise">Promise</a>&lt;void&gt; <a href="#OS.File.remove" title="#OS.File.remove">remove</a>(in string path, [optional] in object options);</code></td>
  </tr>
  <tr>
   <td><code><a href="../Promise.jsm/Promise.html" title="/en-US/docs/Mozilla/JavaScript_code_modules/Promise.jsm/Promise">Promise</a>&lt;void&gt; <a href="#OS.File.removeEmptyDir" title="#OS.File.removeEmptyDir">removeEmptyDir</a>(in string path, [optional] in object options);</code></td>
  </tr>
  <tr>
   <td><code><a href="../Promise.jsm/Promise.html" title="/en-US/docs/Mozilla/JavaScript_code_modules/Promise.jsm/Promise">Promise</a>&lt;void&gt; <a href="#OS.File.removeDir" title="#OS.File.removeDir">removeDir</a>(in string path, [optional] in object options);</code></td>
  </tr>
  <tr>
   <td><code><a href="../Promise.jsm/Promise.html" title="/en-US/docs/Mozilla/JavaScript_code_modules/Promise.jsm/Promise">Promise</a>&lt;void&gt; <a href="#OS.File.setCurrentDirectory" title="#OS.File.setCurrentDirectory">setCurrentDirectory</a>(in string path);</code></td>
  </tr>
  <tr>
   <td><code><a href="../Promise.jsm/Promise.html" title="/en-US/docs/Mozilla/JavaScript_code_modules/Promise.jsm/Promise">Promise</a>&lt;void&gt; <a href="#OS.File.setDates">setDates</a>(in string path, in Date|number accessDate, in Date|number modificationDate);</code></td>
  </tr>
  <tr>
   <td><code><a href="../Promise.jsm/Promise.html" title="/en-US/docs/Mozilla/JavaScript_code_modules/Promise.jsm/Promise">Promise</a>&lt;void&gt; <a href="#OS.File.setPermissions">setPermissions</a>(in string path, </code> <code>in object options</code> <code>);</code></td>
  </tr>
  <tr>
   <td><code><a href="../Promise.jsm/Promise.html" title="/en-US/docs/Mozilla/JavaScript_code_modules/Promise.jsm/Promise">Promise</a>&lt;<a href="OS.File.html" title="/en-US/docs/JavaScript_OS.File/OS.File.Info">File.Info</a>&gt; <a href="#OS.File.stat" title="#OS.File.stat">stat</a>(in string path, [optional] in object options);</code></td>
  </tr>
  <tr>
   <td><code><a href="../Promise.jsm/Promise.html" title="/en-US/docs/Mozilla/JavaScript_code_modules/Promise.jsm/Promise">Promise</a>&lt;void&gt; <a href="#OS.File.unixSymLink" title="#OS.File.unixSymLink">unixSymLink</a>(in string targetPath, in string createPath);</code></td>
  </tr>
  <tr>
   <td><code><a href="../Promise.jsm/Promise.html" title="/en-US/docs/Mozilla/JavaScript_code_modules/Promise.jsm/Promise">Promise</a>&lt;void&gt; <a href="#OS.File.writeAtomic" title="#OS.File.writeAtomic">writeAtomic</a>(in string path, in ArrayView data, in object options);</code></td>
  </tr>
 </tbody>
</table>

<h3 id="Methods">Methods</h3>

<h4 id="OS.File.open()">OS.File.open()<a name="OS.File.open"></a></h4>

<p>Use method <code>OS.File.open()</code> to open a file.</p>

<pre class="brush: js;">Promise&lt;File&gt; open(
  in string path,
  [optional] in object mode,
  [optional] in object options
)
</pre>

<h5 id="Arguments">Arguments</h5>

<dl>
 <dt><code>path</code></dt>
 <dd>The full native name of the file to open.</dd>
 <dt><code>mode</code><span class="inlineIndicator optional optionalInline">Optional</span></dt>
 <dd>The opening mode for the file, as an object that may contain a subset of the following fields:
 <dl>
  <dt><code>read</code></dt>
  <dd>If <code>true</code>, the file will be opened for reading. Depending on other fields, it may also be opened for writing.</dd>
  <dt><code>write</code></dt>
  <dd>If <code>true</code>, the file will be opened for writing. Depending on other fields, it may also be opened for reading.</dd>
  <dd>
  <div class="blockIndicator note">
  <p>Prior to Gecko 27, unless <code>create</code> or <code>truncate</code> are set or explicit <code>unixFlags</code> are given, the file will be opened for appending on Unix/Linux. However, the file is not opened for appending on Windows. See <a rel="noopener" href="https://bugzilla.mozilla.org/show_bug.cgi?id=924858" class="external">bug 924858</a>. Starting with Gecko 27, you may use the <code>append</code> flag instead. For an example using append see <a href="#Example: Append to File">here</a>.</p>
  </div>
  </dd>
  <dt><code>truncate</code> | <code>trunc</code></dt>
  <dd>If <code>true</code>, the file will be opened for writing. If the file does not exist, it will be created. If the file exists, its contents will be removed. Cannot be used with <code>create</code>.</dd>
  <dt><code>create</code></dt>
  <dd>If <code>true</code>, file will be opened for writing. The file must not exist. If the file already exists, throw an error. Cannot be used with <code>truncate</code> or <code>existing</code>.</dd>
  <dt><code>existing</code></dt>
  <dd>If <code>true</code>, the file must already exist. If the file does not exist, throw an error. Cannot be used with <code>create</code>.</dd>
  <dt><code>append</code></dt>
  <dd>If<code> true</code>, the file will be opened for appending, meaning the equivalent of <code>.setPosition(0, POS_END)</code> is executed before each write. The default is <code>true</code>, i.e. opening a file for appending. Specify <code>append: false</code> to open the file in regular mode.</dd>
 </dl>
 </dd>
 <dt><code>options</code><span class="inlineIndicator optional optionalInline">Optional</span></dt>
 <dd>Platform-specific options for opening the file. <strong>For advanced users only. Most users will never have need of these options.</strong> To specify options, pass an object that may contain some of the following flags:
 <dl>
  <dt><code>unixFlags</code></dt>
  <dd>(ignored under non-Unix platforms) If specified, file opening flags, as per libc function <code>open</code>. If unspecified, build these flags from the contents of <code>mode</code>. You can build these flags from values <a href="https://developer.mozilla.org/en/JavaScript_OS.Constants#libc_opening_files" title="en/JavaScript_OS.Constants#libc_opening_files">OS.Constants.libc.O_*</a>.</dd>
  <dt><code>unixMode</code></dt>
  <dd>(ignored under non-Unix platforms) If specified, file creation mode, as per libc function <code>open</code>. If unspecified, files are created with a default mode of 0600 (file is private to the user, the user can read and write). You can build this mode from values <a href="https://developer.mozilla.org/en/JavaScript_OS.Constants#libc_opening_files" title="en/JavaScript_OS.Constants#libc_opening_files"><code>OS.Constants.libc.S_I*</code></a>.</dd>
  <dt><code>winShare</code></dt>
  <dd>(ignored under non-Windows platforms) If specified, a sharing policy, as per Windows function <code>CreateFile</code>. If unspecified, files are opened with a default sharing policy (file is not protected against being read/written/removed by another process or another use in the same process). You can build this policy from constants OS.Constants.Win.FILE_SHARE_*.</dd>
  <dt><code>winSecurity</code></dt>
  <dd>(ignored under non-Windows platforms) If specified, a security policy, as per Windows function <code>CreateFile</code>. If unspecified, no security attributes.</dd>
  <dt><code>winAccess</code></dt>
  <dd>(ignored under non-Windows platforms) If specified, access mode, as per Windows function <code>CreateFile</code>. This also requires option <code>winDisposition</code> and this replaces argument <code>mode</code>. If unspecified, value is built from <code>mode</code>.</dd>
  <dt><code>winDisposition</code></dt>
  <dd>(ignored under non-Windows platforms) If specified, disposition mode, as per Windows function <code>CreateFile</code>. This also requires option <code>winAccess</code> and this replaces argument <code>mode</code>. If unspecified, value is built from <code>mode</code>.</dd>
 </dl>
 </dd>
</dl>

<h5 id="Promise_resolves_to">Promise resolves to</h5>

<p>An instance of <code>OS.File</code> representing the expected file.</p>

<div class="blockIndicator warning">
<p>Note that the operating system limits the number of files that can be opened simultaneously by one process, so do not forget to <a href="https://developer.mozilla.org/OS.File.prototype.close" title="OS.File.prototype.close"><code>close</code></a> that file once you have finished it, to ensure that you are not blocking the rest of the process.</p>
</div>

<p>When opening files for writing, they will be opened for appending unless you specify <code>append: false</code> in Gecko 27 and later. In Gecko 26 and earlier, on platforms other than Windows, the files will be opened for appending unless you specify explicit <code>unixFlags</code> or open the file with either <code>create</code> or <code>truncate</code> flags. In Gecko 26 and earlier on Windows, files will never be opened for appending.</p>

<p>To open an existing file for writing <em>without</em> appending in a compatible way on all platforms in both Gecko 27 and later and Gecko 26 and earlier, you should specify both the <code>append</code> flag and <code>unixFlags</code>.</p>

<pre class="brush: js;">// Open a file for writing without appending to it.

Task.spawn(function() {
  // Under Unix, you'll have to specify your own unixFlags for Gecko &lt; 27 to avoid append mode.
  var options = {};
  if (OS.Constants.libc) {
    // Own flags omitting O_APPEND, e.g.
    options.unixFlags = OS.Constants.libc.O_CREAT | OS.Constants.libc.O_WRONLY;
  }
  // For Gecko &gt;= 27, it is enough, but crucial, to set the correct append flag.
  var outfile = yield OS.File.open("file.tmp", {write: true, append: false}, options);
  try {
    // ... do something with that file
  } finally {
    yield outfile.close();
  }
});</pre>

<h5 id="Example_of_opening_file_and_keeping_it_locked">Example of opening file and keeping it locked</h5>

<p>This uses Tasks.jsm to open a file and keep it open. When you are done with it, like in shutdown of restartless add-on, you should close the file so it becomes editable again.</p>

<pre class="brush: js;">let options = {
  winShare: 0 // Exclusive lock on Windows
};
if (OS.Constants.libc.O_EXLOCK) {
  // Exclusive lock on *nix
  options.unixFlags = OS.Constants.libc.O_EXLOCK;
}
let file = yield OS.File.open(..., options);</pre>

<p>Then when you want to unlock the file so it can be edited from other places, close the file.</p>

<pre class="brush: js;">file.close();</pre>

<p>This example is from Stackoverflow: <a rel="noopener" href="http://stackoverflow.com/questions/24462115/os-file-check-last-modified-date-before-os-read#24463662" class="external">OS.File check last modified date before OS.read</a></p>

<h4 id="OS.File.openUnique()">OS.File.openUnique()<a name="OS.File.openUnique"></a></h4>

<p></p>

<p>Creates and opens a file with a unique name. By default, generate a random hex number and use it to create a unique new file name.</p>

<pre class="brush: cpp;">Promise&lt;object&gt; openUnique(
  in string path,
  [optional] in object options
) throws OS.File.Error</pre>

<h5 id="Arguments_2">Arguments</h5>

<dl>
 <dt><code>path</code></dt>
 <dd>The full native name of the file to open.</dd>
 <dt><code>options</code><span class="inlineIndicator optional optionalInline">Optional</span></dt>
 <dd>Additional options for file opening. This implementation interprets the following fields:
 <dl>
  <dt><code>humanReadable</code></dt>
  <dd>If <code>true</code>, create a new filename appending a decimal number, e.g., filename-1.ext, filename-2.ext. If <code>false</code> use hex numbers, e.g., filename-A65BC0.ext.</dd>
  <dt><code>maxAttempts</code></dt>
  <dd>Used to limit the amount of tries after a failed file creation. Default is 99.</dd>
 </dl>
 </dd>
</dl>

<h5 id="Promise_resolves_to_2">Promise resolves to</h5>

<p>An object contains a file object{file} and the path{path}.</p>

<h5 id="Promise_can_be_rejected_with">Promise can be rejected with</h5>

<dl>
 <dt><code><a href="OS.File-2.html" title="/en-US/docs/JavaScript_OS.File/OS.File.Error">OS.File.Error</a></code></dt>
 <dd>If the file could not be opened.</dd>
</dl>

<h4 id="OS.File.copy()">OS.File.copy()<a name="OS.File.copy"></a></h4>

<p>Copy a file.</p>

<pre class="brush: cpp;">void copy(
  in string sourcePath,
  in string destPath
  [optional] in object options)
throws OS.File.Error
</pre>

<h5 id="Arguments_3">Arguments</h5>

<dl>
 <dt><code>sourcePath</code></dt>
 <dd>The full path of the file to copy. At the time of this writing, this function does <strong>not</strong> copy directories.</dd>
 <dt><code>destPath</code></dt>
 <dd>The full path of the destination. Note that this is not a directory but a file.</dd>
 <dt><code>options</code><span class="inlineIndicator optional optionalInline">Optional</span></dt>
 <dd>An optional object used to control the behavior of this function. You may pass an object with a subset of the following fields:</dd>
 <dt style="margin-left: 40px;"><code>noOverwrite</code></dt>
 <dd style="margin-left: 40px;">If <code>destPath</code> already exists, do not overwrite it, but rather launch an exception.</dd>
</dl>

<h5 id="Promise_can_be_rejected_with_2">Promise can be rejected with</h5>

<dl>
 <dt><code><a href="OS.File-2.html" title="/en-US/docs/JavaScript_OS.File/OS.File.Error">OS.File.Error</a></code></dt>
 <dd>In case of any error, in particular if the file does not exist.</dd>
</dl>

<div class="blockIndicator note">
<p><strong>Performance notes</strong></p>

<ul>
 <li>To avoid erasing the destination file, it is much faster to use option <code>noOverwrite</code> than to check manually whether the file exists.</li>
 <li>This operation is OS-optimized under OS X (native operation <code>copyfile</code>), Linux/Android (native operation <code>splice</code>), and Windows (native operation <code>CopyFile</code>).</li>
</ul>
</div>

<h4 id="OS.File.exists()">OS.File.exists()<a name="OS.File.exists"></a></h4>

<p>Determine whether a file exists</p>

<pre class="brush: cpp;">Promise&lt;bool&gt; exists(
  in string path
)
</pre>

<h5 id="Arguments_4">Arguments</h5>

<dl>
 <dt><code>path</code></dt>
 <dd>The name of the file</dd>
</dl>

<h5 id="Promise_resolves_to_3">Promise resolves to</h5>

<p>true if the file exists, false otherwise</p>

<div class="blockIndicator note">
<p><strong>Performance note: </strong>For the sake of performance, you should avoid this function whenever possible. For instance, rather than calling exists() to determine if a directory should be created with makeDir, you should rather create the directory with makeDir and catch the error if the directory exists. This will ensure that you only need to perform one I/O operation rather than two.</p>
</div>

<h4 id="OS.File.getCurrentDirectory()">OS.File.getCurrentDirectory()<a name="OS.File.getCurrentDirectory"></a></h4>

<p>Return the current directory</p>

<pre class="brush: js;">Promise&lt;string&gt; getCurrentDirectory()</pre>

<h5 id="Promise_resolves_to_4">Promise resolves to</h5>

<p>The path to the current directory.</p>

<div class="blockIndicator note">
<p><strong>Safety note:</strong> Recall that the current directory can change during the execution of the process. Therefore, the information returned by this function may be false by the time you receive it.</p>
</div>

<h4 id="OS.File.makeDir()">OS.File.makeDir()<a name="OS.File.makeDir"></a></h4>

<p>Create a new directory</p>

<pre class="brush: cpp;">Promise&lt;void&gt; makeDir(
  in string path,
  [optional] in object options
) throws OS.File.Error</pre>

<h5 id="Arguments_5">Arguments</h5>

<dl>
 <dt><code>path</code></dt>
 <dd>The full name of the directory to create.</dd>
 <dt><code>options</code><span class="inlineIndicator optional optionalInline">Optional</span></dt>
 <dd>Options for creating the directory. To specify options, pass an object that may contain some of the following flags:</dd>
 <dt style="margin-left: 40px;"><code>ignoreExisting</code></dt>
 <dd style="margin-left: 40px;">If <code>true</code>, succeed even if the directory already exists (default behavior). Otherwise, fail if the directory already exists. NOTE: If <code>from</code> is specified then even if <code>ignoreExisting</code> is specified as <code>false</code>, it will not fail due to pre-existence of directories, because the <code>from</code> option tells <code>makeDir</code> to make the folders if not found.</dd>
 <dt style="margin-left: 40px;"><code>unixMode</code></dt>
 <dd style="margin-left: 40px;">(ignored under non-Unix platforms) If specified, file creation mode, as per libc function mkdir. If unspecified, directories are created with a default mode of 0600 (file is private to the user, the user can read and write). You can build this mode from values <a href="https://developer.mozilla.org/en/JavaScript_OS.Constants#libc_opening_files" title="en/JavaScript_OS.Constants#libc_opening_files"><code>OS.Constants.libc.S_I*</code></a>.</dd>
 <dt style="margin-left: 40px;"><code>winSecurity</code></dt>
 <dd style="margin-left: 40px;">(ignored under non-Windows platforms) If specified, a security policy, as per Windows function <code>CreateDirectory</code>. If unspecified, no security attributes.</dd>
 <dt style="margin-left: 40px;"><code>from</code></dt>
 <dd style="margin-left: 40px;">If specified, the call to <code>makeDir</code> creates all the ancestors of <code>path</code> that are descendents of <code>from</code>. Note that <code>from</code> and its existing descendents must be user-writeable and that <code>path</code> must be a descendent of <code>from</code>.</dd>
</dl>

<h4 id="OS.File.move()">OS.File.move()<a name="OS.File.move"></a></h4>

<p>Move a file.</p>

<pre class="brush: cpp;">Promise&lt;void&gt; move(
  in string sourcePath,
  in string destPath
  [optional] in object options
)</pre>

<h5 id="Arguments_6"><span>Arguments</span></h5>

<dl>
 <dt><code>sourcePath</code></dt>
 <dd>The full path of the file to move. At the time of this writing, the behavior of this function is unspecified if <code>sourcePath</code> is a directory.</dd>
 <dt><code>destPath</code></dt>
 <dd>The full path of the destination. At the time of this writing, the behavior of this function is unspecified if <code>destPath</code> is a directory.</dd>
 <dt><code>options</code><span class="inlineIndicator optional optionalInline">Optional</span></dt>
 <dd>An optional object used to control the behavior of this function. You may pass an object with a subset of the following fields:
 <dl>
  <dt><code>noOverwrite</code></dt>
  <dd>If <code>destPath</code> already exists, do not overwrite it, but rather launch an exception.</dd>
  <dt><code>noCopy</code></dt>
  <dd>If moving the file would require a copy (i.e. if the destination path resides on another drive/device/file system as the source path), fail.</dd>
 </dl>
 </dd>
</dl>

<h5 id="Promise_can_be_rejected_with_3">Promise can be rejected with</h5>

<dl>
 <dt><code><a href="OS.File-2.html" title="/en-US/docs/JavaScript_OS.File/OS.File.Error">OS.File.Error</a></code></dt>
 <dd>In case of any error, in particular if the file does not exist.</dd>
</dl>

<div class="blockIndicator note">
<p><strong>Performance note</strong>: This operation is OS-optimized under OS X, Linux/Android, and Windows.</p>
</div>

<h4 id="OS.File.read()">OS.File.read()<a name="OS.File.read"></a></h4>

<p>Read the contents of a file</p>

<pre class="brush: cpp;">Promise&lt;Uint8Array&gt; read(
  in string path,
  [optional] in number bytes
)
</pre>

<h5 id="Arguments_7">Arguments</h5>

<dl>
 <dt><code>path</code></dt>
 <dd>The full path to the file to read.</dd>
 <dt><code>bytes</code><span class="inlineIndicator optional optionalInline">Optional</span></dt>
 <dd>The number of bytes to read. If unspecified, read the complete file.</dd>
</dl>

<h5 id="Promise_resolves_to_5">Promise resolves to</h5>

<p>An array holding bytes bytes (or less if the file did not contain as many bytes).</p>

<h5 id="Promise_can_be_rejected_with_4">Promise can be rejected with</h5>

<dl>
 <dt><code><a href="OS.File-2.html" title="/en-US/docs/JavaScript_OS.File/OS.File.Error">OS.File.Error</a></code></dt>
 <dd>In case of any error, in particular if the file does not exist or if the process does not have the authorization to read it.</dd>
</dl>

<div class="blockIndicator note">
<p> As of Firefox 30, <code>OS.File.read()</code> takes an options object as second argument.</p>

<pre class="brush: cpp;">Promise&lt;Uint8Array&gt; read(
  in string path,
  [optional] in object options
)</pre>

<h5 id="Arguments_8">Arguments</h5>

<dl>
 <dt><code>path</code></dt>
 <dd>The full path to the file to read.</dd>
 <dt><code>options</code><span class="inlineIndicator optional optionalInline">Optional</span></dt>
 <dd>An optional object used to control the behavior of this function. You may pass an object with a subset of the following fields:
 <dl>
  <dt><code>bytes</code></dt>
  <dd>The number of bytes to read. If unspecified, read the complete file.</dd>
  <dt><code>encoding</code></dt>
  <dd>Instead of using <code>TextDecoder</code>, you can supply a string to this option. For example, instead of:
  <pre class="brush: js;">let decoder = new TextDecoder();
let promise = OS.File.read("file.txt");
promise = promise.then(
  function onSuccess(array) {
    return decoder.decode(array);        // Convert this array to a text
  }
);</pre>
  You can simply do:

  <pre class="brush: js;">let promise = OS.File.read("file.txt", { encoding: "utf-8" });
promise = promise.then(
  function onSuccess(text) {
    return text;        // text is a string
  }
);</pre>
  </dd>
 </dl>
 </dd>
</dl>
</div>

<h4 id="OS.File.remove()">OS.File.remove()<a name="OS.File.remove"></a></h4>

<p>Remove an existing file.</p>

<pre class="brush: cpp;">Promise&lt;void&gt; remove(
  in string path,
  [optional] in object options
)
</pre>

<h5 id="Arguments_9">Arguments</h5>

<dl>
 <dt><code>path</code></dt>
 <dd>A string representing the path of the file to remove. At the time of this writing, this function does <strong>not</strong> remove directories.</dd>
 <dt><code>options</code><span class="inlineIndicator optional optionalInline">Optional</span></dt>
 <dd>An optional object used to control the behavior of this function. You may pass an object with a subset of the following fields:</dd>
 <dt style="margin-left: 40px;"><code>ignoreAbsent</code></dt>
 <dd style="margin-left: 40px;">Succeed if the file doesn't exist.</dd>
</dl>

<h5 id="Promise_can_be_rejected_with_5">Promise can be rejected with</h5>

<dl>
 <dt><code><a href="OS.File-2.html" title="/en-US/docs/JavaScript_OS.File/OS.File.Error">OS.File.Error</a></code></dt>
 <dd>In case of any error, in particular if the file does not exist.</dd>
</dl>

<h4 id="OS.File.removeEmptyDir()">OS.File.removeEmptyDir()<a name="OS.File.removeEmptyDir"></a></h4>

<p>Remove an empty directory</p>

<pre class="brush: cpp;">Promise&lt;void&gt; removeEmptyDir(
  in string path,
  [optional] in object options
)
</pre>

<h5 id="Arguments_10">Arguments</h5>

<dl>
 <dt><code>path</code></dt>
 <dd>The complete path to the directory.</dd>
 <dt>options<span class="inlineIndicator optional optionalInline">Optional</span></dt>
 <dd>An optional object used to control the behavior of this function. You may pass an object with a subset of the following fields:</dd>
 <dt style="margin-left: 40px;"><code>ignoreAbsent</code></dt>
 <dd style="margin-left: 40px;">Succeed if the directory doesn't exist.</dd>
</dl>

<h5 id="Promise_can_be_rejected_with_6">Promise can be rejected with</h5>

<dl>
 <dt><code><a href="OS.File-2.html" title="/en-US/docs/JavaScript_OS.File/OS.File.Error">OS.File.Error</a></code></dt>
 <dd>In case of any error, in particular if the file does not exist.</dd>
</dl>

<h4 id="OS.File.removeDir()">OS.File.removeDir()<a name="OS.File.removeDir"></a></h4>

<p></p>

<p>Remove an existing directory and its contents.</p>

<pre class="brush: cpp;">Promise&lt;void&gt; removeDir(
  in string path,
  [optional] in object options
)
</pre>

<h5 id="Arguments_11">Arguments</h5>

<dl>
 <dt><code>path</code></dt>
 <dd>A string representing the name of the file to remove.</dd>
 <dt><code>options</code></dt>
 <dd>An object that may contain the following fields</dd>
 <dt style="margin-left: 40px;"><code>ignoreAbsent</code></dt>
 <dd style="margin-left: 40px;">If false, this function will throw an error if the directory doesn't exist.</dd>
 <dt style="margin-left: 40px;"><code>ignorePermissions</code></dt>
 <dd style="margin-left: 40px;">If true, this function will remove the directory even when lacking write permissions.</dd>
</dl>

<h5 id="Promise_can_be_rejected_with_7">Promise can be rejected with</h5>

<dl>
 <dt><code><a href="OS.File-2.html" title="/en-US/docs/JavaScript_OS.File/OS.File.Error">OS.File.Error</a></code></dt>
 <dd>In case of any error, in particular if path isn't a directory.</dd>
</dl>

<h4 id="OS.File.setCurrentDirectory()">OS.File.setCurrentDirectory()<a name="OS.File.setCurrentDirectory"></a></h4>

<p>Change the current directory of the process.</p>

<div class="blockIndicator warning">
<p><strong>Use with extreme caution</strong>: This API may be useful for application developers but must not be used by add-ons, as it changes the state of the complete application.</p>
</div>

<pre class="brush: cpp;">Promise&lt;void&gt; setCurrentDirectory(
  in string path
)</pre>

<h5 id="Arguments_12">Arguments</h5>

<dl>
 <dt><code>path</code></dt>
 <dd>The complete path to use as current directory.</dd>
</dl>

<h5 id="Promise_can_be_rejected_with_8">Promise can be rejected with</h5>

<dl>
 <dt><code><a href="OS.File-2.html" title="/en-US/docs/JavaScript_OS.File/OS.File.Error">OS.File.Error</a></code></dt>
 <dd>In case of any error, in particular if the path does not represent an existing directory.</dd>
</dl>

<h4 id="OS.File.setDates()">OS.File.setDates()<a name="OS.File.setDates"></a></h4>

<p></p>

<p>Set the last access and modification date of the file.</p>

<p>The time stamp resolution is one second at best, but might be worse depending on the platform, file system, etc.</p>

<pre class="brush: cpp;">Promise&lt;void&gt; setDates(
  in string path,
  in Date|number accessDate,
  in Date|number modificationDate
)</pre>

<h5 id="Arguments_13">Arguments</h5>

<dl>
 <dt>path</dt>
 <dd>The complete path to the file.</dd>
 <dt>accessDate</dt>
 <dd>The last access date. If numeric, milliseconds since epoch. If omitted or null, the current date will be used.</dd>
 <dt>modificationDate</dt>
 <dd>The last modification date. If numeric, milliseconds since epoch. If omitted or null, the current date will be used.</dd>
</dl>

<h5 id="Promise_can_be_rejected_with_9">Promise can be rejected with</h5>

<dl>
 <dt><code><a href="OS.File-2.html" title="/en-US/docs/JavaScript_OS.File/OS.File.Error">OS.File.Error</a></code></dt>
 <dd>In case of any error, in particular if the path does not represent an existing file.</dd>
</dl>

<dl>
 <dt>
 <h4 id="OS.File.setPermissions()">OS.File.setPermissions()<a name="OS.File.setPermissions"></a></h4>

 <p>Sets the file's access permission bits.</p>

 <pre class="brush: cpp;">Promise&lt;void&gt; setPermissions(
  in string path,
  in object options
)</pre>

 <h5 id="Arguments_14">Arguments</h5>
 </dt>
 <dt>path</dt>
 <dd>The complete path to the file.</dd>
 <dt>options</dt>
 <dd>The new attributes to set</dd>
 <dt style="margin-left: 40px;"><code>winAttributes</code></dt>
 <dd style="margin-left: 40px;">This is an object with following optional keys. Ignored under non-Windows platforms.</dd>
 <dt style="margin-left: 80px;"><code>hidden</code></dt>
 <dd style="margin-left: 80px;">Boolean. Set to true to make the target hidden, or false to make it visible.</dd>
 <dt style="margin-left: 80px;"><code>readOnly</code></dt>
 <dd style="margin-left: 80px;">Boolean. Set to true to make the target "read only".</dd>
 <dt style="margin-left: 80px;"><code>system</code></dt>
 <dd style="margin-left: 80px;">Boolean. Toggles the "system" attribute, this is equivalent .</dd>
 <dt style="margin-left: 40px;"><code>unixMode</code></dt>
 <dd style="margin-left: 40px;">Number. This is an number can be created with the constants available in <code>OS.Constants.libc.S_I*</code> or <code>OS.Constants.libc.S_O*</code>. Ignored under non-Unix platforms. To make a file hidden on Unix based platforms, including Mac, simply rename the file with <code>OS.File.move</code> to have "." at the start of the file name.</dd>
 <dt style="margin-left: 40px;"><code>unixHonorUmask</code></dt>
 <dd style="margin-left: 40px;">Toggles the <code>OS.Constants.Sys.umask</code> flag. Ignored under non-Unix platforms..</dd>
 <dt>
 <h5 id="Promise_can_be_rejected_with_10">Promise can be rejected with</h5>
 </dt>
 <dt><code><a href="OS.File-2.html" title="/en-US/docs/JavaScript_OS.File/OS.File.Error">OS.File.Error</a></code></dt>
 <dd>In case of any error, in particular if the path does not represent an existing file.</dd>
</dl>

<h4 id="OS.File.stat()">OS.File.stat()<a name="OS.File.stat"></a></h4>

<p>Obtain information about a file, such as size, creation date, etc.</p>

<pre class="brush: cpp;">Promise&lt;File.Info&gt; stat(
  in string path
)</pre>

<h5 id="Arguments_15">Arguments</h5>

<dl>
 <dt><code>path</code></dt>
 <dd>The complete path to the file.</dd>
</dl>

<h5 id="Promise_resolves_to_6">Promise resolves to</h5>

<p class="brush: js;">An instance of <a href="OS.File.html" title="/en-US/docs/JavaScript_OS.File/OS.File.Info">File.Info</a> holding information about a file.</p>

<h5 id="Promise_can_be_rejected_with_11">Promise can be rejected with</h5>

<dl>
 <dt><code><a href="OS.File-2.html" title="/en-US/docs/JavaScript_OS.File/OS.File.Error">OS.File.Error</a></code></dt>
 <dd>In case of any error, in particular if the path does not represent an existing file.</dd>
</dl>

<div class="blockIndicator note">
<p><strong>Performance Note:</strong> If the file is already opened, calling <em>method</em> <a href="#OS.File.prototype.stat" title="#OS.File.prototype.stat"><code>stat()</code></a> is much faster than calling <em>function</em> <a href="#OS.File.stat" title="#OS.File.stat">OS.File.stat()</a>.</p>
</div>

<h4 id="OS.File.unixSymLink()">OS.File.unixSymLink()<a id="OS.File.unixSymLink" name="OS.File.unixSymLink"></a></h4>

<p>Create a symoblic link file, also known as "Alias" files on Mac OS. This is similar to "Shortcut" files on Windows systems. This function is specific to UNIX baed systems such as Linux and Mac OS X.</p>

<pre class="brush: cpp;">Promise&lt;undefined&gt; unixSymLink(
  in string pathTarget,
  in string pathCreate
)</pre>

<h5 id="Arguments_16">Arguments</h5>

<dl>
 <dt><code>pathTarget</code></dt>
 <dd>The complete path to the file that should be launced by the symbolic link.</dd>
</dl>

<dl>
 <dt><code>pathCreate</code></dt>
 <dd>The complete path to the file that should launch target. The file extension should be <code>.link.</code></dd>
</dl>

<h5 id="Promise_resolves_to_7">Promise resolves to</h5>

<p class="brush: js;">undefined</p>

<h5 id="Promise_can_be_rejected_with_12">Promise can be rejected with</h5>

<dl>
 <dt><code><a href="OS.File-2.html" title="/en-US/docs/JavaScript_OS.File/OS.File.Error">OS.File.Error</a></code></dt>
 <dd>In case of any error. If the file exists already, unixErrorco of 17 will be returned.</dd>
</dl>

<h4 id="OS.File.writeAtomic()">OS.File.writeAtomic()<a name="OS.File.writeAtomic"></a></h4>

<p>Write data to a file, atomically.</p>

<p>Unlike a regular <code>write</code>, this operation ensures that, until the contents are fully written, the destination file is not modified.</p>

<pre class="brush: cpp;">Promise&lt;void&gt; writeAtomic(
  in string path,
  in ArrayBufferView data,
  in object options
)</pre>

<h5 id="Arguments_17">Arguments</h5>

<dl>
 <dt><code>path</code></dt>
 <dd>The full path to the destination file.</dd>
 <dt><code>data</code></dt>
 <dd>An <a href="../../../Web/API/ArrayBufferView.html" title="/en-US/docs/JavaScript_typed_arrays/ArrayBufferView">ArrayBufferView</a> holding the data to write.</dd>
 <dd><div class="blockIndicator standardNote">
    <p><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Firefox/Releases/37">Firefox 37 note</a></p>
    <p style="font-weight: 400;">As of Firefox 37, this method will neuter the array buffer.</p>
</div></dd>
 <dt>&nbsp;</dt>
 <dt><code>options</code></dt>
 <dd>An object that may contain the following fields</dd>
 <dt style="margin-left: 40px;"><code>tmpPath</code></dt>
 <dd style="margin-left: 40px;">If <code>null</code> or unspecified, write the data directly to <code>path</code>. If specified, write the data to a temporary file called <code>tmpPath</code> and, once the write is complete, rename the file to replace <code>path</code>. Performing this operation is a little slower but also a little safer. <div class="blockIndicator standardNote">
    <p><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Firefox/Releases/25">Firefox 25 note</a></p>
    <p style="font-weight: 400;">tmpPath is required in Firefox 24 or lower version, but optional in Firefox 25 or higher version</p>
</div></dd>
 <dt style="margin-left: 40px;"><code>noOverwrite</code></dt>
 <dd style="margin-left: 40px;">If specified and true, and if <code>path</code> already exists, this function will throw an error without overwriting <code>path</code>.</dd>
 <dt style="margin-left: 40px;"><code>flush</code></dt>
 <dd style="margin-left: 40px;">If <code>false</code>&nbsp;or unspecified, return immediately once the write is complete. If <code>true</code>, before writing, force the operating system to write its internal disk buffers to the disk. This is considerably slower (not just for the application but for the whole system) and more battery expensive but also safer: if the system shuts down improperly (typically due to a kernel freeze or a power failure) or if the device is disconnected before the buffer is flushed, the file has more chances of not being corrupted.</dd>
 <dt style="margin-left: 40px;"><code>backupTo</code></dt>
 <dd style="margin-left: 40px;">Available since Firefox 30. If specified, backup the destination file as <code>backupTo</code>. Note that this function renames the destination file before overwriting it. If the process or the operating system freezes or crashes during the short window between these operations, the destination file will have been moved to its backup.</dd>
 <dt style="margin-left: 40px;"><code>encoding</code></dt>
 <dd style="margin-left: 40px;">Available since Firefox 22. Instead of using <code>TextEncoder</code>, you can supply a string to this option. For example, instead of:
 <pre class="brush: js;">let encoder = new TextEncoder();
let array = encoder.encode("This is some text");
let promise = OS.File.writeAtomic("file.txt", array, {tmpPath: "file.txt.tmp"});</pre>
 You can simply do:

 <pre class="brush: js;">let promise = OS.File.writeAtomic("file.txt", "This is some text", { encoding: "utf-8", tmpPath: "file.txt.tmp" })</pre>
 </dd>
</dl>

<div class="blockIndicator warning">
<p><strong>Limitations</strong><br>
 In a few extreme cases (hardware failure during the write, user unplugging disk during the write, etc.), data may be corrupted. If your data is user-critical (e.g., preferences, application data), you may wish to consider adding options <code>tmpPath</code> and/or <code>flush</code> to reduce the likelihood of corruption, as detailed above. Note that no combination of options can be guaranteed to totally eliminate the risk of corruption.<br>
 &nbsp;</p>
</div>

<div class="blockIndicator warning">
<p><strong>Use with caution:</strong> Modifying the contents of <code>data</code> before the operation is complete is a <strong>very bad idea</strong>.</p>
</div>

<h5 id="Promise_can_be_rejected_with_13">Promise can be rejected with</h5>

<dl>
 <dt><a href="OS.File-2.html" title="/en-US/docs/JavaScript_OS.File/OS.File.Error">OS.File.Error</a></dt>
 <dd>In case of any error, in particular if the destination file cannot be overwritten, or if <code>tmpPath</code> is not on the same device as <code>path</code>.</dd>
</dl>

<a class="dashAnchor" name="//apple_ref/Section/Instances%20of%20OS%2EFile"></a><h2 id="Instances_of_OS.File">Instances of OS.File</h2>

<p>To obtain an instance of OS.File, use function <a href="#OS.File.open" title="#OS.File.open">OS.File.open</a>.</p>

<h3 id="Methods_overview">Methods overview</h3>

<table class="standard-table">
 <tbody>
  <tr>
   <td><code><a href="../Promise.jsm/Promise.html" title="/en-US/docs/Mozilla/JavaScript_code_modules/Promise.jsm/Promise">Promise</a>&lt;void&gt; <a href="#OS.File.prototype.close" title="#OS.File.prototype.close">close</a>()</code></td>
  </tr>
  <tr>
   <td><code><a href="../Promise.jsm/Promise.html" title="/en-US/docs/Mozilla/JavaScript_code_modules/Promise.jsm/Promise">Promise</a>&lt;void&gt; <a href="#OS.File.prototype.flush" title="#OS.File.prototype.flush">flush</a>()</code></td>
  </tr>
  <tr>
   <td><code><a href="../Promise.jsm/Promise.html" title="/en-US/docs/Mozilla/JavaScript_code_modules/Promise.jsm/Promise">Promise</a>&lt;number&gt; <a href="#OS.File.prototype.getPosition" title="#OS.File.prototype.getPosition">getPosition</a>()</code></td>
  </tr>
  <tr>
   <td><code><a href="../Promise.jsm/Promise.html" title="/en-US/docs/Mozilla/JavaScript_code_modules/Promise.jsm/Promise">Promise</a>&lt;number&gt; <a href="#OS.File.prototype.read" title="#OS.File.prototype.read">read</a>([optional] in number bytes)</code></td>
  </tr>
  <tr>
   <td><code><a href="../Promise.jsm/Promise.html" title="/en-US/docs/Mozilla/JavaScript_code_modules/Promise.jsm/Promise">Promise</a>&lt;void&gt; <a href="#OS.File.prototype.setDates">setDates</a>(in Date|number accessDate, in Date|number modificationDate);</code></td>
  </tr>
  <tr>
   <td><code><a href="../Promise.jsm/Promise.html" title="/en-US/docs/Mozilla/JavaScript_code_modules/Promise.jsm/Promise">Promise</a>&lt;void&gt; <a href="#OS.File.prototype.setPosition" title="#OS.File.prototype.setPosition">setPosition</a>(in number bytes)</code></td>
  </tr>
  <tr>
   <td><code><a href="../Promise.jsm/Promise.html" title="/en-US/docs/Mozilla/JavaScript_code_modules/Promise.jsm/Promise">Promise</a>&lt;<a href="OS.File.html" title="/en-US/docs/JavaScript_OS.File/OS.File.Info">File.Info</a>&gt; <a href="#OS.File.prototype.stat" title="#OS.File.prototype.stat">stat</a>()</code></td>
  </tr>
  <tr>
   <td><code><a href="../Promise.jsm/Promise.html" title="/en-US/docs/Mozilla/JavaScript_code_modules/Promise.jsm/Promise">Promise</a>&lt;number&gt; <a href="#OS.File.prototype.write" title="#OS.File.prototype.write">write</a>(in <a href="../../../Web/API/ArrayBufferView.html" title="/en-US/docs/JavaScript_typed_arrays/ArrayBufferView">ArrayBufferView</a> source, [optional] in object options)</code></td>
  </tr>
 </tbody>
</table>

<h3 id="Methods_2">Methods</h3>

<h4 id="close()">close()<a name="OS.File.prototype.close"></a></h4>

<p>Close a file and release any associated resource.</p>

<p>Once the file is closed, any attempt to call methods of the file object will raise an error.</p>

<p>An example is seen <a href="#Example: Append to File">here</a>. In this example the contents is not written to file until .close is called.</p>

<div class="blockIndicator warning">
<p>Note that the operating system limits the number of files that can be opened simultaneously by one process, so do not forget to <a href="https://developer.mozilla.org/#OS.File.prototype.close" title="#OS.File.prototype.close"><code>close</code></a> that file once you have finished it to make sure that you are not blocking the rest of the process.</p>
</div>

<pre class="brush: cpp;">Promise&lt;void&gt; close()</pre>

<p><a name="OS.File.prototype.flush"></a></p><h4 id="flush()">flush()</h4><p></p>

<p>Flushes the file's internal buffers, ensuring that all data still in these buffers is now written to disk.</p>

<p>Disk flushes are very expensive and therefore should be used carefully, sparingly, and only in scenarios where it is vital that data survives<span class="difflineplus"> system crashes. Even though the function will be executed off the main-thread, it might still affect the overall performance of any running application.</span></p>

<pre class="brush: cpp;">Promise&lt;void&gt; flush()</pre>

<h4 id="getPosition()"><a name="OS.File.prototype.getPosition">getPosition</a>()</h4>

<p>Return the current position in the file.</p>

<pre class="brush: cpp;">Promise&lt;number&gt; getPosition()
</pre>

<h5 id="Promise_resolves_to_8">Promise resolves to</h5>

<p>The current position in the file, as a number of bytes from the start.</p>

<h5 id="Promise_can_be_rejected_with_14">Promise can be rejected with</h5>

<dl>
 <dt><code><a href="OS.File-2.html" title="/en-US/docs/JavaScript_OS.File/OS.File.Error">OS.File.Error</a></code></dt>
 <dd>If the file is closed.</dd>
</dl>

<h4 id="read()">read()<a name="OS.File.prototype.read"></a></h4>

<p>Read bytes from this file to a new buffer. Bytes are read from the current position in the file and the position is advanced accordingly.</p>

<pre class="brush: cpp;">Promise&lt;Uint8Array&gt; read(
  [optional] in number bytes
)</pre>

<h5 id="Arguments_18">Arguments</h5>

<dl>
 <dt><code>bytes</code></dt>
 <dd>If specified, read <code>bytes</code> bytes, or less if the file does not contain that many bytes. If unspecified, read all the remaining bytes from this file.</dd>
</dl>

<h5 id="Promise_resolves_to_9">Promise resolves to</h5>

<p>An array containing the bytes read.</p>

<div class="blockIndicator note">
<p>If you need to convert the result of this function to a string, you may do so by using the <a rel="noopener" href="http://wiki.whatwg.org/wiki/StringEncoding" class="external" title="http://wiki.whatwg.org/wiki/StringEncoding">StringEncoding API</a>.</p>
</div>

<h5 id="Promise_can_be_rejected_with_15">Promise can be rejected with</h5>

<dl>
 <dt><code><a href="OS.File-2.html" title="/en-US/docs/JavaScript_OS.File/OS.File.Error">OS.File.Error</a></code></dt>
 <dd>In case of I/O error.</dd>
</dl>

<h4 id="setDates()">setDates()<a name="OS.File.prototype.setDates"></a></h4>

<p></p>

<p>Set the last access and modification date of the file.</p>

<p>The time stamp resolution is one second at best, but might be worse depending on the platform, file system, etc.</p>

<pre class="brush: cpp;">Promise&lt;void&gt; setDates(
  in Date|number accessDate,
  in Date|number modificationDate
)</pre>

<h5 id="Arguments_19">Arguments</h5>

<dl>
 <dt>accessDate</dt>
 <dd>The last access date. If numeric, milliseconds since epoch. If omitted or null, the current date will be used.</dd>
 <dt>modificationDate</dt>
 <dd>The last modification date. If numeric, milliseconds since epoch. If omitted or null, the current date will be used.</dd>
</dl>

<h5 id="Promise_can_be_rejected_with_16">Promise can be rejected with</h5>

<dl>
 <dt><code><a href="OS.File-2.html" title="/en-US/docs/JavaScript_OS.File/OS.File.Error">OS.File.Error</a></code></dt>
 <dd>In case of any error, in particular if the path does not represent an existing file.</dd>
</dl>

<h4 id="setPosition()">setPosition()<a name="OS.File.prototype.setPosition"></a></h4>

<p>Change the current position in the file.</p>

<pre class="brush: cpp;">Promise&lt;void&gt; setPosition(
  in number offset,
  in object origin
)
</pre>

<h5 id="Arguments_20">Arguments</h5>

<dl>
 <dt><code>offset</code></dt>
</dl>

<dl>
 <dd>The new position, as a number of bytes from the origin.</dd>
 <dt><code>origin</code></dt>
 <dd>One of the following:
 <ul>
  <li><code>OS.File.POS_START</code> (bytes are counted from the start of the file)</li>
  <li><code>OS.File.POS_CUR</code> (bytes are counted from the current position in the file)</li>
  <li><code>OS.File.POS_END</code> (bytes are counted from the end of the file)</li>
 </ul>
 </dd>
</dl>

<h5 id="Promise_can_be_rejected_with_17">Promise can be rejected with</h5>

<dl>
 <dt><code><a href="OS.File-2.html" title="/en-US/docs/JavaScript_OS.File/OS.File.Error">OS.File.Error</a></code></dt>
 <dd>In case of any error, in particular if the new position is before the start of the file, or if the file is closed.</dd>
</dl>

<h4 id="stat()">stat()<a name="OS.File.prototype.stat"></a></h4>

<p>Obtain information about the file, such as size, creation date, etc.</p>

<pre class="brush: cpp;">Promise&lt;File.Info&gt; stat()</pre>

<h5 id="Promise_resolves_to_10">Promise resolves to</h5>

<p class="brush: js;">An instance of <a href="OS.File.html" title="/en-US/docs/JavaScript_OS.File/OS.File.Info">File.Info</a> holding information about the file.</p>

<h5 id="Promise_can_be_rejected_with_18">Promise can be rejected with</h5>

<dl>
 <dt><code><a href="OS.File-2.html" title="/en-US/docs/JavaScript_OS.File/OS.File.Error">OS.File.Error</a></code></dt>
 <dd>In case of any error, in particular if the file is closed.</dd>
</dl>

<h4 id="write()">write()<a name="OS.File.prototype.write"></a></h4>

<p>Write bytes from a buffer to this file.</p>

<p>Note that, by default, this function may perform several I/O operations to ensure that the buffer is fully written.</p>

<p>An example is seen <a href="#Example: Append to File">here</a>.</p>

<pre class="brush: cpp;">Promise&lt;number&gt; write(
  in ArrayBufferView source
  [optional] in object options
)</pre>

<h5 id="Arguments_21">Arguments</h5>

<dl>
 <dt><code>source</code></dt>
 <dd>The array in which the the bytes are stored.</dd>
 <dd><div class="blockIndicator standardNote">
    <p><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Firefox/Releases/37">Firefox 37 note</a></p>
    <p style="font-weight: 400;">As of Firefox 37, this method will neuter the array buffer.</p>
</div></dd>
 <dt><code>options</code><span class="inlineIndicator optional optionalInline">Optional</span></dt>
 <dd>An object that may contain some of the following fields:</dd>
 <dt style="margin-left: 40px;"><code>bytes</code></dt>
 <dd style="margin-left: 40px;">An upper bound to the number of bytes to write to the file. If unspecified, write up to <code>source.byteLength</code> bytes. If specified, this must be less than <code>source.byteLength</code>.</dd>
</dl>

<h5 id="Promise_resolves_to_11">Promise resolves to</h5>

<p>The number of bytes effectively written to the file.</p>

<h5 id="Promise_can_be_rejected_with_19">Promise can be rejected with</h5>

<dl>
 <dt><code><a href="OS.File-2.html" title="/en-US/docs/JavaScript_OS.File/OS.File.Error">OS.File.Error</a></code></dt>
 <dd>In case of any I/O error.</dd>
 <dt><a href="../../../Web/JavaScript/Reference/Global_Objects/TypeError.html" title="The TypeError object represents an error when a value is not of the expected type."><code>TypeError</code></a></dt>
 <dd>If <code>options.bytes</code> is specified and is larger than <code>source.byteLength</code>.</dd>
</dl>

<p></p>
                  
                
              </article>

              <!-- contributors -->
              <div class="wiki-block contributors">
                <h2 class="offscreen">Document Tags and Contributors</h2>
                
                
  <div class="tag-attach-list contributors-sub">
    <svg class="icon icon-tags" xmlns="http://www.w3.org/2000/svg" width="30" height="28" viewBox="0 0 30 28" aria-hidden="true">
    <path d="M7 7c0-1.109-.891-2-2-2s-2 .891-2 2 .891 2 2 2 2-.891 2-2zm16.672 9c0 .531-.219 1.047-.578 1.406l-7.672 7.688c-.375.359-.891.578-1.422.578s-1.047-.219-1.406-.578L1.422 13.906C.625 13.125 0 11.609 0 10.5V4c0-1.094.906-2 2-2h6.5c1.109 0 2.625.625 3.422 1.422l11.172 11.156c.359.375.578.891.578 1.422zm6 0c0 .531-.219 1.047-.578 1.406l-7.672 7.688a2.08 2.08 0 0 1-1.422.578c-.812 0-1.219-.375-1.75-.922l7.344-7.344c.359-.359.578-.875.578-1.406s-.219-1.047-.578-1.422L14.422 3.422C13.625 2.625 12.11 2 11 2h3.5c1.109 0 2.625.625 3.422 1.422l11.172 11.156c.359.375.578.891.578 1.422z"></path>
</svg>
    <strong>Tags:</strong>&nbsp;
    <ul class="tags tags-small">
      
        <li><a href="https://developer.mozilla.org/en-US/docs/tag/Guide" rel="nofollow">Guide</a></li>
      
        <li><a href="https://developer.mozilla.org/en-US/docs/tag/JavaScript" rel="nofollow">JavaScript</a></li>
      
        <li><a href="https://developer.mozilla.org/en-US/docs/tag/Method" rel="nofollow">Method</a></li>
      
        <li><a href="https://developer.mozilla.org/en-US/docs/tag/Mozilla" rel="nofollow">Mozilla</a></li>
      
        <li><a href="https://developer.mozilla.org/en-US/docs/tag/Non-standard" rel="nofollow">Non-standard</a></li>
      
        <li><a href="https://developer.mozilla.org/en-US/docs/tag/OSFile.jsm" rel="nofollow">OSFile.jsm</a></li>
      
    </ul>
  </div>


                
                  <div class="contributors-sub">
                    <svg class="icon icon-group" xmlns="http://www.w3.org/2000/svg" width="30" height="28" viewBox="0 0 30 28" aria-hidden="true">
    <path d="M9.266 14a5.532 5.532 0 0 0-4.141 2H3.031C1.468 16 0 15.25 0 13.516 0 12.25-.047 8 1.937 8c.328 0 1.953 1.328 4.062 1.328.719 0 1.406-.125 2.078-.359A7.624 7.624 0 0 0 7.999 10c0 1.422.453 2.828 1.266 4zM26 23.953C26 26.484 24.328 28 21.828 28H8.172C5.672 28 4 26.484 4 23.953 4 20.422 4.828 15 9.406 15c.531 0 2.469 2.172 5.594 2.172S20.063 15 20.594 15C25.172 15 26 20.422 26 23.953zM10 4c0 2.203-1.797 4-4 4S2 6.203 2 4s1.797-4 4-4 4 1.797 4 4zm11 6c0 3.313-2.688 6-6 6s-6-2.688-6-6 2.688-6 6-6 6 2.688 6 6zm9 3.516C30 15.25 28.531 16 26.969 16h-2.094a5.532 5.532 0 0 0-4.141-2A7.066 7.066 0 0 0 22 10a7.6 7.6 0 0 0-.078-1.031A6.258 6.258 0 0 0 24 9.328C26.109 9.328 27.734 8 28.062 8c1.984 0 1.937 4.25 1.937 5.516zM28 4c0 2.203-1.797 4-4 4s-4-1.797-4-4 1.797-4 4-4 4 1.797 4 4z"></path>
</svg>
                    <strong>Contributors to this page:</strong>
                    
        <a href="https://developer.mozilla.org/en-US/profiles/mdnwebdocs-bot" rel="nofollow">mdnwebdocs-bot</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/ExE-Boss" rel="nofollow">ExE-Boss</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/kmaglione" rel="nofollow">kmaglione</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/gajananpp" rel="nofollow">gajananpp</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/Yoric" rel="nofollow">Yoric</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/JanH" rel="nofollow">JanH</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/Noitidart" rel="nofollow">Noitidart</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/bgirard_github" rel="nofollow">bgirard_github</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/javier1nc" rel="nofollow">javier1nc</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/gfritzsche" rel="nofollow">gfritzsche</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/kscarfone" rel="nofollow">kscarfone</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/teoli" rel="nofollow">teoli</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/jonco" rel="nofollow">jonco</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/acsakshay" rel="nofollow">acsakshay</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/mikilamb90" rel="nofollow">mikilamb90</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/girly" rel="nofollow">girly</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/Miryafa" rel="nofollow">Miryafa</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/arai" rel="nofollow">arai</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/rvitillo" rel="nofollow">rvitillo</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/diegocr" rel="nofollow">diegocr</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/sshagarwal" rel="nofollow">sshagarwal</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/jukbot" rel="nofollow">jukbot</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/aleth" rel="nofollow">aleth</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/benediktp" rel="nofollow">benediktp</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/Nmaier" rel="nofollow">Nmaier</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/marco-c" rel="nofollow">marco-c</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/sankha93" rel="nofollow">sankha93</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/P.A." rel="nofollow">P.A.</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/darkowlzz" rel="nofollow">darkowlzz</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/JaredWein" rel="nofollow">JaredWein</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/apoirot" rel="nofollow">apoirot</a>
    
                  </div>
                

                
                  <div class="contributors-sub">
                    <svg class="icon icon-clock" xmlns="http://www.w3.org/2000/svg" width="24" height="28" viewBox="0 0 24 28" aria-hidden="true">
    <path d="M14 8.5v7c0 .281-.219.5-.5.5h-5a.494.494 0 0 1-.5-.5v-1c0-.281.219-.5.5-.5H12V8.5c0-.281.219-.5.5-.5h1c.281 0 .5.219.5.5zm6.5 5.5c0-4.688-3.813-8.5-8.5-8.5S3.5 9.313 3.5 14s3.813 8.5 8.5 8.5 8.5-3.813 8.5-8.5zm3.5 0c0 6.625-5.375 12-12 12S0 20.625 0 14 5.375 2 12 2s12 5.375 12 12z"></path>
</svg>
                    <strong>Last updated by:</strong>
                    <a href="https://developer.mozilla.org/en-US/profiles/mdnwebdocs-bot" rel="nofollow">mdnwebdocs-bot</a>,
                    <time datetime="2019-03-23T19:37:20.245350-07:00">Mar 23, 2019, 7:37:20 PM</time>
                  </div>
                
              </div>
            </div>

            
              <!-- quick links and approvals strip -->
              <div id="wiki-left" class="column-strip wiki-column">

                <!-- crumbs -->
                
  
    
  

                
                  <!-- quick links -->
                  
  <div class="quick-links" id="quick-links">
    <div class="quick-links-head">Related Topics</div>
    
<ol>
 <li><strong><a href="https://developer.mozilla.org/en-US/docs/Mozilla">Mozilla</a></strong></li>
 <li><strong><a href="https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules">JavaScript code modules</a></strong></li>
 <li class="toggle">
  <details open=""><summary>General topics</summary>
  <ol>
   <li><a href="../Using.html">Using JavaScript code modules</a></li>
   <li><code><a href="https://developer.mozilla.org/en-US/docs/Components.utils.import">Components.utils.import</a></code></li>
   <li><code><a href="https://developer.mozilla.org/en-US/docs/Components.utils.unload">Components.utils.unload</a></code></li>
   <li><a href="https://developer.mozilla.org/en-US/docs/Code_snippets/Modules">Code snippets: Modules</a></li>
   <li><a rel="noopener" href="https://wiki.mozilla.org/Labs/JS_Modules" class="external">Mozilla Labs JS Modules</a></li>
  </ol>
  </details>
 </li>
 <li class="toggle">
  <details><summary>Reference</summary><ol><li><a href="../Add-on_Manager.html" title="">Add-on Manager</a></li><li><a href="../Add-on_Repository.html" title="">Add-on Repository</a></li><li><a href="../Assert.html" title="The Assert.jsm JavaScript code module implements the CommonJS Unit Testing specification version 1.1, which provides a basic, standardized interface for performing in-code logical assertions with optional, customizable error reporting. To use it, you first need to import the code module into your JavaScript scope:">Assert.jsm</a></li><li><a href="../AsyncShutdown.html" title="Firefox shutdown is composed of phases that take place sequentially. Typically, each shutdown phase removes some capabilities from the application. For instance, at the end of phase profileBeforeChange, no service is permitted to write to the profile directory (with the exception of Telemetry). Consequently, if any service has requested I/O to the profile directory before or during phase profileBeforeChange, the system must be informed that these requests need to be completed before the end of phase profileBeforeChange. Failing to inform the system of this requirement can (and has been known to) cause data loss.">AsyncShutdown.jsm</a></li><li><a href="../CustomizableUI.html" title="The CustomizableUI.jsm JavaScript code module allows you to interact with customizable buttons and items in Firefox's main window UI.">CustomizableUI.jsm</a></li><li><span class="sidebar-icon"><span class="icon-only-inline" title="This API has not been standardized."><i class="icon-warning-sign"> </i></span></span><a href="../DeferredTask.html" title="The DeferredTask.jsm JavaScript code module offers utility routines for a task that will run after a delay. Multiple attempts to run the same task before the delay will be coalesced. To use it, you first need to import the code module into your JavaScript scope:">DeferredTask.jsm</a></li><li><span class="sidebar-icon"><span title="This deprecated API should no longer be used, but will probably still work."><i class="icon-thumbs-down-alt"> </i></span></span><a href="../Dict.html" title="The Dict.jsm JavaScript code module offers routines for managing dictionaries of key/value pairs. To use it, you first need to import the code module into your JavaScript scope:">Dict.jsm</a></li><li><a href="../DownloadLastDir.html" title="The DownloadLastDir.jsm JavaScript code module lets you retrieve the path of the last directory into which a download occurred.">DownloadLastDir.jsm</a></li><li><a href="../Downloads.html" title="The Downloads.jsm JavaScript code module provides a single entry point to interact with the downloading capabilities of the platform, including starting new downloads, controlling ongoing downloads, and retrieving download-related configuration. To use it, you first need to import the code module into your JavaScript scope:">Downloads.jsm</a></li><li><a href="../FileUtils.html" title="The FileUtils.jsm JavaScript code module offers utility routines dealing with files. To use it, you first need to import the code module into your JavaScript scope:">FileUtils.jsm</a></li><li><a href="../FxAccountsOAuthClient.html" title="The FxAccountsOAuthClient.jsm JavaScript module provides a way for browser services to authenticate with the Firefox Accounts OAuth server.">FxAccountsOAuthClient.jsm</a></li><li><a href="../FxAccountsProfileClient.html" title="The FxAccountsProfileClient.jsm JavaScript module provides a way to fetch Firefox Accounts profile information. The modules uses the Firefox Profiler Server API.">FxAccountsProfileClient.jsm</a></li><li><a href="../Geometry.html" title="The Geometry.jsm JavaScript code module provides routines for performing common geometry operations on points and rectangles. It exports two classes:&nbsp;Point and Rect.">Geometry.jsm</a></li><li><a href="../Http.html" title="Http.jsm provides httpRequest - a wrapper for XMLHttpRequest that provides convenient and simplified API for dealing with HTTP requests.">Http.jsm</a></li><li><a href="../ISO8601DateUtils.html" title="The ISO8601DateUtils.jsm JavaScript code module provides methods that make it easy to convert JavaScript Date objects into ISO&nbsp;8601 format date strings and back.">ISO8601DateUtils.jsm</a></li><li><a href="../Interfacing_with_the_Add-on_Repository.html" title="The Add-on Repository JavaScript code module makes it easy for your extension to interface with the AMO&nbsp;repository. You an use the code module to get lists of add-ons and even install new add-ons. This article provides some sample code that queries the recommended add-ons list on AMO and lets the user click a button to install an add-on from the list.">Interfacing with the Add-on Repository</a></li><li><a href="../JNI.html" title="The JNI.jsm JavaScript code module abstracts all of the js-ctypes required for writing JNI code. To use it, you first need to import the code module into your JavaScript scope:">JNI.jsm</a></li><li><a href="../JavaScript_OS.html" title="The JavaScript OS module contains tools that allow chrome content (i.e. platform and add-ons) to interact with the host operating system.">JavaScript OS</a></li><li><a href="../JavaScript_OS-2.html" title="JavaScript module OS.Constants contains Operating System-specific constants. This module is largely a companion to js-ctypes.">JavaScript OS.Constants</a></li><li><a href="../Log.html" title="The Log.jsm JavaScript code module (formerly named log4moz.js) provides a log4j style API for logging log messages to various endpoints, such as the Browser Console or a file on disk. To use it, you first need to import the code module into your JavaScript scope:">Log.jsm</a></li><li><a href="../NetUtil.html" title="The NetUtil.jsm JavaScript code module provides easy-to-use APIs for performing common network related tasks.">NetUtil.jsm</a></li><li><a href="../OSFile.html" title="JavaScript module OS.File contains primitives for manipulating files out of the main thread.">OSFile.jsm</a></li><li><a href="../PerfMeasurement.html" title="The PerfMeasurement.jsm JavaScript code module lets you take detailed performance measurements of your code.">PerfMeasurement.jsm</a></li><li><a href="../PopupNotifications.html" title="The PopupNotifications.jsm JavaScript code module provides a popup notification box service. This service is used, for example, to display Geolocation related notifications.">PopupNotifications.jsm</a></li><li><a href="../Promise.html" title="The Promise.jsm JavaScript code module implements the Promises/A+ proposal as known in April 2013.">Promise.jsm</a></li><li><a href="../PromiseUtils.html" title="The PromiseUtils.jsm JavaScript code module offers some useful functions related to DOM Promise. To use it, you first need to import the code module into your JavaScript scope:">PromiseUtils.jsm</a></li><li><a href="../PromiseWorker.html" title="A PromiseWorker is a ChromeWorker except instead of calling postMessage() to send a message, you call post(), which returns a Promise. JavaScript files imported into the worker scope and main thread scope which allows posting to the worker and receiving in the form of a promise. Like&nbsp;ChromeWorker objects, PromiseWorker is mostly used for js-ctypes but it is not limited to that. There is no XPCOM access, similar to ChromeWorker. This answers the question &quot;When should I use a PromiseWorker?&quot;, and the answer is, whenever you would normally use a ChromeWorker, but want postMessage to return promises.">PromiseWorker.jsm</a></li><li><a href="../Services.html" title="The Services.jsm JavaScript code module offers a wide assortment of lazy getters that simplify the process of obtaining references to commonly used services.">Services.jsm</a></li><li><a href="../SourceMap.html" title="Get a reference to the module:">SourceMap.jsm</a></li><li><a href="../Sqlite.html" title="The Sqlite.jsm JavaScript code module is a promise-based wrapper around the Storage/SQLite interface. Sqlite.jsm offers some compelling advantages over the low-level Storage XPCOM interfaces:">Sqlite.jsm</a></li><li><a href="../Task.html" title="The Task.jsm JavaScript code module implements a subset of Task.js to make sequential, asynchronous operations simple, using the power of JavaScript's yield operator. To use it, you first need to import the code module into your JavaScript scope:">Task.jsm</a></li><li><a href="../Timer.html" title="The Timer.jsm JavaScript code module contains pure-JavaScript implementations of setTimeout, clearTimeout, setInterval, and clearInterval that are compatible with the DOM window functions, but that can be used by code that does not have access to a DOM window (for example, JavaScript code modules or content frame scripts).">Timer.jsm</a></li><li><a href="../Using.html" title="JavaScript code modules are a concept introduced in Gecko&nbsp;1.9 and can be used for sharing code between different privileged scopes. Modules can also be used to create global JavaScript singletons that previously required using JavaScript XPCOM objects. A JavaScript code module is simply some JavaScript code located in a registered location. The module is loaded into a specific JavaScript scope, such as XUL script or JavaScript XPCOM script, using Components.utils.import() or Components.utils[&quot;import&quot;]().">Using JavaScript code modules</a></li><li><a href="../Using_the_Source_Editor_API.html" title="Obviously a work in progress.">Using the Source Editor API</a></li><li><a href="../Using_workers_in_JavaScript_code_modules.html" title="You can do so by using ChromeWorker instead of the standard Worker object. It works exactly like a standard Worker, except that it has access to js-ctypes via a global ctypes object available in the global scope of the worker">Using workers in JavaScript code modules</a></li><li><a href="../WebChannel.html" title="The WebChannel.jsm JavaScript code module provides&nbsp;an abstraction that uses the Message Manager and Custom Events&nbsp;APIs to create a two-way communication channel between chrome and content code for specific origins (using a specific origin passed to the constructor or a lookup with nsIPermissionManager while also ensuring the scheme is HTTPS).">WebChannel.jsm</a></li><li><a href="../WebRequest.html" title="The WebRequest module provides an API to add event listeners for the various stages of making an HTTP request">WebRequest.jsm</a></li><li><a href="../Webapps.html" title="The Webapps.jsm modules exposes the DOMApplicationRegistry, which is responsible for managing all of the Open Web Apps.">Webapps.jsm</a></li><li><a href="../XPCOMUtils.html" title="The XPCOMUtils.jsm JavaScript code module offers utility routines for JavaScript components loaded by the JavaScript component loader.">XPCOMUtils.jsm</a></li><li><a href="../openLocationLastURL.html" title="The openLocationLastURL.jsm JavaScript code module lets you set and retrieve the URL&nbsp;most recently opened using the &quot;Open Location&quot; option in the File menu.">openLocationLastURL.jsm</a></li><li><a href="../source-editor.html" title="The source-editor.jsm JavaScript code module implements an editor specifically tailored for editing source code; its primary purpose is to provide support for web developer tools to display and edit web site code. The editor provided is Eclipse Orion.">source-editor.jsm</a></li></ol></details>
 </li>
</ol>

  </div>
                

                <!-- approvals -->
                

              </div>
            
          </div>
        </div>
      </div>
    </div> <!-- ends "main-content" -->

    
      <div class="newsletter-box">
        <div class="newsletter">
    <form id="newsletterForm" class="newsletter-form nodisable" name="newsletter-form" action="https://www.mozilla.org/en-US/newsletter/" method="post">
        <div class="newsletter-head">
            <h2 class="newsletter-teaser">Learn the best of web development</h2>
            <p class="newsletter-description">Get the latest and greatest from MDN delivered straight to your inbox.</p>
            
        </div>

        <div class="newsletter-fields">
            <input type="hidden" id="fmt" name="fmt" value="H">
            <input type="hidden" id="newsletterNewslettersInput" name="newsletters" value="app-dev">
            <div id="newsletterErrors" class="newsletter-errors"></div>

            <div id="newsletterEmail" class="form-group newsletter-group-email">
                <label for="newsletterEmailInput" class="form-label offscreen">E-mail</label>
                <input type="email" id="newsletterEmailInput" name="email" class="form-input newsletter-input-email" required="" placeholder="you@example.com" size="30">
            </div>

            <div id="newsletterPrivacy" class="form-group form-group-agree newsletter-group-privacy hidden">
                <input type="checkbox" id="newsletterPrivacyInput" name="privacy" required="">
                <label for="newsletterPrivacyInput">
                I'm okay with Mozilla handling my info as explained in this <a href="https://www.mozilla.org/privacy/">Privacy Policy</a>.
                </label>
            </div>
            <div id="newsletterSubmit" class="newsletter-group-submit">
                <button id="newsletter-submit" type="submit" class="button neutral newsletter-submit">
                    Sign up now<svg class="icon icon-arrow" xmlns="http://www.w3.org/2000/svg" width="23" height="28" viewBox="0 0 23 28" aria-hidden="true">
    <path d="M23 15a2.01 2.01 0 0 1-.578 1.422L12.25 26.594c-.375.359-.891.578-1.422.578s-1.031-.219-1.406-.578L8.25 25.422c-.375-.375-.594-.891-.594-1.422s.219-1.047.594-1.422L12.828 18h-11C.703 18 0 17.062 0 16v-2c0-1.062.703-2 1.828-2h11L8.25 7.406a1.96 1.96 0 0 1 0-2.812l1.172-1.172c.375-.375.875-.594 1.406-.594s1.047.219 1.422.594l10.172 10.172c.375.359.578.875.578 1.406z"></path>
</svg>
                </button>
            </div>
        </div>
    </form>
    <div id="newsletterThanks" class="newsletter-thanks hidden">
        <h2>Thanks! Please check your inbox to confirm your subscription.</h2>
        <p>If you haven’t previously confirmed a subscription to a Mozilla-related newsletter you may have to do so. Please check your inbox or your spam filter for an email from us.
        </p>
    </div>
    <button id="newsletterHide" type="button" class="only-icon newsletter-hide hidden">
        <span>Hide Newsletter Sign-up</span>
        <svg class="icon icon-close" xmlns="http://www.w3.org/2000/svg" width="22" height="28" viewBox="0 0 22 28" aria-hidden="true" role="img"><title></title><path d="M20.281 20.656c0 .391-.156.781-.438 1.062l-2.125 2.125c-.281.281-.672.438-1.062.438s-.781-.156-1.062-.438L11 19.249l-4.594 4.594c-.281.281-.672.438-1.062.438s-.781-.156-1.062-.438l-2.125-2.125c-.281-.281-.438-.672-.438-1.062s.156-.781.438-1.062L6.751 15l-4.594-4.594c-.281-.281-.438-.672-.438-1.062s.156-.781.438-1.062l2.125-2.125c.281-.281.672-.438 1.062-.438s.781.156 1.062.438L11 10.751l4.594-4.594c.281-.281.672-.438 1.062-.438s.781.156 1.062.438l2.125 2.125c.281.281.438.672.438 1.062s-.156.781-.438 1.062L15.249 15l4.594 4.594c.281.281.438.672.438 1.062z"></path></svg>
    </button>
</div>
      </div>
    

  <menu type="context" id="edit-history-menu">
    <menuitem data-action="/en-US/users/signin?next=/en-US/docs/Mozilla/JavaScript_code_modules/OSFile.jsm/OS.File_for_the_main_thread%24edit" label="Edit page"></menuitem>
    <menuitem data-action="/en-US/docs/Mozilla/JavaScript_code_modules/OSFile.jsm/OS.File_for_the_main_thread$history" label="View page history"></menuitem>
  </menu>

      </div>
  </main>

  <!-- Footer -->
    <footer id="nav-footer" class="nav-footer"><div class="center"><a href="http://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/OSFile.jsm/OS.File_for_the_main_thread">OS.File for the main thread</a> by <a href="http://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/OSFile.jsm/OS.File_for_the_main_thread$history">Mozilla Contributors</a> is licensed under <a href="http://creativecommons.org/licenses/by-sa/2.5/" class="external external-icon">CC-BY-SA 2.5</a>.</div></footer> 

  <!-- site js -->
  
    
    <!--[if lte IE 8]><script async="" type="text/javascript" src=".selectivizr.8bb9e662e963.js" charset="utf-8"></script><![endif]-->

    
    <script src="../../../../../static/jsi18n/en-US/javascript.414b87adc480.js"></script>
    <script type="text/javascript" src="../../../../../static/build/js/main.07c77248863e.js" charset="utf-8"></script>
    <script>
    if (window.mdn && mdn.analytics) mdn.analytics.trackOutboundLinks();
  </script>
    
  
    <script async="" type="text/javascript" src="../../../../../static/build/js/syntax-prism.js" charset="utf-8"></script><script type="text/javascript" src=".selectivizr.8bb9e662e963.js" charset="utf-8"></script><!--[endif]---->

    
    <script src="../../../../../static/jsi18n/en-US/javascript.414b87adc480.js"></script>
    <script type="text/javascript" src="../../../../../static/build/js/main.07c77248863e.js" charset="utf-8"></script>
    <script>
    if (window.mdn && mdn.analytics) mdn.analytics.trackOutboundLinks();
  </script>
    
  
    <script async="" type="text/javascript" src="../../../../../static/build/js/wiki.c63623e4caba.js" charset="utf-8" id="wikiscript"></script>


  

  

  

  
    <script async="" type="text/javascript" src="../../../../../static/build/js/newsletter.a85c5c2892e5.js" charset="utf-8"></script>
  




<!-- Mirrored from developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/OSFile.jsm/OS.File_for_the_main_thread by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 02 May 2019 03:24:03 GMT -->
</body></html>