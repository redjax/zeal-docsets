<html><!-- Mirrored from developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API/Using_Service_Workers by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 01 May 2019 23:19:18 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->

  <meta charset="utf-8">

  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  <script async="" src="../../../../../../www.google-analytics.com/analytics.js"></script><script>(function(d) { d.className = d.className.replace(/\bno-js/, ''); })(document.documentElement);</script>
  <title>Using Service Workers</title>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="index, follow">

  
<link rel="preload" href="../../../../../static/fonts/locales/ZillaSlab-Regular.subset.bbc33fb47cf6.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="home" href="https://developer.mozilla.org/en-US/">
    <link rel="license" href="#license">
  

  
    
    

    <link href="../../../../../static/build/styles/mdn.8634e046f072.css" rel="stylesheet" type="text/css">

    
  
    <link href="../../../../../static/build/styles/wiki.d451415ae2dd.css" rel="stylesheet" type="text/css">


    

  <link href="../../../../../static/build/styles/locale-en-US.520ecdcaef8c.css" rel="stylesheet" type="text/css">

  
    
  

  
    <script>
    // util for setting performance marks and mesaures
    var mdn=window.mdn||{};mdn.perf={getDuration:function(e){"use strict";if(void 0!==performance.getEntriesByName)return performance.getEntriesByName(e)[0].duration;console.error("performance.getEntriesByName is not supported by your user-agent")},setMark:function(e){"use strict";if(void 0!==performance.mark)try{performance.mark(e)}catch(e){console.error("Error while setting performance mark: ",e)}else console.error("performance.mark is not supported by your user-agent")},setMeasure:function(e){"use strict";void 0!==performance.measure?performance.measure(e.measureName,e.startMark,e.endMark):console.error("performance.measure is not supported by your user-agent")}};
    /* util specifically for postMessages sent from the
       `head` of the interactive examples iframe */
    function handlePerfMarks(e){e.measureName?(window.mdn.perf.setMark(e.markName),window.mdn.perf.setMeasure({measureName:e.measureName,startMark:e.startMark,endMark:e.endMark}),ga&&ga.create&&ga("send",{hitType:"timing",timingCategory:"RUM - Interactive Examples",timingVar:e.measureName,timingValue:window.mdn.perf.getDuration(e.measureName)||0})):window.mdn.perf.setMark(e.markName)}function perfMsgHandler(e){"use strict";var a=window.mdn.interactiveEditor.editorUrl||"https://interactive-examples.mdn.mozilla.net",r=e.data;if(e.origin!==a)return!1;r.markName&&-1<r.markName.indexOf("interactive-editor-")&&handlePerfMarks(r)}window.addEventListener("message",perfMsgHandler,!1);
</script>

    <!-- common social tags -->
    
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://developer.mozilla.org/static/img/opengraph-logo.72382e605ce3.png">
    <meta property="og:site_name" content="MDN Web Docs">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:image" content="https://developer.mozilla.org/static/img/opengraph-logo.72382e605ce3.png">
    <meta name="twitter:site" content="@MozDevNet">
    <meta name="twitter:creator" content="@MozDevNet">
    <link rel="search" type="application/opensearchdescription+xml" href="https://developer.mozilla.org/en-US/search/xml" title="MDN Web Docs">
    
  
  <!-- third-generation iPad with high-resolution Retina display: -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../../../../static/img/favicon144.e7e21ca263ca.png">
  <!-- iPhone with high-resolution Retina display: -->
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../../../../static/img/favicon114.d526f38b09c5.png">
  <!-- first- and second-generation iPad: -->
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../../../../static/img/favicon72.cc65d1d762a0.png">
  <!-- non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
  <link rel="apple-touch-icon-precomposed" href="../../../../../static/img/favicon57.de33179910ae.png">
  <!-- basic favicon -->
  <link rel="shortcut icon" href="../../../../../static/img/favicon32.7f3da72dcea1.png">
  <!--[if IE]>
  <meta http-equiv="imagetoolbar" content="no">
  <script async="" type="text/javascript" src=".html5shiv.ae1ac46eaf58.js" charset="utf-8"></script>
  <![endif]-->

  
  <link rel="dns-prefetch" href="../../../../../../interactive-examples.mdn.mozilla.net/index.html" pr="0.75">
  <link rel="preconnect" href="../../../../../../interactive-examples.mdn.mozilla.net/index.html" pr="0.75">

  <link rel="alternate" type="application/json" href="https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API/Using_Service_Workers$json">
  <link rel="canonical" href="Using_Service_Workers.html">

  
  <link rel="alternate" hreflang="en" href="Using_Service_Workers.html" title="Using Service Workers">
  
    
      <link rel="alternate" hreflang="de" href="https://developer.mozilla.org/de/docs/Web/API/Service_Worker_API/Using_Service_Workers" title="Service-Worker benutzen">
    
      <link rel="alternate" hreflang="es" href="https://developer.mozilla.org/es/docs/Web/API/Service_Worker_API/Using_Service_Workers" title="Usando Service Workers">
    
      <link rel="alternate" hreflang="fr" href="https://developer.mozilla.org/fr/docs/Web/API/Service_Worker_API/Using_Service_Workers" title="Utiliser les Service Workers">
    
      <link rel="alternate" hreflang="id" href="https://developer.mozilla.org/id/docs/Web/API/Service_Worker_API/Using_Service_Workers" title="Menggunakan Service Workers">
    
      <link rel="alternate" hreflang="ja" href="https://developer.mozilla.org/ja/docs/Web/API/ServiceWorker_API/Using_Service_Workers" title="Service worker の使用">
    
      <link rel="alternate" hreflang="ko" href="https://developer.mozilla.org/ko/docs/Web/API/Service_Worker_API/Using_Service_Workers" title="Using Service Workers">
    
      <link rel="alternate" hreflang="pt" href="https://developer.mozilla.org/pt-BR/docs/Web/API/Service_Worker_API/Using_Service_Workers" title="Usando Service Workers">
    
      <link rel="alternate" hreflang="ru" href="https://developer.mozilla.org/ru/docs/Web/API/Service_Worker_API/Using_Service_Workers" title="Использование Service Worker">
    
      <link rel="alternate" hreflang="zh" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Service_Worker_API/Using_Service_Workers" title="使用 Service Workers">
    
  

  <!-- document-specific social tags -->
  <meta property="og:title" content="Using Service Workers">
  <meta property="og:url" content="https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API/Using_Service_Workers">
  <meta name="twitter:url" content="https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API/Using_Service_Workers">
  <meta name="twitter:title" content="Using Service Workers">
  
  <meta property="og:description" content="One overriding problem that web users have suffered with for years is loss of connectivity. The best web app in the world will provide a terrible user experience if you can’t download it. There have been various attempts to create technologies to solve this problem, as our Offline page shows, and some of the issues have been solved. But the overriding problem is that there still isn’t a good overall control mechanism for asset caching and custom network requests.

The previous attempt — AppCache — seemed to be a good idea because it allowed you to specify assets to cache really easily. However, it made many assumptions about what you were trying to do and then broke horribly when your app didn’t follow those assumptions exactly. Read Jake Archibald's Application Cache is a Douchebag for more details.">
  <meta name="description" content="One overriding problem that web users have suffered with for years is loss of connectivity. The best web app in the world will provide a terrible user experience if you can’t download it. There have been various attempts to create technologies to solve this problem, as our Offline page shows, and some of the issues have been solved. But the overriding problem is that there still isn’t a good overall control mechanism for asset caching and custom network requests.

The previous attempt — AppCache — seemed to be a good idea because it allowed you to specify assets to cache really easily. However, it made many assumptions about what you were trying to do and then broke horribly when your app didn’t follow those assumptions exactly. Read Jake Archibald's Application Cache is a Douchebag for more details.">
  <meta name="twitter:description" content="One overriding problem that web users have suffered with for years is loss of connectivity. The best web app in the world will provide a terrible user experience if you can’t download it. There have been various attempts to create technologies to solve this problem, as our Offline page shows, and some of the issues have been solved. But the overriding problem is that there still isn’t a good overall control mechanism for asset caching and custom network requests.

The previous attempt — AppCache — seemed to be a good idea because it allowed you to specify assets to cache really easily. However, it made many assumptions about what you were trying to do and then broke horribly when your app didn’t follow those assumptions exactly. Read Jake Archibald's Application Cache is a Douchebag for more details.">
  

</head>
<body data-slug="Web/API/Service_Worker_API/Using_Service_Workers" contextmenu="edit-history-menu" data-search-url="" class="document">

  <script>
    // make sure global mdn object exists
    var mdn = window.mdn || {};

    (function(win) {
        'use strict';

        (function(){
  var FLAGS = {
    'kumaediting': false,'page_move': false,'section_edit': false,'spam_checks_enabled': true,'spam_submissions_enabled': false,'spam_admin_override': false,'spam_spammer_override': false,'spam_testing_mode': false,'sg_task_completion': false,'contrib_beta': false,'recurring_payment_beta': false
    },
    SWITCHES = {
    'welcome_email': true,'application_ACAO': true,'store_revision_ips': true,'foundation_callout': false,'helpful-survey-2': true,'wiki_spam_training': true,'registration_disabled': false
    },
    SAMPLES = {
    
    };
  window.waffle = {
    "flag_is_active": function waffle_flag(flag_name) {
      
      return !!FLAGS[flag_name];
    },
    "switch_is_active": function waffle_switch(switch_name) {
      
      return !!SWITCHES[switch_name];
    },
    "sample_is_active": function waffle_sample(sample_name) {
      
      return !!SAMPLES[sample_name];
    },
    "FLAGS": FLAGS,
    "SWITCHES": SWITCHES,
    "SAMPLES": SAMPLES
  };
})();

        // This needs to be set before ckeditor.js loads
        window.CKEDITOR_BASEPATH = 'https://developer.mozilla.org/static/js/libs/ckeditor4/build/ckeditor/';

        // Site configuration
        win.mdn.ckeditor = {};
        win.mdn.features = {};
        win.mdn.siteUrl = 'https://developer.mozilla.org/';
        win.mdn.wikiSiteUrl = 'https://wiki.developer.mozilla.org/';
        win.mdn.staticPath = 'https://developer.mozilla.org/static/';
        win.mdn.wiki = {
            autosuggestTitleUrl: '/en-US/docs/get-documents'
        };
        win.mdn.assets_disabled = {
            css: {
                'editor-content': ['https://developer.mozilla.org/static/build/styles/editor-content.c9f73a799d9a.css','../../../../../static/build/styles/editor-locale-en-US.520ecdcaef8c.css',
                ],

                'wiki-compat-tables': ['https://developer.mozilla.org/static/build/styles/wiki-compat-tables.eef64bf9b6fe.css',]
            },
            js: {
                'syntax-prism': ['https://developer.mozilla.org/static/build/js/syntax-prism.f016806edde4.js',],
                'wiki-compat-tables': ['https://developer.mozilla.org/static/build/js/syntax-prism.js" charset="utf-8"></script><script type="text/javascript" src=".html5shiv.ae1ac46eaf58.js" charset="utf-8"></script>
  <!--[endif]---->

  
  <link rel="dns-prefetch" href="../../../../../../interactive-examples.mdn.mozilla.net/index.html" pr="0.75">
  <link rel="preconnect" href="../../../../../../interactive-examples.mdn.mozilla.net/index.html" pr="0.75">

  <link rel="alternate" type="application/json" href="https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API/Using_Service_Workers$json">
  <link rel="canonical" href="Using_Service_Workers.html">

  
  <link rel="alternate" hreflang="en" href="Using_Service_Workers.html" title="Using Service Workers">
  
    
      <link rel="alternate" hreflang="de" href="https://developer.mozilla.org/de/docs/Web/API/Service_Worker_API/Using_Service_Workers" title="Service-Worker benutzen">
    
      <link rel="alternate" hreflang="es" href="https://developer.mozilla.org/es/docs/Web/API/Service_Worker_API/Using_Service_Workers" title="Usando Service Workers">
    
      <link rel="alternate" hreflang="fr" href="https://developer.mozilla.org/fr/docs/Web/API/Service_Worker_API/Using_Service_Workers" title="Utiliser les Service Workers">
    
      <link rel="alternate" hreflang="id" href="https://developer.mozilla.org/id/docs/Web/API/Service_Worker_API/Using_Service_Workers" title="Menggunakan Service Workers">
    
      <link rel="alternate" hreflang="ja" href="https://developer.mozilla.org/ja/docs/Web/API/ServiceWorker_API/Using_Service_Workers" title="Service worker の使用">
    
      <link rel="alternate" hreflang="ko" href="https://developer.mozilla.org/ko/docs/Web/API/Service_Worker_API/Using_Service_Workers" title="Using Service Workers">
    
      <link rel="alternate" hreflang="pt" href="https://developer.mozilla.org/pt-BR/docs/Web/API/Service_Worker_API/Using_Service_Workers" title="Usando Service Workers">
    
      <link rel="alternate" hreflang="ru" href="https://developer.mozilla.org/ru/docs/Web/API/Service_Worker_API/Using_Service_Workers" title="Использование Service Worker">
    
      <link rel="alternate" hreflang="zh" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Service_Worker_API/Using_Service_Workers" title="使用 Service Workers">
    
  

  <!-- document-specific social tags -->
  <meta property="og:title" content="Using Service Workers">
  <meta property="og:url" content="https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API/Using_Service_Workers">
  <meta name="twitter:url" content="https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API/Using_Service_Workers">
  <meta name="twitter:title" content="Using Service Workers">
  
  <meta property="og:description" content="One overriding problem that web users have suffered with for years is loss of connectivity. The best web app in the world will provide a terrible user experience if you can’t download it. There have been various attempts to create technologies to solve this problem, as our Offline page shows, and some of the issues have been solved. But the overriding problem is that there still isn’t a good overall control mechanism for asset caching and custom network requests.

The previous attempt — AppCache — seemed to be a good idea because it allowed you to specify assets to cache really easily. However, it made many assumptions about what you were trying to do and then broke horribly when your app didn’t follow those assumptions exactly. Read Jake Archibald's Application Cache is a Douchebag for more details.">
  <meta name="description" content="One overriding problem that web users have suffered with for years is loss of connectivity. The best web app in the world will provide a terrible user experience if you can’t download it. There have been various attempts to create technologies to solve this problem, as our Offline page shows, and some of the issues have been solved. But the overriding problem is that there still isn’t a good overall control mechanism for asset caching and custom network requests.

The previous attempt — AppCache — seemed to be a good idea because it allowed you to specify assets to cache really easily. However, it made many assumptions about what you were trying to do and then broke horribly when your app didn’t follow those assumptions exactly. Read Jake Archibald's Application Cache is a Douchebag for more details.">
  <meta name="twitter:description" content="One overriding problem that web users have suffered with for years is loss of connectivity. The best web app in the world will provide a terrible user experience if you can’t download it. There have been various attempts to create technologies to solve this problem, as our Offline page shows, and some of the issues have been solved. But the overriding problem is that there still isn’t a good overall control mechanism for asset caching and custom network requests.

The previous attempt — AppCache — seemed to be a good idea because it allowed you to specify assets to cache really easily. However, it made many assumptions about what you were trying to do and then broke horribly when your app didn’t follow those assumptions exactly. Read Jake Archibald's Application Cache is a Douchebag for more details.">
  




  <script>
    // make sure global mdn object exists
    var mdn = window.mdn || {};

    (function(win) {
        'use strict';

        (function(){
  var FLAGS = {
    'kumaediting': false,'page_move': false,'section_edit': false,'spam_checks_enabled': true,'spam_submissions_enabled': false,'spam_admin_override': false,'spam_spammer_override': false,'spam_testing_mode': false,'sg_task_completion': false,'contrib_beta': false,'recurring_payment_beta': false
    },
    SWITCHES = {
    'welcome_email': true,'application_ACAO': true,'store_revision_ips': true,'foundation_callout': false,'helpful-survey-2': true,'wiki_spam_training': true,'registration_disabled': false
    },
    SAMPLES = {
    
    };
  window.waffle = {
    "flag_is_active": function waffle_flag(flag_name) {
      
      return !!FLAGS[flag_name];
    },
    "switch_is_active": function waffle_switch(switch_name) {
      
      return !!SWITCHES[switch_name];
    },
    "sample_is_active": function waffle_sample(sample_name) {
      
      return !!SAMPLES[sample_name];
    },
    "FLAGS": FLAGS,
    "SWITCHES": SWITCHES,
    "SAMPLES": SAMPLES
  };
})();

        // This needs to be set before ckeditor.js loads
        window.CKEDITOR_BASEPATH = 'https://developer.mozilla.org/static/js/libs/ckeditor4/build/ckeditor/';

        // Site configuration
        win.mdn.ckeditor = {};
        win.mdn.features = {};
        win.mdn.siteUrl = 'https://developer.mozilla.org/';
        win.mdn.wikiSiteUrl = 'https://wiki.developer.mozilla.org/';
        win.mdn.staticPath = 'https://developer.mozilla.org/static/';
        win.mdn.wiki = {
            autosuggestTitleUrl: '/en-US/docs/get-documents'
        };
        win.mdn.assets_disabled = {
            css: {
                'editor-content': ['https://developer.mozilla.org/static/build/styles/editor-content.c9f73a799d9a.css','../../../../../static/build/styles/editor-locale-en-US.520ecdcaef8c.css',
                ],

                'wiki-compat-tables': ['https://developer.mozilla.org/static/build/styles/wiki-compat-tables.eef64bf9b6fe.css',]
            },
            js: {
                'syntax-prism': ['https://developer.mozilla.org/static/build/js/syntax-prism.f016806edde4.js',],
                'wiki-compat-tables': ['https://developer.mozilla.org/static/build/js/wiki-compat-tables.3a4ab2cc8ca1.js',]
            }
        };

        win.mdn.notifications = [];
        win.mdn.contributions = {
            enabled: true,
            popup: false
        };

        

        // interactive editor config
        win.mdn.interactiveEditor = {
            siteUrl: "https://developer.mozilla.org",
            editorUrl: "https://interactive-examples.mdn.mozilla.net"
        };
        win.mdn.langCookieName = "django_language";

    })(this);
</script>
    
    <ul id="nav-access">
  <li><a href="#content" id="skip-main">Skip to main content</a></li>
  <li><a id="skip-language" href="#language">Select language</a></li>
  <li><a href="#q" id="skip-search">Skip to search</a></li>
</ul>

    <!-- Header -->
    <header id="main-header" class="header-main">
      <a href="https://developer.mozilla.org/en-US/" class="logo">MDN Web Docs</a>
      <div class="nav-toolbox-wrapper">
        <nav id="main-nav" class="nav-main" role="navigation">
    <ul>
        <li class="nav-main-item">
            <a href="https://developer.mozilla.org/en-US/docs/Web">Technologies
                <svg class="icon icon-caret-down" xmlns="http://www.w3.org/2000/svg" width="16" height="28" viewBox="0 0 16 28"><path d="M16 11a.99.99 0 0 1-.297.703l-7 7C8.516 18.89 8.265 19 8 19s-.516-.109-.703-.297l-7-7A.996.996 0 0 1 0 11c0-.547.453-1 1-1h14c.547 0 1 .453 1 1z"></path></svg>
            </a>
            <div class="submenu js-submenu" id="nav-tech-submenu">
                <div class="submenu-column">
                  <ul>
                    <li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML">HTML</a></li>
                    <li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS">CSS</a></li>
                    <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript">JavaScript</a></li>
                    <li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide/Graphics">Graphics</a></li>
                    <li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP">HTTP</a></li>
                    <li><a href="../../API.html">APIs / DOM</a></li>
                    <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions">Browser Extensions</a></li>
                    <li><a href="https://developer.mozilla.org/en-US/docs/Web/MathML">MathML</a></li>
                  </ul>
                </div>
            </div>
        </li>
        <li class="nav-main-item">
            <a href="https://developer.mozilla.org/en-US/docs/Learn">References &amp; Guides
                <svg class="icon icon-caret-down" xmlns="http://www.w3.org/2000/svg" width="16" height="28" viewBox="0 0 16 28"><path d="M16 11a.99.99 0 0 1-.297.703l-7 7C8.516 18.89 8.265 19 8 19s-.516-.109-.703-.297l-7-7A.996.996 0 0 1 0 11c0-.547.453-1 1-1h14c.547 0 1 .453 1 1z"></path></svg>
            </a>
            <div class="submenu js-submenu" id="nav-learn-submenu">
                <div class="submenu-column">
                  <ul>
                    <li><a href="https://developer.mozilla.org/en-US/docs/Learn">Learn web development</a></li>
                    <li><a href="https://developer.mozilla.org/en-US/docs/Web/Tutorials">Tutorials</a></li>
                    <li><a href="https://developer.mozilla.org/en-US/docs/Web/Reference">References</a></li>
                    <li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide">Developer Guides</a></li>
                    <li><a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility">Accessibility</a></li>
                    <li><a href="https://developer.mozilla.org/en-US/docs/Games">Game development</a></li>
                    <li><a href="https://developer.mozilla.org/en-US/docs/Web">...more docs</a></li>
                  </ul>
                </div>
            </div>
        </li>
        <li class="nav-main-item">
            <a href="https://developer.mozilla.org/en-US/docs/MDN/Feedback">Feedback
                <svg class="icon icon-caret-down" xmlns="http://www.w3.org/2000/svg" width="16" height="28" viewBox="0 0 16 28"><path d="M16 11a.99.99 0 0 1-.297.703l-7 7C8.516 18.89 8.265 19 8 19s-.516-.109-.703-.297l-7-7A.996.996 0 0 1 0 11c0-.547.453-1 1-1h14c.547 0 1 .453 1 1z"></path></svg>
            </a>
            <div class="submenu js-submenu" id="nav-contact-submenu">
              <div class="submenu-column">
                <ul>
                  <li>
                      <a href="https://support.mozilla.org/">Get Firefox help
                          <svg class="icon icon-external-link" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28" aria-hidden="true"><path d="M22 14.5v5c0 2.484-2.016 4.5-4.5 4.5h-13A4.502 4.502 0 0 1 0 19.5v-13C0 4.016 2.016 2 4.5 2h11c.281 0 .5.219.5.5v1c0 .281-.219.5-.5.5h-11A2.507 2.507 0 0 0 2 6.5v13C2 20.875 3.125 22 4.5 22h13c1.375 0 2.5-1.125 2.5-2.5v-5c0-.281.219-.5.5-.5h1c.281 0 .5.219.5.5zM28 1v8c0 .547-.453 1-1 1a.99.99 0 0 1-.703-.297l-2.75-2.75L13.36 17.14c-.094.094-.234.156-.359.156s-.266-.063-.359-.156l-1.781-1.781c-.094-.094-.156-.234-.156-.359s.063-.266.156-.359L21.048 4.454l-2.75-2.75a.996.996 0 0 1-.297-.703c0-.547.453-1 1-1h8c.547 0 1 .453 1 1z"></path></svg>
                      </a>
                  </li>
                  <li>
                      <a href="https://stackoverflow.com/">Get web development help
                          <svg class="icon icon-external-link" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28" aria-hidden="true"><path d="M22 14.5v5c0 2.484-2.016 4.5-4.5 4.5h-13A4.502 4.502 0 0 1 0 19.5v-13C0 4.016 2.016 2 4.5 2h11c.281 0 .5.219.5.5v1c0 .281-.219.5-.5.5h-11A2.507 2.507 0 0 0 2 6.5v13C2 20.875 3.125 22 4.5 22h13c1.375 0 2.5-1.125 2.5-2.5v-5c0-.281.219-.5.5-.5h1c.281 0 .5.219.5.5zM28 1v8c0 .547-.453 1-1 1a.99.99 0 0 1-.703-.297l-2.75-2.75L13.36 17.14c-.094.094-.234.156-.359.156s-.266-.063-.359-.156l-1.781-1.781c-.094-.094-.156-.234-.156-.359s.063-.266.156-.359L21.048 4.454l-2.75-2.75a.996.996 0 0 1-.297-.703c0-.547.453-1 1-1h8c.547 0 1 .453 1 1z"></path></svg>
                      </a>
                  </li>
                </ul>
                <ul>
                  <li>
                      <a href="https://developer.mozilla.org/en-US/docs/MDN/Community">Join the MDN community</a>
                  </li>
                  <li>
                      <a target="_blank" rel="noopener" href="https://github.com/mdn/sprints/issues/new?template=issue-template.md&amp;projects=mdn/sprints/2&amp;labels=user-report&amp;title=https%3A//developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API/Using_Service_Workers">Report a content problem
                          <svg class="icon icon-external-link" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28" aria-hidden="true"><path d="M22 14.5v5c0 2.484-2.016 4.5-4.5 4.5h-13A4.502 4.502 0 0 1 0 19.5v-13C0 4.016 2.016 2 4.5 2h11c.281 0 .5.219.5.5v1c0 .281-.219.5-.5.5h-11A2.507 2.507 0 0 0 2 6.5v13C2 20.875 3.125 22 4.5 22h13c1.375 0 2.5-1.125 2.5-2.5v-5c0-.281.219-.5.5-.5h1c.281 0 .5.219.5.5zM28 1v8c0 .547-.453 1-1 1a.99.99 0 0 1-.703-.297l-2.75-2.75L13.36 17.14c-.094.094-.234.156-.359.156s-.266-.063-.359-.156l-1.781-1.781c-.094-.094-.156-.234-.156-.359s.063-.266.156-.359L21.048 4.454l-2.75-2.75a.996.996 0 0 1-.297-.703c0-.547.453-1 1-1h8c.547 0 1 .453 1 1z"></path></svg>
                      </a>
                  </li>
                  <li>
                      <a target="_blank" rel="noopener" href="https://bugzilla.mozilla.org/form.mdn">Report a bug
                          <svg class="icon icon-external-link" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28" aria-hidden="true"><path d="M22 14.5v5c0 2.484-2.016 4.5-4.5 4.5h-13A4.502 4.502 0 0 1 0 19.5v-13C0 4.016 2.016 2 4.5 2h11c.281 0 .5.219.5.5v1c0 .281-.219.5-.5.5h-11A2.507 2.507 0 0 0 2 6.5v13C2 20.875 3.125 22 4.5 22h13c1.375 0 2.5-1.125 2.5-2.5v-5c0-.281.219-.5.5-.5h1c.281 0 .5.219.5.5zM28 1v8c0 .547-.453 1-1 1a.99.99 0 0 1-.703-.297l-2.75-2.75L13.36 17.14c-.094.094-.234.156-.359.156s-.266-.063-.359-.156l-1.781-1.781c-.094-.094-.156-.234-.156-.359s.063-.266.156-.359L21.048 4.454l-2.75-2.75a.996.996 0 0 1-.297-.703c0-.547.453-1 1-1h8c.547 0 1 .453 1 1z"></path></svg>
                      </a>
                  </li>
                </ul>
              </div>
          </div>
      </li>
  </ul>
</nav>
        <div id="toolbox" class="toolbox">
  <ul>
    
    <li class="nav-login"><div class="login">
    
        
        <a href="https://developer.mozilla.org/users/github/login/?next=%2Fen-US%2Fdocs%2FWeb%2FAPI%2FService_Worker_API%2FUsing_Service_Workers" class="login-link js-login-link" data-service="GitHub" rel="nofollow">
            Sign in<svg class="icon icon-github" xmlns="http://www.w3.org/2000/svg" width="24" height="28" viewBox="0 0 24 28" aria-label="GitHub" role="img" focusable="false">
    <title>Github</title>
    <path d="M12 2c6.625 0 12 5.375 12 12 0 5.297-3.437 9.797-8.203 11.391-.609.109-.828-.266-.828-.578 0-.391.016-1.687.016-3.297 0-1.125-.375-1.844-.812-2.219 2.672-.297 5.484-1.313 5.484-5.922 0-1.313-.469-2.375-1.234-3.219.125-.313.531-1.531-.125-3.187-1-.313-3.297 1.234-3.297 1.234a11.28 11.28 0 0 0-6 0S6.704 6.656 5.704 6.969c-.656 1.656-.25 2.875-.125 3.187-.766.844-1.234 1.906-1.234 3.219 0 4.594 2.797 5.625 5.469 5.922-.344.313-.656.844-.766 1.609-.688.313-2.438.844-3.484-1-.656-1.141-1.844-1.234-1.844-1.234-1.172-.016-.078.734-.078.734.781.359 1.328 1.75 1.328 1.75.703 2.141 4.047 1.422 4.047 1.422 0 1 .016 1.937.016 2.234 0 .313-.219.688-.828.578C3.439 23.796.002 19.296.002 13.999c0-6.625 5.375-12 12-12zM4.547 19.234c.031-.063-.016-.141-.109-.187-.094-.031-.172-.016-.203.031-.031.063.016.141.109.187.078.047.172.031.203-.031zm.484.532c.063-.047.047-.156-.031-.25-.078-.078-.187-.109-.25-.047-.063.047-.047.156.031.25.078.078.187.109.25.047zm.469.703c.078-.063.078-.187 0-.297-.063-.109-.187-.156-.266-.094-.078.047-.078.172 0 .281s.203.156.266.109zm.656.656c.063-.063.031-.203-.063-.297-.109-.109-.25-.125-.313-.047-.078.063-.047.203.063.297.109.109.25.125.313.047zm.891.391c.031-.094-.063-.203-.203-.25-.125-.031-.266.016-.297.109s.063.203.203.234c.125.047.266 0 .297-.094zm.984.078c0-.109-.125-.187-.266-.172-.141 0-.25.078-.25.172 0 .109.109.187.266.172.141 0 .25-.078.25-.172zm.906-.156c-.016-.094-.141-.156-.281-.141-.141.031-.234.125-.219.234.016.094.141.156.281.125s.234-.125.219-.219z"></path>
</svg>
        </a>
    
</div></li>
  </ul>
</div>
      </div>
      <form id="nav-main-search" action="https://developer.mozilla.org/en-US/search" method="get" role="search" class="nav-main-search">
  <div class="search-wrap">
    <label for="main-q" class="offscreen">Search</label>
    <input type="search" id="main-q" name="q" placeholder="Search" data-value="" value="" aria-hidden="true">
    <span class="search-trigger">
        <svg class="icon icon-search" xmlns="http://www.w3.org/2000/svg" width="26" height="28" viewBox="0 0 26 28" aria-hidden="true">
    <path d="M18 13c0-3.859-3.141-7-7-7s-7 3.141-7 7 3.141 7 7 7 7-3.141 7-7zm8 13c0 1.094-.906 2-2 2a1.96 1.96 0 0 1-1.406-.594l-5.359-5.344a10.971 10.971 0 0 1-6.234 1.937c-6.078 0-11-4.922-11-11s4.922-11 11-11 11 4.922 11 11c0 2.219-.672 4.406-1.937 6.234l5.359 5.359c.359.359.578.875.578 1.406z"></path>
</svg>
    </span>
    <button type="submit" class="offscreen">Search</button>
    <button type="button" id="close-header-search" class="close-header-search transparent">
        <span class="offscreen">Close search</span>
        <svg class="icon icon-close" xmlns="http://www.w3.org/2000/svg" width="22" height="28" viewBox="0 0 22 28" aria-hidden="true" role="img"><title></title><path d="M20.281 20.656c0 .391-.156.781-.438 1.062l-2.125 2.125c-.281.281-.672.438-1.062.438s-.781-.156-1.062-.438L11 19.249l-4.594 4.594c-.281.281-.672.438-1.062.438s-.781-.156-1.062-.438l-2.125-2.125c-.281-.281-.438-.672-.438-1.062s.156-.781.438-1.062L6.751 15l-4.594-4.594c-.281-.281-.438-.672-.438-1.062s.156-.781.438-1.062l2.125-2.125c.281-.281.672-.438 1.062-.438s.781.156 1.062.438L11 10.751l4.594-4.594c.281-.281.672-.438 1.062-.438s.781.156 1.062.438l2.125 2.125c.281.281.438.672.438 1.062s-.156.781-.438 1.062L15.249 15l4.594 4.594c.281.281.438.672.438 1.062z"></path></svg>
    </button>
  </div>
</form>
    </header>  

  <!-- Content will go here -->
  <main id="content">
      
  <!-- heading -->
  <div id="wiki-document-head" class="document-head">
    <div class="center">
      <div class="document-title">
        <h1>Using Service Workers</h1>
      </div>

      <!-- action buttons -->
      <div class="document-actions">
        

  
    
  

  
    
    
        
    
  

  

  <ul class="page-buttons">
      <li>
          <button id="languages-menu" class="transparent" aria-haspopup="true" aria-owns="languages-menu-submenu" aria-expanded="false">
              <svg class="icon icon-language" xmlns="http://www.w3.org/2000/svg" width="24" height="28" viewBox="0 0 24 28" aria-hidden="true">
    <path d="M10.219 16.844c-.031.109-.797-.25-1-.328-.203-.094-1.125-.609-1.359-.766s-1.125-.891-1.234-.938a28.275 28.275 0 0 1-2.094 2.828c-.281.328-1.125 1.391-1.641 1.719-.078.047-.531.094-.594.063.25-.187.969-1.078 1.281-1.437.391-.453 2.25-3.047 2.562-3.641.328-.594 1.312-2.562 1.359-2.75-.156-.016-1.391.406-1.719.516-.313.094-1.172.297-1.234.344-.063.063-.016.25-.047.313s-.313.203-.484.234a1.647 1.647 0 0 1-.734 0c-.203-.047-.391-.25-.438-.328 0 0-.063-.094-.078-.359.187-.063.5-.078.844-.172s1.188-.344 1.641-.5 1.328-.484 1.594-.547c.281-.047.984-.516 1.359-.641s.641-.281.656-.203 0 .422-.016.516c-.016.078-.766 1.547-.875 1.781-.063.125-.5.953-1.203 2.047.25.109.781.328 1 .438.266.125 2.125.906 2.219.938s.266.75.234.875zM7.016 9.25c.047.266-.031.375-.063.438-.156.297-.547.5-.781.594s-.625.187-.938.187c-.141-.016-.422-.063-.766-.406-.187-.203-.328-.75-.266-.688s.516.125.719.078.688-.187.906-.25c.234-.078.703-.203.859-.219.156 0 .281.063.328.266zm10.906 2.016l.984 3.547-2.172-.656zM.609 23.766l10.844-3.625V4.016L.609 7.657v16.109zM20 18.813l1.594.484-2.828-10.266-1.563-.484-3.375 8.375 1.594.484.703-1.719 3.297 1.016zM12.141 3.781l8.953 2.875V.718zM17 24.453l2.469.203-.844 2.5L18 26.125c-1.266.812-2.828 1.437-4.312 1.687-.453.094-.969.187-1.422.187h-1.313c-1.656 0-4.672-.984-5.984-1.937-.094-.078-.125-.141-.125-.25 0-.172.125-.297.281-.297.141 0 .875.453 1.078.547 1.406.703 3.375 1.344 4.953 1.344 1.953 0 3.281-.25 5.063-1.016.516-.234.969-.531 1.453-.797zm7-16.859v16.859c-12.078-3.844-12.094-3.844-12.094-3.844C11.656 20.718.453 24.5.297 24.5a.3.3 0 0 1-.281-.203c0-.016-.016-.031-.016-.047V7.406c.016-.047.031-.125.063-.156.094-.109.219-.141.313-.172.047-.016 1-.328 2.328-.781v-6l8.719 3.094C11.532 3.36 21.251 0 21.392 0c.172 0 .313.125.313.328v6.531z"></path>
</svg>
              <span>Languages</span>
          </button>

        <div class="submenu js-submenu" id="languages-menu-submenu">
          <div class="submenu-column">
            <ul id="translations">
              
                
                
                
                  <li lang="de"><bdi><a rel="internal" href="https://developer.mozilla.org/de/docs/Web/API/Service_Worker_API/Using_Service_Workers" data-locale="de" title="German">Deutsch (de)</a></bdi></li>
                
                  <li lang="es"><bdi><a rel="internal" href="https://developer.mozilla.org/es/docs/Web/API/Service_Worker_API/Using_Service_Workers" data-locale="es" title="Spanish">Español (es)</a></bdi></li>
                
                  <li lang="fr"><bdi><a rel="internal" href="https://developer.mozilla.org/fr/docs/Web/API/Service_Worker_API/Using_Service_Workers" data-locale="fr" title="French">Français (fr)</a></bdi></li>
                
                  <li lang="id"><bdi><a rel="internal" href="https://developer.mozilla.org/id/docs/Web/API/Service_Worker_API/Using_Service_Workers" data-locale="id" title="Indonesian">Bahasa Indonesia (id)</a></bdi></li>
                
                  <li lang="ja"><bdi><a rel="internal" href="https://developer.mozilla.org/ja/docs/Web/API/ServiceWorker_API/Using_Service_Workers" data-locale="ja" title="Japanese">日本語 (ja)</a></bdi></li>
                
                  <li lang="ko"><bdi><a rel="internal" href="https://developer.mozilla.org/ko/docs/Web/API/Service_Worker_API/Using_Service_Workers" data-locale="ko" title="Korean">한국어 (ko)</a></bdi></li>
                
                  <li lang="pt-BR"><bdi><a rel="internal" href="https://developer.mozilla.org/pt-BR/docs/Web/API/Service_Worker_API/Using_Service_Workers" data-locale="pt-BR" title="Portuguese (Brazilian)">Português (do&nbsp;Brasil) (pt-BR)</a></bdi></li>
                
                  <li lang="ru"><bdi><a rel="internal" href="https://developer.mozilla.org/ru/docs/Web/API/Service_Worker_API/Using_Service_Workers" data-locale="ru" title="Russian">Русский (ru)</a></bdi></li>
                
                  <li lang="zh-CN"><bdi><a rel="internal" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Service_Worker_API/Using_Service_Workers" data-locale="zh-CN" title="Chinese (Simplified)">中文 (简体) (zh-CN)</a></bdi></li>
                
              

              
                <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API/Using_Service_Workers$locales" rel="nofollow" id="translations-add">Add a translation</a></li>
              
            </ul>
          </div>
        </div>
      </li>
      
      <li class="page-buttons-edit">
          <a href="https://developer.mozilla.org/en-US/users/signin?next=/en-US/docs/Web/API/Service_Worker_API/Using_Service_Workers%24edit" class="button neutral" id="edit-button" rel="nofollow">
              <svg class="icon icon-pencil" xmlns="http://www.w3.org/2000/svg" width="24" height="28" viewBox="0 0 24 28" aria-hidden="true">
    <path d="M5.672 24l1.422-1.422-3.672-3.672L2 20.328V22h2v2h1.672zm8.172-14.5a.329.329 0 0 0-.344-.344.368.368 0 0 0-.266.109l-8.469 8.469a.366.366 0 0 0-.109.266c0 .203.141.344.344.344a.368.368 0 0 0 .266-.109l8.469-8.469a.366.366 0 0 0 .109-.266zM13 6.5l6.5 6.5-13 13H0v-6.5zM23.672 8c0 .531-.219 1.047-.578 1.406L20.5 12 14 5.5l2.594-2.578c.359-.375.875-.594 1.406-.594s1.047.219 1.422.594l3.672 3.656c.359.375.578.891.578 1.422z"></path>
</svg>
              Edit
          </a>
      </li>
      

        

        <li class="page-buttons-advanced">
            <button id="advanced-menu" class="only-icon" aria-haspopup="true" aria-owns="advanced-menu-submenu" aria-expanded="false">
                <svg class="icon icon-gear" xmlns="http://www.w3.org/2000/svg" width="24" height="28" viewBox="0 0 24 28" aria-hidden="true">
    <path d="M16 14c0-2.203-1.797-4-4-4s-4 1.797-4 4 1.797 4 4 4 4-1.797 4-4zm8-1.703v3.469c0 .234-.187.516-.438.562l-2.891.438a8.86 8.86 0 0 1-.609 1.422c.531.766 1.094 1.453 1.672 2.156.094.109.156.25.156.391s-.047.25-.141.359c-.375.5-2.484 2.797-3.016 2.797a.795.795 0 0 1-.406-.141l-2.156-1.687a9.449 9.449 0 0 1-1.422.594c-.109.953-.203 1.969-.453 2.906a.573.573 0 0 1-.562.438h-3.469c-.281 0-.531-.203-.562-.469l-.438-2.875a9.194 9.194 0 0 1-1.406-.578l-2.203 1.672c-.109.094-.25.141-.391.141s-.281-.063-.391-.172c-.828-.75-1.922-1.719-2.578-2.625a.607.607 0 0 1 .016-.718c.531-.719 1.109-1.406 1.641-2.141a8.324 8.324 0 0 1-.641-1.547l-2.859-.422A.57.57 0 0 1 0 15.705v-3.469c0-.234.187-.516.422-.562l2.906-.438c.156-.5.359-.969.609-1.437a37.64 37.64 0 0 0-1.672-2.156c-.094-.109-.156-.234-.156-.375s.063-.25.141-.359c.375-.516 2.484-2.797 3.016-2.797.141 0 .281.063.406.156L7.828 5.94a9.449 9.449 0 0 1 1.422-.594c.109-.953.203-1.969.453-2.906a.573.573 0 0 1 .562-.438h3.469c.281 0 .531.203.562.469l.438 2.875c.484.156.953.344 1.406.578l2.219-1.672c.094-.094.234-.141.375-.141s.281.063.391.156c.828.766 1.922 1.734 2.578 2.656a.534.534 0 0 1 .109.344c0 .141-.047.25-.125.359-.531.719-1.109 1.406-1.641 2.141.266.5.484 1.016.641 1.531l2.859.438a.57.57 0 0 1 .453.562z"></path>
</svg>
                <span>Advanced</span>
            </button>
            <div class="submenu js-submenu" id="advanced-menu-submenu">
                <!-- this page -->
                <div class="submenu-column">
                    <div class="title">Advanced</div>
                    <ul>
                        <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API/Using_Service_Workers$history" rel="nofollow">History</a></li>
                        
                        
                        


                

                <li class="page-print"><a href="#" onclick="return window.print();">Print this article</a></li>
            </ul>
          </div>
        </div>
  </li></ul>
      </div>
    <nav class="crumbs" role="navigation">
      <ol typeof="BreadcrumbList" vocab="https://schema.org/" aria-label="breadcrumbs">
        
          <li property="itemListElement" typeof="ListItem" class="crumb">
            <a href="https://developer.mozilla.org/en-US/docs/Web" property="item" typeof="WebPage">
              <span property="name">Web technology for developers</span>
            </a>
            <meta property="position" content="1">
          </li>
        
          <li property="itemListElement" typeof="ListItem" class="crumb">
            <a href="../../API.html" property="item" typeof="WebPage">
              <span property="name">Web APIs</span>
            </a>
            <meta property="position" content="2">
          </li>
        
          <li property="itemListElement" typeof="ListItem" class="crumb">
            <a href="../Service_Worker_API.html" property="item" typeof="WebPage">
              <span property="name">Service Worker API</span>
            </a>
            <meta property="position" content="3">
          </li>
        
        <li property="itemListElement" typeof="ListItem" class="crumb">
          <span property="name" aria-current="page">Using Service Workers</span>
        </li>
      </ol>
    </nav></div>
  </div>
  
  <div id="toc" class="toc">
    <div class="center">
      <div class="toc-head">Jump to:</div>
        <ol class="toc-links">
          <li><a href="#The_premise_of_service_workers" rel="internal">The premise of service workers</a></li><li><a href="#Setting_up_to_play_with_service_workers" rel="internal">Setting up to play with service workers</a></li><li><a href="#Basic_architecture" rel="internal">Basic architecture</a></li><li><a href="#Service_workers_demo" rel="internal">Service workers demo</a></li><li><a href="#Enter_service_workers" rel="internal">Enter service workers</a></li><li><a href="#Recovering_failed_requests" rel="internal">Recovering failed requests</a></li><li><a href="#Updating_your_service_worker" rel="internal">Updating your service worker</a></li><li><a href="#Developer_tools" rel="internal">Developer tools</a></li><li><a href="#See_also" rel="internal">See also</a>
        </li></ol>
    </div>
  </div>
  

      <div class="center clear">
      

    <div class="wiki-main-content" id="document-main"><div class="center">
      <!-- start the main content container -->
        <div id="wiki-column-container" class="wiki-left-present">

          <!-- content row with three strips -->
          <div class="column-container column-container-reverse">

            <!-- center: main article content -->
            <div id="wiki-content" class="column-main wiki-column text-content">

              

              
              

              

              
              

              <!-- just the article content -->
              <article id="wikiArticle">
                
                  
                    <p></p><p></p>

<div class="summary">
<p>This article provides information on getting started with service workers, including basic architecture, registering a service worker, the install and activation process for a new service worker, updating your service worker, cache control and custom responses, all in the context of a simple app with offline functionality.&nbsp;</p>
</div>

<a class="dashAnchor" name="//apple_ref/Section/The%20premise%20of%20service%20workers"></a><h2 id="The_premise_of_service_workers">The premise of service workers</h2>

<p>One overriding problem that web users have suffered with for years is loss of connectivity. The best web app in the world will provide a terrible user experience if you can’t download it. There have been various attempts to create technologies to solve this problem, as our <a href="https://developer.mozilla.org/en-US/Apps/Build/Offline">Offline</a> page shows, and some of the issues have been solved. But the overriding problem is that there still isn’t a good overall control mechanism for asset caching and custom network requests.<br>
 <br>
 The previous attempt — <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Using_the_application_cache">AppCache</a> — seemed to be a good idea because it allowed you to specify assets to cache really easily. However, it made many assumptions about what you were trying to do and then broke horribly when your app didn’t follow those assumptions exactly. Read Jake Archibald's <a class="external" href="http://alistapart.com/article/application-cache-is-a-douchebag" rel="noopener">Application Cache is a Douchebag</a> for more details.</p>

<div class="note">
<p><strong>Note</strong>: As of Firefox 44, when <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Using_the_application_cache">AppCache</a> is used to provide offline support for a page a warning message is now displayed in the console advising developers to use <a href="Using_Service_Workers.html">Service workers</a> instead (<a class="external" href="https://bugzilla.mozilla.org/show_bug.cgi?id=1204581" rel="noopener" title="FIXED: Add a deprecation notice for AppCache if service worker fetch interception is enabled">bug&nbsp;1204581</a>.)</p>
</div>

<p>Service workers should finally fix these issues. Service worker syntax is more complex than that of AppCache, but the trade off is that you can use JavaScript to control your AppCache-implied behaviours with a fine degree of granularity, allowing you to handle this problem and many more. Using a Service worker you can easily set an app up to use cached assets first, thus providing a default experience even when offline, before then getting more data from the network (commonly known as <a class="external" href="http://offlinefirst.org/" rel="noopener">Offline First</a>). This is already available with native apps, which is one of the main reasons native apps are often chosen over web apps.</p>

<a class="dashAnchor" name="//apple_ref/Section/Setting%20up%20to%20play%20with%20service%20workers"></a><h2 id="Setting_up_to_play_with_service_workers">Setting up to play with service workers</h2>

<p>Many service workers features are now enabled by default in newer versions of supporting browsers. If however you find that demo code is not working in your installed versions, you might need to enable a pref:</p>

<ul>
 <li><strong>Firefox Nightly</strong>: Go to&nbsp;<code>about:config</code>&nbsp;and set&nbsp;<code>dom.serviceWorkers.enabled</code>&nbsp;to true; restart browser.</li>
 <li><strong>Chrome Canary</strong>: Go to&nbsp;<code>chrome://flags</code>&nbsp;and turn on&nbsp;<code>experimental-web-platform-features</code>; restart browser (note that some features are now enabled by default in Chrome.)</li>
 <li><strong>Opera</strong>: Go to&nbsp;<code>opera://flags</code>&nbsp;and enable&nbsp;<code>Support for ServiceWorker</code>; restart browser.</li>
 <li><strong>Microsoft Edge</strong>: Go to&nbsp;<code>about:flags</code>&nbsp;and tick&nbsp;<code>Enable service workers</code>; restart browser.</li>
</ul>

<p>You’ll also need to serve your code via HTTPS — Service workers are restricted to running across HTTPS for security reasons. GitHub is therefore a good place to host experiments, as it supports HTTPS. In order to facilitate local development,&nbsp;<code>localhost</code>&nbsp;is considered a secure origin by browsers&nbsp;as well.</p>

<a class="dashAnchor" name="//apple_ref/Section/Basic%20architecture"></a><h2 id="Basic_architecture">Basic architecture</h2>

<p>With service workers, the following steps are generally observed for basic set up:</p>

<ol>
 <li>The service worker URL is fetched and registered via <a href="../ServiceWorkerContainer/register.html" title="The register() method of the ServiceWorkerContainer interface creates or updates a ServiceWorkerRegistration for the given scriptURL."><code>serviceWorkerContainer.register()</code></a>.</li>
 <li>If successful, the service worker is executed in a <a href="../ServiceWorkerGlobalScope.html" title="The ServiceWorkerGlobalScope interface of the ServiceWorker API represents the global execution context of a service worker."><code>ServiceWorkerGlobalScope</code></a>; this is basically a special kind of worker context, running off the main script execution thread, with no DOM access.</li>
 <li>The service worker is now ready to process events.</li>
 <li>Installation of the worker is attempted when service worker-controlled pages are accessed subsequently. An Install event is always the first one sent to a service worker (this can be used to start the process of populating an IndexedDB, and caching site assets). This is really the same kind of procedure as installing a native or Firefox OS app — making everything available for use offline.</li>
 <li>When the <code>oninstall</code> handler completes, the service worker is considered installed.</li>
 <li>Next is activation. When the service worker is installed, it then receives an activate event. The primary use of <code>onactivate</code> is for cleanup of resources used in previous versions of a Service worker script.</li>
 <li>The Service worker will now control pages, but only those opened after the <code>register()</code> is successful. i.e. a document starts life with or without a Service worker and maintains that for its lifetime. So documents will have to be reloaded to actually be controlled.</li>
</ol>

<p><img alt="" src="../../../../../../mdn.mozillademos.org/files/12636/sw-lifecycle.png" style="display: block; height: 867px; margin: 0px auto; width: 579px;"></p>

<p>The below graphic shows a summary of the available service worker events:</p>

<p><img alt="install, activate, message, fetch, sync, push" src="../../../../../../mdn.mozillademos.org/files/12632/sw-events.png" style="display: block; margin: 0px auto;"></p>

<h3 id="Promises">Promises</h3>

<p><a href="../../JavaScript/Reference/Global_Objects/Promise.html">Promises</a> are a great mechanism for running async operations, with success dependant on one another. This is central to the way service workers work.<br>
 <br>
 Promises can do a variety&nbsp;of things, but all you need to know for now is that if something returns a promise, you can attach <code>.then()</code> to the end and include callbacks inside it for success cases, or you can insert <code>.catch()</code> on the end if you want to include a failure callback.</p>

<p>Let’s compare a traditional synchronous callback structure to its asynchronous promise equivalent.</p>

<h4 id="sync">sync</h4>

<pre class="brush: js">try {
  var value = myFunction();
  console.log(value);
} catch(err) {
  console.log(err);
}</pre>

<h4 id="async">async</h4>

<pre class="brush: js">myFunction().then(function(value) {
  console.log(value);
}).catch(function(err) {
  console.log(err);
});</pre>

<p>In the first example, we have to wait for <code>myFunction()</code> to run and return <code>value</code> before any more of the code can execute. In the second example, <code>myFunction()</code> returns a promise for <code>value</code>, then the rest of the code can carry on running. When the promise resolves, the code inside <code>then</code> will be run, asynchronously.<br>
 <br>
 Now for a real example — what if we wanted to load images dynamically, but we wanted to make sure the images were loaded before we tried to display them? This is a standard thing to want to do, but it can be a bit of a pain. We can use <code>.onload</code> to only display the image after it’s loaded, but what about events that start happening before we start listening to them? We could try to work around this using <code>.complete</code>, but it’s still not foolproof, and what about multiple images? And, ummm, it’s still synchronous, so blocks the main thread.<br>
 <br>
 Instead, we could build our own promise to handle this kind of case. (See our <a class="external" href="https://github.com/mdn/js-examples/tree/master/promises-test" rel="noopener">Promises test</a> example for the source code, or <a class="external" href="../../../../../../mdn.github.io/js-examples/promises-test/index.html" rel="noopener">look at it running live</a>.)</p>

<p></p><div class="blockIndicator note"><strong>Note:</strong>&nbsp;A real service worker implementation would use caching and onfetch rather than the deprecated XMLHttpRequest API. Those features are not used here so that you can focus on understanding Promises.</div><p></p>

<pre class="brush: js">function imgLoad(url) {
  return new Promise(function(resolve, reject) {      
    var request = new XMLHttpRequest();
    request.open('GET', url);
    request.responseType = 'blob';

    request.onload = function() {
      if (request.status == 200) {
        resolve(request.response);
      } else {
        reject(Error('Image didn\'t load successfully; error code:' + request.statusText));
      }
    };

    request.onerror = function() {
      reject(Error('There was a network error.'));
    };

    request.send();
  });
}</pre>

<p>We return a new promise using the <code>Promise()</code> constructor, which takes as an argument a callback function with <code>resolve</code> and <code>reject</code> parameters. Somewhere in the function, we need to define what happens for the promise to resolve successfully or be rejected — in this case return a 200 OK status or not — and then call <code>resolve</code> on success, or <code>reject</code> on failure. The rest of the contents of this function is fairly standard XHR stuff, so we won’t worry about that for now.</p>

<p>When we come to call the <code>imgLoad()</code> function, we call it with the url to the image we want to load, as we might expect, but the rest of the code is a little different:</p>

<pre class="brush: js">var body = document.querySelector('body');
var myImage = new Image();

imgLoad('myLittleVader.jpg').then(function(response) {
  var imageURL = window.URL.createObjectURL(response);
  myImage.src = imageURL;
  body.appendChild(myImage);
}, function(Error) {
  console.log(Error);
});</pre>

<p>On to the end of the function call, we chain the promise <code>then()</code> method, which contains two functions — the first one is executed when the promise successfully resolves, and the second is called when the promise is rejected. In the resolved case, we display the image inside <code>myImage</code> and append it to the body (it’s argument is the <code>request.response</code> contained inside the promise’s <code>resolve</code> method); in the rejected case we return an error to the console.</p>

<p>This all happens asynchronously.</p>

<div class="note">
<p><strong>Note</strong>: You can also chain promise calls together, for example:<br>
 <code>myPromise().then(success, failure).then(success).catch(failure);</code></p>
</div>

<div class="note">
<p><strong>Note</strong>: You can find a lot more out about promises by reading Jake Archibald’s excellent <a class="external" href="http://www.html5rocks.com/en/tutorials/es6/promises/" rel="noopener">JavaScript Promises: there and back again</a>.</p>
</div>

<a class="dashAnchor" name="//apple_ref/Section/Service%20workers%20demo"></a><h2 id="Service_workers_demo">Service workers demo</h2>

<p>To demonstrate just the very basics of registering and installing a service worker, we have created a simple demo called <a class="external" href="https://github.com/mdn/sw-test" rel="noopener">sw-test</a>, which is a simple Star wars Lego image gallery. It uses a promise-powered function to read image data from a JSON object and load the images using Ajax, before displaying the images in a line down the page. We’ve kept things static and simple for now. It also registers, installs, and activates a service worker, and when more of the spec is supported by browsers it will cache all the files required so it will work offline!</p>

<p><img alt="" src="../../../../../../mdn.mozillademos.org/files/8243/demo-screenshot.png" style="display: block; height: 410px; margin: 0px auto; width: 480px;"><br>
 <br>
 <br>
 You can see the <a class="external" href="https://github.com/mdn/sw-test/" rel="noopener">source code on GitHub</a>, and <a class="external" href="../../../../../../mdn.github.io/sw-test/index.html" rel="noopener">view the example live</a>. The one bit we’ll call out here is the promise (see <a class="external" href="https://github.com/mdn/sw-test/blob/gh-pages/app.js#L22-L47" rel="noopener">app.js lines 22-47</a>), which is a modified version of what you read about above, in the <a class="external" href="../../../../../../mdn.github.io/js-examples/promises-test/index.html" rel="noopener">Promises test demo</a>. It is different in the following ways:</p>

<ol>
 <li>In the original, we only passed in a URL to an image we wanted to load. In this version, we pass in a JSON fragment containing all the data for a single image (see what they look like in <a class="external" href="https://github.com/mdn/sw-test/blob/gh-pages/image-list.js" rel="noopener">image-list.js</a>). This is because all the data for each promise resolve has to be passed in with the promise, as it is asynchronous. If you just passed in the url, and then tried to access the other items in the JSON separately when the <code>for()</code> loop is being iterated through later on, it wouldn’t work, as the promise wouldn’t resolve at the same time as the iterations are being done (that is a synchronous process.)</li>
 <li>We actually resolve the promise with an array, as we want to make the loaded image blob available to the resolving function later on in the code, but also the image name, credits and alt text (see <a class="external" href="https://github.com/mdn/sw-test/blob/gh-pages/app.js#L31-L34" rel="noopener">app.js lines 31-34</a>). Promises will only resolve with a single argument, so if you want to resolve with multiple values, you need to use an array/object.</li>
 <li>To access the resolved promise values, we then access this function as you’d then expect (see <a class="external" href="https://github.com/mdn/sw-test/blob/gh-pages/app.js#L60-L64" rel="noopener">app.js lines 60-64</a>). This may seem a bit odd at first, but this is the way promises work.</li>
</ol>

<a class="dashAnchor" name="//apple_ref/Section/Enter%20service%20workers"></a><h2 id="Enter_service_workers">Enter service workers</h2>

<p>Now let’s get on to service workers!</p>

<h3 id="Registering_your_worker">Registering your worker</h3>

<p>The first block of code in&nbsp;our app’s JavaScript file — <code>app.js</code> — is as follows. This is our entry point into using service workers.</p>

<pre class="brush: js">if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/sw-test/sw.js', {scope: '/sw-test/'})
&nbsp; .then(function(reg) {
    // registration worked
    console.log('Registration succeeded. Scope is ' + reg.scope);
  }).catch(function(error) {
    // registration failed
    console.log('Registration failed with ' + error);
  });
}</pre>

<ol>
 <li>The outer block performs a feature detection test to make sure service workers are supported before trying to register one.</li>
 <li>Next, we use the <a href="../ServiceWorkerContainer/register.html" title="The register() method of the ServiceWorkerContainer interface creates or updates a ServiceWorkerRegistration for the given scriptURL."><code>ServiceWorkerContainer.register()</code></a> function to register the service worker for this site, which is just a JavaScript file residing inside our app (note this is the file's URL relative to the origin, not the JS file that references it.)</li>
 <li>The <code>scope</code> parameter is optional, and can be used to specify the subset of your content that you want the service worker to control. In this case, we have specified '<code>/sw-test/'</code>, which means all content under the app's origin. If you leave it out, it will default to this value anyway, but we specified it here for illustration purposes.</li>
 <li>The <code>.then()</code> promise function is used to chain a success case onto our promise structure. &nbsp;When the promise resolves successfully, the code inside it executes.</li>
 <li>Finally, we chain a <code>.catch()</code> function onto the end that will run if the promise is rejected.</li>
</ol>

<p>This registers a service worker, which runs in a worker context, and therefore has no DOM access. You then run code in the service worker outside of your normal pages&nbsp;to control their loading.<br>
 <br>
 A single service worker can control many pages. Each time a page within your scope is loaded, the service worker is installed against that page and operates on it. Bear in mind therefore that you need to be careful with global variables in the service worker script: each page doesn’t get its own unique worker.</p>

<div class="note">
<p><strong>Note</strong>: Your service worker functions like a proxy server, allowing you to modify requests and responses, replace them with items from its own cache, and more.</p>
</div>

<div class="note">
<p><strong>Note</strong>: One great thing about service workers is that if you use feature detection like we’ve shown above, browsers that don’t support service workers can just use your app online in the normal expected fashion. Furthermore, if you use AppCache and SW on a page, browsers that don’t support SW but do support AppCache will use that, and browsers that support both will ignore the AppCache and let SW take over.</p>
</div>

<h4 id="Why_is_my_service_worker_failing_to_register">Why is my service worker failing to register?</h4>

<p>This could be for the following reasons:</p>

<ol>
 <li>You are not running your application through HTTPS.</li>
 <li>The path to your service worker file is not written correctly — it needs to be written relative to the origin, not your app’s root directory. In our example, the worker is at <code>https://mdn.github.io/sw-test/sw.js</code>, and the app’s root is <code>https://mdn.github.io/sw-test/</code>. But the path needs to be written as <code>/sw-test/sw.js</code>, not <code>/sw.js</code>.</li>
 <li>The service worker being pointed to is on a different origin to that of your app. This is also not allowed.</li>
</ol>

<p><img alt="" src="../../../../../../mdn.mozillademos.org/files/12630/important-notes.png" style="display: block; height: 277px; margin: 0px auto; width: 574px;"></p>

<p>Also note:</p>

<ul>
 <li>The service worker will only catch requests from clients under the service worker's scope.</li>
 <li>The max scope for a service worker is the location of the worker.</li>
 <li>If your server worker is active on a client being served with the <code>Service-Worker-Allowed</code> header, you can specify a list of max scopes for that worker.</li>
 <li>In Firefox, Service Worker APIs are hidden and cannot be used when the user is in <a class="external" href="https://support.mozilla.org/en-US/kb/private-browsing-use-firefox-without-history" rel="noopener">private browsing mode</a>.</li>
</ul>

<h3 id="Install_and_activate_populating_your_cache">Install and activate: populating your cache</h3>

<p>After your service worker is registered, the browser will attempt to install then activate the service worker for your page/site.<br>
 <br>
 The install event is fired when an install is successfully completed. The install event is generally used to populate your browser’s offline caching capabilities with the assets you need to run your app offline. To do this, we use Service Worker’s brand new storage API — <a href="../Cache.html" title="The Cache interface provides a storage mechanism for Request / Response object pairs that are cached, for example as part of the ServiceWorker life cycle. Note that the Cache interface is exposed to windowed scopes as well as workers. You don't have to use it in conjunction with service workers, even though it is defined in the service worker spec."><code>cache</code></a> — a global object on the service worker that allows us to store assets delivered by responses, and keyed by their requests. This API works in a similar way to the browser’s standard cache, but it is specific to your domain. It persists until you tell it not to — again, you have full control.</p>

<div class="note">
<p><strong>Note</strong>: The Cache API is not supported in every&nbsp;browser. (See the <a href="#Browser_compatibility">Browser compatibility</a> section for more information.)&nbsp;If you want&nbsp;to use this now, you could consider using a polyfill like the one available in <a class="external" href="https://github.com/Polymer/topeka/blob/master/sw.js" rel="noopener">Google's Topeka demo</a>, or perhaps store your assets in <a href="../IndexedDB_API.html">IndexedDB</a>.</p>
</div>

<p>Let’s start this section by looking at a code sample — this is the <a class="external" href="https://github.com/mdn/sw-test/blob/gh-pages/sw.js#L1-L18" rel="noopener">first block you’ll find in our service worker</a>:</p>

<pre class="brush: js">self.addEventListener('install', function(event) {
&nbsp; event.waitUntil(
&nbsp;&nbsp;&nbsp; caches.open('v1').then(function(cache) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return cache.addAll([
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; '/sw-test/',
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; '/sw-test/index.html',
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; '/sw-test/style.css',
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; '/sw-test/app.js',
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; '/sw-test/image-list.js',
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; '/sw-test/star-wars-logo.jpg',
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; '/sw-test/gallery/',
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; '/sw-test/gallery/bountyHunters.jpg',
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; '/sw-test/gallery/myLittleVader.jpg',
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; '/sw-test/gallery/snowTroopers.jpg'
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ]);
&nbsp;&nbsp;&nbsp; })
&nbsp; );
});</pre>

<ol>
 <li>Here we add an <code>install</code> event listener to the service worker (hence <code>self</code>), and then chain a <a href="../ExtendableEvent/waitUntil.html" title="The extendableEvent.waitUntil() method tells the event dispatcher that work is ongoing. It can also be used to detect whether that work was successful. In service workers, waitUntil() tells the browser that work is ongoing until the promise settles, and it shouldn't terminate the service worker if it wants that work to complete."><code>ExtendableEvent.waitUntil()</code></a> method onto the event — this ensures that the service worker will not install until the code inside <code>waitUntil()</code> has successfully occurred.</li>
 <li>Inside <code>waitUntil()</code> we use the <a href="../CacheStorage/open.html"><code>caches.open()</code></a> method to create a new cache called <code>v1</code>, which will be version 1 of our site resources cache. This returns a promise for a created cache; once resolved, we then call a function that calls <code>addAll()</code> on the created cache, which for its parameter takes an array of origin-relative URLs to all the resources you want to cache.</li>
 <li>If the promise is rejected, the install fails, and the worker won’t do anything. This is ok, as you can fix your code and then try again the next time registration occurs.</li>
 <li>After a successful installation, the service worker activates. This doesn’t have much of a distinct use the first time your service worker is installed/activated, but it means more when the service worker is updated (see the <a href="#Updating_your_service_worker">Updating your service worker</a> section later on.)</li>
</ol>

<div class="note">
<p><strong>Note</strong>: <a href="../Web_Storage_API.html">localStorage</a> works in a similar way to service worker cache, but it is synchronous, so not allowed in service workers.</p>
</div>

<div class="note">
<p><strong>Note</strong>: <a href="../IndexedDB_API.html">IndexedDB</a> can be used inside a service worker for data storage if you require it.</p>
</div>

<h3 id="Custom_responses_to_requests">Custom responses to requests</h3>

<p>Now you’ve got your site assets cached, you need to tell service workers to do something with the cached content. This is easily done with the <code>fetch</code> event.</p>

<p><img alt="" src="../../../../../../mdn.mozillademos.org/files/12634/sw-fetch.png" style="display: block; margin: 0 auto;"></p>

<p>A <code>fetch</code> event fires every time any resource controlled by a service worker is fetched, which includes the documents inside the specified scope, and any resources referenced in those documents (for example if <code>index.html</code> makes a cross origin request to embed an image, that still goes through its service worker.)</p>

<p>You can attach a <code>fetch</code> event listener to the service worker, then call the <code>respondWith()</code> method on the event to hijack our HTTP responses and update them with your own magic.</p>

<pre class="brush: js">self.addEventListener('fetch', function(event) {
  event.respondWith(
    // magic goes here
  );
});</pre>

<p>We could start by simply responding with the resource whose url matches that of the network request, in each case:</p>

<pre class="brush: js">self.addEventListener('fetch', function(event) {
  event.respondWith(
    caches.match(event.request)
  );
});</pre>

<p><code>caches.match(event.request)</code> allows us to match each resource requested from the network with the equivalent resource available in the cache, if there is a matching one available. The matching is done via url and vary headers, just like with normal HTTP requests.</p>

<p>Let’s look at a few other options we have when defining our magic (see our <a href="../Fetch_API.html">Fetch API documentation</a> for more information about <a href="../Request.html" title="The Request interface of the Fetch API represents a resource request."><code>Request</code></a> and <a href="../Response.html" title="The Response interface of the Fetch API represents the response to a request."><code>Response</code></a> objects.)</p>

<ol>
 <li>
  <p>The <code><a href="../Response/Response.html" title="The Response() constructor creates a new Response object."><code>Response()</code></a></code> constructor allows you to create a custom response. In this case, we are just returning a simple text string:</p>

  <pre class="brush: js">new Response('Hello from your friendly neighbourhood service worker!');</pre>
 </li>
 <li>
  <p>This more complex <code>Response</code> below shows that you can optionally pass a set of headers in with your response, emulating standard HTTP response headers. Here we are just telling the browser what the content type of our synthetic response is:</p>

  <pre class="brush: js">new Response('&lt;p&gt;Hello from your friendly neighbourhood service worker!&lt;/p&gt;', {
  headers: { 'Content-Type': 'text/html' }
});</pre>
 </li>
 <li>
  <p>If a match wasn’t found in the cache, you could tell the browser to simply <a href="../WindowOrWorkerGlobalScope/fetch.html" title="The documentation about this has not yet been written; please consider contributing!"><code>fetch</code></a> the default network request for that resource, to get the new resource from the network if it is available:</p>

  <pre class="brush: js">fetch(event.request);</pre>
 </li>
 <li>
  <p>If a match wasn’t found in the cache, and the network isn’t available, you could just match the request with some kind of default fallback page as a response using <a href="../CacheStorage/match.html" title="The match() method of the CacheStorage interface (available globally as caches) checks if a given Request or url string is a key for a stored&nbsp;Response.&nbsp;This method returns&nbsp;a Promise for a&nbsp;Response, or undefined if no match is found."><code>match()</code></a>, like this:</p>

  <pre class="brush: js">caches.match('/fallback.html');</pre>
 </li>
 <li>
  <p>You can retrieve a lot of information about each request by calling parameters of the <a href="../Request.html" title="The Request interface of the Fetch API represents a resource request."><code>Request</code></a> object returned by the <a href="../FetchEvent.html" title="This is the event type for fetch&nbsp;events dispatched on the&nbsp;service worker global scope. It contains information about the fetch, including the&nbsp;request and how the receiver will treat the response. It provides the event.respondWith() method, which allows us to provide a response to this fetch."><code>FetchEvent</code></a>:</p>

  <pre class="brush: js">event.request.url
event.request.method
event.request.headers
event.request.body</pre>
 </li>
</ol>

<a class="dashAnchor" name="//apple_ref/Section/Recovering%20failed%20requests"></a><h2 id="Recovering_failed_requests">Recovering failed requests</h2>

<p>So <code>caches.match(event.request)</code> is great when there is a match in the service worker cache, but what about cases when there isn’t a match? If we didn’t provide any kind of failure handling, our promise would resolve with <code>undefined</code> and we wouldn't get anything returned.</p>

<p>Fortunately service workers’ promise-based structure makes it trivial&nbsp;to provide further options towards success. We could do this:</p>

<pre class="brush: js">self.addEventListener('fetch', function(event) {
  event.respondWith(
    caches.match(event.request).then(function(response) {
      return response || fetch(event.request);
    })
  );
});</pre>

<p>If the resources isn't in the cache, it is requested from the network.</p>

<p>If we were being really clever, we would not only request the resource from the network; we would also save it into the cache so that later requests for that resource could be retrieved offline too! This would mean that if extra images were added to the Star Wars gallery, our app could automatically grab them and cache them. The following would do the trick:</p>

<pre class="brush: js">self.addEventListener('fetch', function(event) {
  event.respondWith(
    caches.match(event.request).then(function(resp) {
      return resp || fetch(event.request).then(function(response) {
        return caches.open('v1').then(function(cache) {
          cache.put(event.request, response.clone());
          return response;
        });  
      });
    })
  );
});</pre>

<p>Here we return the default network request with <code>return fetch(event.request)</code>, which returns a promise. When this promise is resolved, we respond by running a function that grabs our cache using <code>caches.open('v1')</code>; this also returns a promise. When that promise resolves, <code>cache.put()</code> is used to add the resource to the cache. The resource is grabbed from <code>event.request</code>, and the response is then cloned with <code>response.clone()</code> and added to the cache. The clone is put in the cache, and the original response is returned to the browser to be given to the page that called it.</p>

<p>Cloning the response is necessary&nbsp;because request and response streams can only be read once.&nbsp; In order to return the response to the browser and put it in the cache we have to clone it. So the original gets returned to the browser and the clone gets sent to the cache.&nbsp; They are each read once.</p>

<p>The only trouble we have now is that if the request doesn’t match anything in the cache, and the network is not available, our request will still fail. Let’s provide a default fallback so that whatever happens, the user will at least get something:</p>

<p>&nbsp;</p>

<pre class="brush: js">self.addEventListener('fetch', function(event) {
  event.respondWith(
    caches.match(event.request).then(function(resp) {
      return resp || fetch(event.request).then(function(response) {
        let responseClone = response.clone();
        caches.open('v1').then(function(cache) {
          cache.put(event.request, responseClone);
        });

        return response;
      });
    }).catch(function() {
      return caches.match('/sw-test/gallery/myLittleVader.jpg');
    })
  );
});</pre>

<p>&nbsp;</p>

<p>We have opted for this fallback image because the only updates that are likely to fail are new images, as everything else is depended on for installation in the <code>install</code> event listener we saw earlier.</p>

<a class="dashAnchor" name="//apple_ref/Section/Updating%20your%20service%20worker"></a><h2 id="Updating_your_service_worker"><a id="Updating your service worker" name="Updating your service worker">Updating your service worker</a></h2>

<p>If your service worker has previously been installed, but then a new version of the worker is available on refresh or page load, the new version is installed in the background, but not yet activated. It is only activated when there are no longer any pages loaded that are still using the old service worker. As soon as there are no more such pages still loaded, the new service worker activates.</p>

<p>You’ll want to update your <code>install</code> event listener in the new service worker to something like this (notice the new version number):</p>

<pre class="brush: js">self.addEventListener('install', function(event) {
  event.waitUntil(
    caches.open('v2').then(function(cache) {
      return cache.addAll([
        '/sw-test/',
        '/sw-test/index.html',
        '/sw-test/style.css',
        '/sw-test/app.js',
        '/sw-test/image-list.js',
        
        …

        // include other new resources for the new version...
      ]);
    })
  );
});</pre>

<p>While this happens, the previous version is still responsible for fetches. The new version is installing in the background. We are calling the new cache <code>v2</code>, so the previous <code>v1</code> cache isn't disturbed.</p>

<p>When no pages are using the current version, the new worker activates and becomes responsible for fetches.</p>

<h3 id="Deleting_old_caches">Deleting old caches</h3>

<p>You also get an <code>activate</code> event. This is a generally used to do stuff that would have broken the previous version while it was still running, for example getting rid of old caches. This is also useful for removing data that is no longer needed to avoid filling up too much disk space — each browser has a hard limit on the amount of cache storage that a given service worker can use. The browser does its best to manage disk space, but it may delete the Cache storage for an origin.&nbsp; The browser will generally delete all of the data for an origin or none of the data for an origin.</p>

<p>Promises passed into <code>waitUntil()</code> will block other events until completion, so you can rest assured that your clean-up operation will have completed by the time you get your first <code>fetch</code> event on the new cache.</p>

<pre class="brush: js">self.addEventListener('activate', function(event) {
  var cacheKeeplist = ['v2'];

  event.waitUntil(
    caches.keys().then(function(keyList) {
      return Promise.all(keyList.map(function(key) {
        if (cacheKeeplist.indexOf(key) === -1) {
          return caches.delete(key);
        }
      }));
    })
  );
});</pre>

<a class="dashAnchor" name="//apple_ref/Section/Developer%20tools"></a><h2 id="Developer_tools">Developer tools</h2>

<p>Chrome has <code>chrome://inspect/#service-workers</code>, which shows current service worker activity and storage on a device, and <code>chrome://serviceworker-internals</code>, which shows more detail and allows you to start/stop/debug the worker process. In the future they will have throttling/offline modes to simulate bad or non-existent connections, which will be a really good thing.</p>

<p>Firefox has also started to implement some useful tools related to service workers:</p>

<ul>
 <li>You can navigate to <code><a href="https://developer.mozilla.org/en-US/docs/Tools/about:debugging">about:debugging</a></code> to see what SWs are registered and update/remove them.</li>
 <li>When testing you can get around the HTTPS restriction by checking the "Enable Service Workers over HTTP (when toolbox is open)" option in the <a href="https://developer.mozilla.org/en-US/docs/Tools/Settings">Firefox Developer Tools settings</a>.</li>
 <li>The "Forget" button, available in Firefox's customization options, can be used to clear service workers and their caches (<a class="external" href="https://bugzilla.mozilla.org/show_bug.cgi?id=1252998" rel="noopener" title="FIXED: &quot;Forget&quot; button does not clear Service Workers or their caches.">bug&nbsp;1252998</a>).</li>
</ul>

<div class="note">
<p><strong>Note</strong>: You may serve your app from <code>http://localhost</code> (e.g. using <code>me@localhost:/my/app$ <strong>python -m SimpleHTTPServer</strong></code>) for local development. See <a class="external" href="https://www.w3.org/TR/service-workers/#security-considerations" rel="noopener">Security considerations</a></p>
</div>

<a class="dashAnchor" name="//apple_ref/Section/See%20also"></a><h2 id="See_also">See also</h2>

<ul>
 <li><a class="external" href="http://blog.88mph.io/2017/07/28/understanding-service-workers/" rel="noopener">Understanding Service Workers</a></li>
 <li><a class="external" href="https://serviceworke.rs/" rel="noopener">The Service Worker Cookbook</a></li>
 <li><a class="external" href="https://jakearchibald.github.io/isserviceworkerready/" rel="noopener">Is ServiceWorker ready?</a></li>
 <li>Download the <a class="external" href="../../../../../../mdn.mozillademos.org/files/12638/sw101.png" rel="noopener">Service Workers 101 cheatsheet</a>.</li>
 <li><a href="../../JavaScript/Reference/Global_Objects/Promise.html">Promises</a></li>
 <li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide/Performance/Using_web_workers">Using web workers</a></li>
</ul>
                  
                
              </article>

              <!-- contributors -->
              <div class="wiki-block contributors">
                <h2 class="offscreen">Document Tags and Contributors</h2>
                
                
  <div class="tag-attach-list contributors-sub">
    <svg class="icon icon-tags" xmlns="http://www.w3.org/2000/svg" width="30" height="28" viewBox="0 0 30 28" aria-hidden="true">
    <path d="M7 7c0-1.109-.891-2-2-2s-2 .891-2 2 .891 2 2 2 2-.891 2-2zm16.672 9c0 .531-.219 1.047-.578 1.406l-7.672 7.688c-.375.359-.891.578-1.422.578s-1.047-.219-1.406-.578L1.422 13.906C.625 13.125 0 11.609 0 10.5V4c0-1.094.906-2 2-2h6.5c1.109 0 2.625.625 3.422 1.422l11.172 11.156c.359.375.578.891.578 1.422zm6 0c0 .531-.219 1.047-.578 1.406l-7.672 7.688a2.08 2.08 0 0 1-1.422.578c-.812 0-1.219-.375-1.75-.922l7.344-7.344c.359-.359.578-.875.578-1.406s-.219-1.047-.578-1.422L14.422 3.422C13.625 2.625 12.11 2 11 2h3.5c1.109 0 2.625.625 3.422 1.422l11.172 11.156c.359.375.578.891.578 1.422z"></path>
</svg>
    <strong>Tags:</strong>&nbsp;
    <ul class="tags tags-small">
      
        <li><a href="https://developer.mozilla.org/en-US/docs/tag/basics" rel="nofollow">basics</a></li>
      
        <li><a href="https://developer.mozilla.org/en-US/docs/tag/Guide" rel="nofollow">Guide</a></li>
      
        <li><a href="https://developer.mozilla.org/en-US/docs/tag/Service" rel="nofollow">Service</a></li>
      
        <li><a href="https://developer.mozilla.org/en-US/docs/tag/ServiceWorker" rel="nofollow">ServiceWorker</a></li>
      
        <li><a href="https://developer.mozilla.org/en-US/docs/tag/Workers" rel="nofollow">Workers</a></li>
      
    </ul>
  </div>


                
                  <div class="contributors-sub">
                    <svg class="icon icon-group" xmlns="http://www.w3.org/2000/svg" width="30" height="28" viewBox="0 0 30 28" aria-hidden="true">
    <path d="M9.266 14a5.532 5.532 0 0 0-4.141 2H3.031C1.468 16 0 15.25 0 13.516 0 12.25-.047 8 1.937 8c.328 0 1.953 1.328 4.062 1.328.719 0 1.406-.125 2.078-.359A7.624 7.624 0 0 0 7.999 10c0 1.422.453 2.828 1.266 4zM26 23.953C26 26.484 24.328 28 21.828 28H8.172C5.672 28 4 26.484 4 23.953 4 20.422 4.828 15 9.406 15c.531 0 2.469 2.172 5.594 2.172S20.063 15 20.594 15C25.172 15 26 20.422 26 23.953zM10 4c0 2.203-1.797 4-4 4S2 6.203 2 4s1.797-4 4-4 4 1.797 4 4zm11 6c0 3.313-2.688 6-6 6s-6-2.688-6-6 2.688-6 6-6 6 2.688 6 6zm9 3.516C30 15.25 28.531 16 26.969 16h-2.094a5.532 5.532 0 0 0-4.141-2A7.066 7.066 0 0 0 22 10a7.6 7.6 0 0 0-.078-1.031A6.258 6.258 0 0 0 24 9.328C26.109 9.328 27.734 8 28.062 8c1.984 0 1.937 4.25 1.937 5.516zM28 4c0 2.203-1.797 4-4 4s-4-1.797-4-4 1.797-4 4-4 4 1.797 4 4z"></path>
</svg>
                    <strong>Contributors to this page:</strong>
                    
        <a href="https://developer.mozilla.org/en-US/profiles/mdnwebdocs-bot" rel="nofollow">mdnwebdocs-bot</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/sideshowbarker" rel="nofollow">sideshowbarker</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/hjhimanshu01" rel="nofollow">hjhimanshu01</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/chrisdavidmills" rel="nofollow">chrisdavidmills</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/msobanjo" rel="nofollow">msobanjo</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/fscholz" rel="nofollow">fscholz</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/abrahamwilliams" rel="nofollow">abrahamwilliams</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/fabianTMC" rel="nofollow">fabianTMC</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/DavidGuan" rel="nofollow">DavidGuan</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/Deleplace" rel="nofollow">Deleplace</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/jwhitlock" rel="nofollow">jwhitlock</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/simon04" rel="nofollow">simon04</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/mrmaka" rel="nofollow">mrmaka</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/bmihelac" rel="nofollow">bmihelac</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/erikadoyle" rel="nofollow">erikadoyle</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/YoranBrondsema" rel="nofollow">YoranBrondsema</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/joshua1988" rel="nofollow">joshua1988</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/jpmedley" rel="nofollow">jpmedley</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/kberov" rel="nofollow">kberov</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/wbamberg" rel="nofollow">wbamberg</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/hl222ih" rel="nofollow">hl222ih</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/janx" rel="nofollow">janx</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/karolklp" rel="nofollow">karolklp</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/tomayac" rel="nofollow">tomayac</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/maybe" rel="nofollow">maybe</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/UnJavaScripter" rel="nofollow">UnJavaScripter</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/ebidel" rel="nofollow">ebidel</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/JCE" rel="nofollow">JCE</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/philmander" rel="nofollow">philmander</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/termosa" rel="nofollow">termosa</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/franzy1709" rel="nofollow">franzy1709</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/stevemao" rel="nofollow">stevemao</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/miguelmota" rel="nofollow">miguelmota</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/enguerran" rel="nofollow">enguerran</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/allen.dean" rel="nofollow">allen.dean</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/Brettz9" rel="nofollow">Brettz9</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/jryans" rel="nofollow">jryans</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/teoli" rel="nofollow">teoli</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/bhritchie" rel="nofollow">bhritchie</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/vrana" rel="nofollow">vrana</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/rippedspine" rel="nofollow">rippedspine</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/adria" rel="nofollow">adria</a>, 
    
        <a href="https://developer.mozilla.org/en-US/profiles/Sheppy" rel="nofollow">Sheppy</a>
    
                  </div>
                

                
                  <div class="contributors-sub">
                    <svg class="icon icon-clock" xmlns="http://www.w3.org/2000/svg" width="24" height="28" viewBox="0 0 24 28" aria-hidden="true">
    <path d="M14 8.5v7c0 .281-.219.5-.5.5h-5a.494.494 0 0 1-.5-.5v-1c0-.281.219-.5.5-.5H12V8.5c0-.281.219-.5.5-.5h1c.281 0 .5.219.5.5zm6.5 5.5c0-4.688-3.813-8.5-8.5-8.5S3.5 9.313 3.5 14s3.813 8.5 8.5 8.5 8.5-3.813 8.5-8.5zm3.5 0c0 6.625-5.375 12-12 12S0 20.625 0 14 5.375 2 12 2s12 5.375 12 12z"></path>
</svg>
                    <strong>Last updated by:</strong>
                    <a href="https://developer.mozilla.org/en-US/profiles/mdnwebdocs-bot" rel="nofollow">mdnwebdocs-bot</a>,
                    <time datetime="2019-03-18T16:50:03.094837-07:00">Mar 18, 2019, 4:50:03 PM</time>
                  </div>
                
              </div>
            </div>

            
              <!-- quick links and approvals strip -->
              <div id="wiki-left" class="column-strip wiki-column">

                <!-- crumbs -->
                
  
    
  

                
                  <!-- quick links -->
                  
  <div class="quick-links" id="quick-links">
    <div class="quick-links-head">Related Topics</div>
    
 <ol>
  <li><a href="../Service_Worker_API.html"><strong>Service Worker API</strong></a></li>
  <li class="toggle">
    <details open="">
        <summary>Service Worker guides</summary>
        <ol>
          <li><a href="Using_Service_Workers.html">Using Service Workers</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details open="">
        <summary>Interfaces</summary>
        <ol>
          <li><a href="../Cache.html" title="The Cache interface provides a storage mechanism for Request / Response object pairs that are cached, for example as part of the ServiceWorker life cycle. Note that the Cache interface is exposed to windowed scopes as well as workers. You don't have to use it in conjunction with service workers, even though it is defined in the service worker spec."><code>Cache</code></a></li>
          <li><a href="../CacheStorage.html" title="The CacheStorage interface represents the storage for Cache objects."><code>CacheStorage</code></a></li>
          <li><a href="../Client.html" title="The Client&nbsp;interface represents an executable context such as a Worker, or a SharedWorker. Window clients are represented by the more-specific&nbsp;WindowClient. You can get&nbsp;Client/WindowClient&nbsp;objects from methods such as Clients.matchAll() and&nbsp;Clients.get()."><code>Client</code></a></li>
          <li><a href="../Clients.html" title="The Clients interface provides access to&nbsp;Client&nbsp;objects. Access it&nbsp;via self.clients&nbsp;within a&nbsp;service worker."><code>Clients</code></a></li>
          <li><a href="../ExtendableEvent.html" title="The ExtendableEvent interface extends the lifetime of the install and activate events dispatched on the global scope as part of the service worker lifecycle. This ensures that any functional events (like FetchEvent) are not dispatched until it upgrades database schemas and deletes the outdated cache entries."><code>ExtendableEvent</code></a></li>
          <li><a href="../FetchEvent.html" title="This is the event type for fetch&nbsp;events dispatched on the&nbsp;service worker global scope. It contains information about the fetch, including the&nbsp;request and how the receiver will treat the response. It provides the event.respondWith() method, which allows us to provide a response to this fetch."><code>FetchEvent</code></a></li>
          <li><a href="../InstallEvent.html" title="The parameter passed into the oninstall handler, the InstallEvent interface represents an install action that is dispatched on the ServiceWorkerGlobalScope of a ServiceWorker. As a child of ExtendableEvent,&nbsp;it ensures that functional events such as FetchEvent&nbsp;are not dispatched during installation.&nbsp;"><code>InstallEvent</code></a></li>
          <li><a href="../Navigator/serviceWorker.html" title="The Navigator.serviceWorker read-only property returns the ServiceWorkerContainer object for the associated document, which provides access to registration, removal, upgrade, and communication with the ServiceWorker."><code>Navigator.serviceWorker</code></a></li>
          <li><a href="../NotificationEvent.html" title="The parameter passed into the onnotificationclick handler, the NotificationEvent interface represents a notification click event that is dispatched on the ServiceWorkerGlobalScope of a ServiceWorker."><code>NotificationEvent</code></a></li>
          <li><a class="new" href="../PeriodicSyncEvent.html" rel="nofollow" title="The documentation about this has not yet been written; please consider contributing!"><code>PeriodicSyncEvent</code></a></li>
          <li><a class="new" href="../PeriodicSyncManager.html" rel="nofollow" title="The documentation about this has not yet been written; please consider contributing!"><code>PeriodicSyncManager</code></a></li>
          <li><a class="new" href="../PeriodicSyncRegistration.html" rel="nofollow" title="The documentation about this has not yet been written; please consider contributing!"><code>PeriodicSyncRegistration</code></a></li>
          <li><a href="../ServiceWorker.html" title="The ServiceWorker interface of the ServiceWorker API provides a reference to a service worker. Multiple browsing contexts (e.g. pages, workers, etc.) can be associated with the same service worker, each through a unique ServiceWorker object."><code>ServiceWorker</code></a></li>
          <li><a href="../ServiceWorkerContainer.html" title="The&nbsp;ServiceWorkerContainer&nbsp;interface of the&nbsp;ServiceWorker API&nbsp;provides an object representing the service worker as an overall unit in the network ecosystem, including facilities to register, unregister and update service workers, and access the state of service workers and their registrations."><code>ServiceWorkerContainer</code></a></li>
          <li><a href="../ServiceWorkerGlobalScope.html" title="The ServiceWorkerGlobalScope interface of the ServiceWorker API represents the global execution context of a service worker."><code>ServiceWorkerGlobalScope</code></a></li>
          <li><a href="../ServiceWorkerRegistration.html" title="The ServiceWorkerRegistration interface of the ServiceWorker API represents the service worker registration. You register a service worker to control one or more pages that share the same origin."><code>ServiceWorkerRegistration</code></a></li>
          <li><a href="../SyncEvent.html" title="The SyncEvent interface represents a sync action that is dispatched on the ServiceWorkerGlobalScope&nbsp;of a ServiceWorker.&nbsp;"><code>SyncEvent</code></a></li>
          <li><a href="../SyncManager.html" title="The SyncManager interface of the the ServiceWorker API provides an interface for registering and listing sync registrations."><code>SyncManager</code></a></li>
          <li><a class="new" href="../SyncRegistration.html" rel="nofollow" title="The documentation about this has not yet been written; please consider contributing!"><code>SyncRegistration</code></a></li>
          <li><a href="../WindowClient.html" title="The WindowClient interface of the ServiceWorker API represents the scope of a service worker client that is a document in a browser context, controlled by an active worker. The service worker client independently selects and uses a service worker for its own loading and sub-resources."><code>WindowClient</code></a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details open="">
        <summary>Related APIs</summary>
        <ol>
          <li><a href="../Channel_Messaging_API.html">Channel Messaging API</a></li>
          <li><a href="../Notifications_API.html">Notifications API</a></li>
          <li><a href="../Push_API.html">Push API</a></li>
          <li><a href="../Web_Workers_API.html">Web Workers API</a></li>
        </ol>
    </details>
  </li>
  <li><strong><a href="https://developer.mozilla.org/en-US/docs/MDN">Documentation:</a></strong></li>
  <li class="toggle">
    <details>
        <summary>Useful lists</summary>
        <ol>
          <li><a href="https://developer.mozilla.org/en-US/docs/tag/ServiceWorker">Pages tagged "ServiceWorker"</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Contribute</summary>
        <ol>
          <li><a href="../../../MDN/Doc_status/API/ServiceWorkers.html">Service Worker doc status</a></li>
          <li><a href="https://developer.mozilla.org/en-US/docs/MDN">The MDN project</a></li>
        </ol>
    </details>
  </li>
 </ol>

  </div>
                

                <!-- approvals -->
                

              </div>
            
          </div>
        </div>
      </div>
    </div> <!-- ends "main-content" -->

    
      <div class="newsletter-box">
        <div class="newsletter">
    <form id="newsletterForm" class="newsletter-form nodisable" name="newsletter-form" action="https://www.mozilla.org/en-US/newsletter/" method="post">
        <div class="newsletter-head">
            <h2 class="newsletter-teaser">Learn the best of web development</h2>
            <p class="newsletter-description">Get the latest and greatest from MDN delivered straight to your inbox.</p>
            
        </div>

        <div class="newsletter-fields">
            <input type="hidden" id="fmt" name="fmt" value="H">
            <input type="hidden" id="newsletterNewslettersInput" name="newsletters" value="app-dev">
            <div id="newsletterErrors" class="newsletter-errors"></div>

            <div id="newsletterEmail" class="form-group newsletter-group-email">
                <label for="newsletterEmailInput" class="form-label offscreen">E-mail</label>
                <input type="email" id="newsletterEmailInput" name="email" class="form-input newsletter-input-email" required="" placeholder="you@example.com" size="30">
            </div>

            <div id="newsletterPrivacy" class="form-group form-group-agree newsletter-group-privacy hidden">
                <input type="checkbox" id="newsletterPrivacyInput" name="privacy" required="">
                <label for="newsletterPrivacyInput">
                I'm okay with Mozilla handling my info as explained in this <a href="https://www.mozilla.org/privacy/">Privacy Policy</a>.
                </label>
            </div>
            <div id="newsletterSubmit" class="newsletter-group-submit">
                <button id="newsletter-submit" type="submit" class="button neutral newsletter-submit">
                    Sign up now<svg class="icon icon-arrow" xmlns="http://www.w3.org/2000/svg" width="23" height="28" viewBox="0 0 23 28" aria-hidden="true">
    <path d="M23 15a2.01 2.01 0 0 1-.578 1.422L12.25 26.594c-.375.359-.891.578-1.422.578s-1.031-.219-1.406-.578L8.25 25.422c-.375-.375-.594-.891-.594-1.422s.219-1.047.594-1.422L12.828 18h-11C.703 18 0 17.062 0 16v-2c0-1.062.703-2 1.828-2h11L8.25 7.406a1.96 1.96 0 0 1 0-2.812l1.172-1.172c.375-.375.875-.594 1.406-.594s1.047.219 1.422.594l10.172 10.172c.375.359.578.875.578 1.406z"></path>
</svg>
                </button>
            </div>
        </div>
    </form>
    <div id="newsletterThanks" class="newsletter-thanks hidden">
        <h2>Thanks! Please check your inbox to confirm your subscription.</h2>
        <p>If you haven’t previously confirmed a subscription to a Mozilla-related newsletter you may have to do so. Please check your inbox or your spam filter for an email from us.
        </p>
    </div>
    <button id="newsletterHide" type="button" class="only-icon newsletter-hide hidden">
        <span>Hide Newsletter Sign-up</span>
        <svg class="icon icon-close" xmlns="http://www.w3.org/2000/svg" width="22" height="28" viewBox="0 0 22 28" aria-hidden="true" role="img"><title></title><path d="M20.281 20.656c0 .391-.156.781-.438 1.062l-2.125 2.125c-.281.281-.672.438-1.062.438s-.781-.156-1.062-.438L11 19.249l-4.594 4.594c-.281.281-.672.438-1.062.438s-.781-.156-1.062-.438l-2.125-2.125c-.281-.281-.438-.672-.438-1.062s.156-.781.438-1.062L6.751 15l-4.594-4.594c-.281-.281-.438-.672-.438-1.062s.156-.781.438-1.062l2.125-2.125c.281-.281.672-.438 1.062-.438s.781.156 1.062.438L11 10.751l4.594-4.594c.281-.281.672-.438 1.062-.438s.781.156 1.062.438l2.125 2.125c.281.281.438.672.438 1.062s-.156.781-.438 1.062L15.249 15l4.594 4.594c.281.281.438.672.438 1.062z"></path></svg>
    </button>
</div>
      </div>
    

  <menu type="context" id="edit-history-menu">
    <menuitem data-action="/en-US/users/signin?next=/en-US/docs/Web/API/Service_Worker_API/Using_Service_Workers%24edit" label="Edit page"></menuitem>
    <menuitem data-action="/en-US/docs/Web/API/Service_Worker_API/Using_Service_Workers$history" label="View page history"></menuitem>
  </menu>

      </div>
  </main>

  <!-- Footer -->
    <footer id="nav-footer" class="nav-footer"><div class="center"><a href="http://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API/Using_Service_Workers">Using Service Workers</a> by <a href="http://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API/Using_Service_Workers$history">Mozilla Contributors</a> is licensed under <a href="http://creativecommons.org/licenses/by-sa/2.5/" class="external external-icon">CC-BY-SA 2.5</a>.</div></footer> 

  <!-- site js -->
  
    
    <!--[if lte IE 8]><script async="" type="text/javascript" src=".selectivizr.8bb9e662e963.js" charset="utf-8"></script><![endif]-->

    
    <script src="../../../../../static/jsi18n/en-US/javascript.414b87adc480.js"></script>
    <script type="text/javascript" src="../../../../../static/build/js/main.07c77248863e.js" charset="utf-8"></script>
    <script>
    if (window.mdn && mdn.analytics) mdn.analytics.trackOutboundLinks();
  </script>
    
  
    <script async="" type="text/javascript" src="../../../../../static/build/js/syntax-prism.js" charset="utf-8"></script><script type="text/javascript" src=".selectivizr.8bb9e662e963.js" charset="utf-8"></script><!--[endif]---->

    
    <script src="../../../../../static/jsi18n/en-US/javascript.414b87adc480.js"></script>
    <script type="text/javascript" src="../../../../../static/build/js/main.07c77248863e.js" charset="utf-8"></script>
    <script>
    if (window.mdn && mdn.analytics) mdn.analytics.trackOutboundLinks();
  </script>
    
  
    <script async="" type="text/javascript" src="../../../../../static/build/js/wiki.c63623e4caba.js" charset="utf-8" id="wikiscript"></script>


  

  

  

  
    <script async="" type="text/javascript" src="../../../../../static/build/js/newsletter.a85c5c2892e5.js" charset="utf-8"></script>
  




<!-- Mirrored from developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API/Using_Service_Workers by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 01 May 2019 23:19:18 GMT -->
</body></html>